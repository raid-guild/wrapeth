function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(global,factory){(typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=global||self,global.notify=factory())})(this,function(){'use strict';var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var rngBrowser=createCommonjsModule(function(module){// Unique ID creation requires a high quality random # generator.  In the
// browser this is a little complicated due to unknown quality of Math.random()
// and inconsistent support for the `crypto` API.  We do the best we can via
// feature-detection
// getRandomValues needs to be invoked in a context where "this" is a Crypto
// implementation. Also, find the complete implementation of crypto on IE11.
var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){// WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto
var rnds8=new Uint8Array(16);// eslint-disable-line no-undef
module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{// Math.random()-based (RNG)
//
// If all else fails, use Math.random().  It's fast, but is of unspecified
// quality.
var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}});/**
	 * Convert array of 16 byte values to UUID string format of the form:
	 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
	 */var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;// join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4
return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}var bytesToUuid_1=bytesToUuid;function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rngBrowser)();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;// Copy bytes to buffer, if provided
if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid_1(rnds)}var v4_1=v4;function noop(){}var identity=function identity(x){return x};function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return typeof thing==="function"}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&_typeof(a)==="object"||typeof a==="function"}function subscribe(store,callback){var unsub=store.subscribe(callback);return unsub.unsubscribe?function(){return unsub.unsubscribe()}:unsub}function get_store_value(store){var value;subscribe(store,function(_){return value=_})();return value}function component_subscribe(component,store,callback){component.$$.on_destroy.push(subscribe(store,callback))}var is_client=typeof window!=="undefined";var now=is_client?function(){return window.performance.now()}:function(){return Date.now()};var raf=is_client?function(cb){return requestAnimationFrame(cb)}:noop;var tasks=new Set;var running=false;function run_tasks(){tasks.forEach(function(task){if(!task[0](now())){tasks["delete"](task);task[1]()}});running=tasks.size>0;if(running)raf(run_tasks)}function loop(fn){var task;if(!running){running=true;raf(run_tasks)}return{promise:new Promise(function(fulfil){tasks.add(task=[fn,fulfil])}),abort:function abort(){tasks["delete"](task)}}}function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function element(name){return document.createElement(name)}function svg_element(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){node.addEventListener(event,handler,options);return function(){return node.removeEventListener(event,handler,options)}}function attr(node,attribute,value){if(value==null)node.removeAttribute(attribute);else node.setAttribute(attribute,value)}function children(element){return Array.from(element.childNodes)}function set_data(text,data){data=""+data;if(text.data!==data)text.data=data}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function toggle_class(element,name,toggle){element.classList[toggle?"add":"remove"](name)}function custom_event(type,detail){var e=document.createEvent("CustomEvent");e.initCustomEvent(type,false,false,detail);return e}var stylesheet;var active=0;var current_rules={};// https://github.com/darkskyapp/string-hash/blob/master/index.js
function hash(str){var hash=5381;var i=str.length;while(i--){hash=(hash<<5)-hash^str.charCodeAt(i)}return hash>>>0}function create_rule(node,a,b,duration,delay,ease,fn){var uid=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;var step=16.666/duration;var keyframes="{\n";for(var p=0;p<=1;p+=step){var t=a+(b-a)*ease(p);keyframes+=p*100+"%{".concat(fn(t,1-t),"}\n")}var rule=keyframes+"100% {".concat(fn(b,1-b),"}\n}");var name="__svelte_".concat(hash(rule),"_").concat(uid);if(!current_rules[name]){if(!stylesheet){var style=element("style");document.head.appendChild(style);stylesheet=style.sheet}current_rules[name]=true;stylesheet.insertRule("@keyframes ".concat(name," ").concat(rule),stylesheet.cssRules.length)}var animation=node.style.animation||"";node.style.animation="".concat(animation?"".concat(animation,", "):"").concat(name," ").concat(duration,"ms linear ").concat(delay,"ms 1 both");active+=1;return name}function delete_rule(node,name){node.style.animation=(node.style.animation||"").split(", ").filter(name?function(anim){return anim.indexOf(name)<0}// remove specific animation
:function(anim){return anim.indexOf("__svelte")===-1}// remove all Svelte animations
).join(", ");if(name&&! --active)clear_rules()}function clear_rules(){raf(function(){if(active)return;var i=stylesheet.cssRules.length;while(i--){stylesheet.deleteRule(i)}current_rules={}})}function create_animation(node,from,fn,params){if(!from)return noop;var to=node.getBoundingClientRect();if(from.left===to.left&&from.right===to.right&&from.top===to.top&&from.bottom===to.bottom)return noop;var _fn=fn(node,{from:from,to:to},params),_fn$delay=_fn.delay,delay=_fn$delay===void 0?0:_fn$delay,_fn$duration=_fn.duration,duration=_fn$duration===void 0?300:_fn$duration,_fn$easing=_fn.easing,easing=_fn$easing===void 0?identity:_fn$easing,_fn$start=_fn.start,start_time=_fn$start===void 0?now()+delay:_fn$start,_fn$end=_fn.end,end=_fn$end===void 0?start_time+duration:_fn$end,_fn$tick=_fn.tick,tick=_fn$tick===void 0?noop:_fn$tick,css=_fn.css;var running=true;var started=false;var name;function start(){if(css){name=create_rule(node,0,1,duration,delay,easing,css)}if(!delay){started=true}}function stop(){if(css)delete_rule(node,name);running=false}loop(function(now){if(!started&&now>=start_time){started=true}if(started&&now>=end){tick(1,0);stop()}if(!running){return false}if(started){var p=now-start_time;var t=0+1*easing(p/duration);tick(t,1-t)}return true});start();tick(0,1);return stop}function fix_position(node){var style=getComputedStyle(node);if(style.position!=="absolute"&&style.position!=="fixed"){var width=style.width,height=style.height;var a=node.getBoundingClientRect();node.style.position="absolute";node.style.width=width;node.style.height=height;add_transform(node,a)}}function add_transform(node,a){var b=node.getBoundingClientRect();if(a.left!==b.left||a.top!==b.top){var style=getComputedStyle(node);var transform=style.transform==="none"?"":style.transform;node.style.transform="".concat(transform," translate(").concat(a.left-b.left,"px, ").concat(a.top-b.top,"px)")}}var current_component;function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}var dirty_components=[];var binding_callbacks=[];var render_callbacks=[];var flush_callbacks=[];var resolved_promise=Promise.resolve();var update_scheduled=false;function schedule_update(){if(!update_scheduled){update_scheduled=true;resolved_promise.then(flush)}}function add_render_callback(fn){render_callbacks.push(fn)}function flush(){var seen_callbacks=new Set;do{// first, call beforeUpdate functions
// and update components
while(dirty_components.length){var component=dirty_components.shift();set_current_component(component);update(component.$$)}while(binding_callbacks.length){binding_callbacks.pop()()}// then, once components are updated, call
// afterUpdate functions. This may cause
// subsequent updates...
for(var _i2=0;_i2<render_callbacks.length;_i2+=1){var callback=render_callbacks[_i2];if(!seen_callbacks.has(callback)){callback();// ...so guard against infinite loops
seen_callbacks.add(callback)}}render_callbacks.length=0}while(dirty_components.length);while(flush_callbacks.length){flush_callbacks.pop()()}update_scheduled=false}function update($$){if($$.fragment){$$.update($$.dirty);run_all($$.before_update);$$.fragment.p($$.dirty,$$.ctx);$$.dirty=null;$$.after_update.forEach(add_render_callback)}}var promise;function wait(){if(!promise){promise=Promise.resolve();promise.then(function(){promise=null})}return promise}function dispatch(node,direction,kind){node.dispatchEvent(custom_event("".concat(direction?"intro":"outro").concat(kind)))}var outroing=new Set;var outros;function group_outros(){outros={r:0,c:[],p:outros// parent group
}}function check_outros(){if(!outros.r){run_all(outros.c)}outros=outros.p}function transition_in(block,local){if(block&&block.i){outroing["delete"](block);block.i(local)}}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block);outros.c.push(function(){outroing["delete"](block);if(callback){if(detach)block.d(1);callback()}});block.o(local)}}var null_transition={duration:0};function create_in_transition(node,fn,params){var config=fn(node,params);var running=false;var animation_name;var task;var uid=0;function cleanup(){if(animation_name)delete_rule(node,animation_name)}function go(){var _ref=config||null_transition,_ref$delay=_ref.delay,delay=_ref$delay===void 0?0:_ref$delay,_ref$duration=_ref.duration,duration=_ref$duration===void 0?300:_ref$duration,_ref$easing=_ref.easing,easing=_ref$easing===void 0?identity:_ref$easing,_ref$tick=_ref.tick,tick=_ref$tick===void 0?noop:_ref$tick,css=_ref.css;if(css)animation_name=create_rule(node,0,1,duration,delay,easing,css,uid++);tick(0,1);var start_time=now()+delay;var end_time=start_time+duration;if(task)task.abort();running=true;add_render_callback(function(){return dispatch(node,true,"start")});task=loop(function(now){if(running){if(now>=end_time){tick(1,0);dispatch(node,true,"end");cleanup();return running=false}if(now>=start_time){var t=easing((now-start_time)/duration);tick(t,1-t)}}return running})}var started=false;return{start:function start(){if(started)return;delete_rule(node);if(is_function(config)){config=config();wait().then(go)}else{go()}},invalidate:function invalidate(){started=false},end:function end(){if(running){cleanup();running=false}}}}function create_out_transition(node,fn,params){var config=fn(node,params);var running=true;var animation_name;var group=outros;group.r+=1;function go(){var _ref2=config||null_transition,_ref2$delay=_ref2.delay,delay=_ref2$delay===void 0?0:_ref2$delay,_ref2$duration=_ref2.duration,duration=_ref2$duration===void 0?300:_ref2$duration,_ref2$easing=_ref2.easing,easing=_ref2$easing===void 0?identity:_ref2$easing,_ref2$tick=_ref2.tick,tick=_ref2$tick===void 0?noop:_ref2$tick,css=_ref2.css;if(css)animation_name=create_rule(node,1,0,duration,delay,easing,css);var start_time=now()+delay;var end_time=start_time+duration;add_render_callback(function(){return dispatch(node,false,"start")});loop(function(now){if(running){if(now>=end_time){tick(0,1);dispatch(node,false,"end");if(! --group.r){// this will result in `end()` being called,
// so we don't need to clean up here
run_all(group.c)}return false}if(now>=start_time){var t=easing((now-start_time)/duration);tick(1-t,t)}}return running})}if(is_function(config)){wait().then(function(){// @ts-ignore
config=config();go()})}else{go()}return{end:function end(reset){if(reset&&config.tick){config.tick(1,0)}if(running){if(animation_name)delete_rule(node,animation_name);running=false}}}}function outro_and_destroy_block(block,lookup){transition_out(block,1,1,function(){lookup["delete"](block.key)})}function fix_and_outro_and_destroy_block(block,lookup){block.f();outro_and_destroy_block(block,lookup)}function update_keyed_each(old_blocks,changed,get_key,dynamic,ctx,list,lookup,node,destroy,create_each_block,next,get_context){var o=old_blocks.length;var n=list.length;var i=o;var old_indexes={};while(i--){old_indexes[old_blocks[i].key]=i}var new_blocks=[];var new_lookup=new Map;var deltas=new Map;i=n;while(i--){var child_ctx=get_context(ctx,list,i);var key=get_key(child_ctx);var block=lookup.get(key);if(!block){block=create_each_block(key,child_ctx);block.c()}else if(dynamic){block.p(changed,child_ctx)}new_lookup.set(key,new_blocks[i]=block);if(key in old_indexes)deltas.set(key,Math.abs(i-old_indexes[key]))}var will_move=new Set;var did_move=new Set;function insert(block){transition_in(block,1);block.m(node,next);lookup.set(block.key,block);next=block.first;n--}while(o&&n){var new_block=new_blocks[n-1];var old_block=old_blocks[o-1];var new_key=new_block.key;var old_key=old_block.key;if(new_block===old_block){// do nothing
next=new_block.first;o--;n--}else if(!new_lookup.has(old_key)){// remove old block
destroy(old_block,lookup);o--}else if(!lookup.has(new_key)||will_move.has(new_key)){insert(new_block)}else if(did_move.has(old_key)){o--}else if(deltas.get(new_key)>deltas.get(old_key)){did_move.add(new_key);insert(new_block)}else{will_move.add(old_key);o--}}while(o--){var _old_block=old_blocks[o];if(!new_lookup.has(_old_block.key))destroy(_old_block,lookup)}while(n){insert(new_blocks[n-1])}return new_blocks}function mount_component(component,target,anchor){var _component$$$=component.$$,fragment=_component$$$.fragment,on_mount=_component$$$.on_mount,on_destroy=_component$$$.on_destroy,after_update=_component$$$.after_update;fragment.m(target,anchor);// onMount happens before the initial afterUpdate
add_render_callback(function(){var new_on_destroy=on_mount.map(run).filter(is_function);if(on_destroy){on_destroy.push.apply(on_destroy,_toConsumableArray(new_on_destroy))}else{// Edge case - component was destroyed immediately,
// most likely as a result of a binding initialising
run_all(new_on_destroy)}component.$$.on_mount=[]});after_update.forEach(add_render_callback)}function destroy_component(component,detaching){if(component.$$.fragment){run_all(component.$$.on_destroy);component.$$.fragment.d(detaching);// TODO null out other refs, including component.$$ (but need to
// preserve final state?)
component.$$.on_destroy=component.$$.fragment=null;component.$$.ctx={}}}function make_dirty(component,key){if(!component.$$.dirty){dirty_components.push(component);schedule_update();component.$$.dirty=blank_object()}component.$$.dirty[key]=true}function init(component,options,instance,create_fragment,not_equal,prop_names){var parent_component=current_component;set_current_component(component);var props=options.props||{};var $$=component.$$={fragment:null,ctx:null,// state
props:prop_names,update:noop,not_equal:not_equal,bound:blank_object(),// lifecycle
on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:[]),// everything else
callbacks:blank_object(),dirty:null};var ready=false;$$.ctx=instance?instance(component,props,function(key,ret){var value=arguments.length>2&&arguments[2]!==undefined?arguments[2]:ret;if($$.ctx&&not_equal($$.ctx[key],$$.ctx[key]=value)){if($$.bound[key])$$.bound[key](value);if(ready)make_dirty(component,key)}return ret}):props;$$.update();ready=true;run_all($$.before_update);$$.fragment=create_fragment($$.ctx);if(options.target){if(options.hydrate){// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
$$.fragment.l(children(options.target))}else{// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
$$.fragment.c()}if(options.intro)transition_in(component.$$.fragment);mount_component(component,options.target,options.anchor);flush()}set_current_component(parent_component)}var SvelteComponent=/*#__PURE__*/function(){function SvelteComponent(){_classCallCheck(this,SvelteComponent)}_createClass(SvelteComponent,[{key:"$destroy",value:function $destroy(){destroy_component(this,1);this.$destroy=noop}},{key:"$on",value:function $on(type,callback){var callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);callbacks.push(callback);return function(){var index=callbacks.indexOf(callback);if(index!==-1)callbacks.splice(index,1)}}},{key:"$set",value:function $set(){// overridden by instance, if it has props
}}]);return SvelteComponent}();var subscriber_queue=[];/**
	 * Creates a `Readable` store that allows reading by subscription.
	 * @param value initial value
	 * @param {StartStopNotifier}start start and stop notifications for subscriptions
	 */function readable(value,start){return{subscribe:writable(value,start).subscribe}}/**
	 * Create a `Writable` store that allows both updating and reading by subscription.
	 * @param {*=}value initial value
	 * @param {StartStopNotifier=}start start and stop notifications for subscriptions
	 */function writable(value){var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop;var stop;var subscribers=[];function set(new_value){if(safe_not_equal(value,new_value)){value=new_value;if(stop){// store is ready
var run_queue=!subscriber_queue.length;for(var _i3=0;_i3<subscribers.length;_i3+=1){var s=subscribers[_i3];s[1]();subscriber_queue.push(s,value)}if(run_queue){for(var _i4=0;_i4<subscriber_queue.length;_i4+=2){subscriber_queue[_i4][0](subscriber_queue[_i4+1])}subscriber_queue.length=0}}}}function update(fn){set(fn(value))}function subscribe(run){var invalidate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop;var subscriber=[run,invalidate];subscribers.push(subscriber);if(subscribers.length===1){stop=start(set)||noop}run(value);return function(){var index=subscribers.indexOf(subscriber);if(index!==-1){subscribers.splice(index,1)}if(subscribers.length===0){stop();stop=null}}}return{set:set,update:update,subscribe:subscribe}}/**
	 * Derived value store by synchronizing one or more readable stores and
	 * applying an aggregation function over its input values.
	 * @param {Stores} stores input stores
	 * @param {function(Stores=, function(*)=):*}fn function callback that aggregates the values
	 * @param {*=}initial_value when used asynchronously
	 */function derived(stores,fn,initial_value){var single=!Array.isArray(stores);var stores_array=single?[stores]:stores;var auto=fn.length<2;return readable(initial_value,function(set){var inited=false;var values=[];var pending=0;var cleanup=noop;var sync=function sync(){if(pending){return}cleanup();var result=fn(single?values[0]:values,set);if(auto){set(result)}else{cleanup=is_function(result)?result:noop}};var unsubscribers=stores_array.map(function(store,i){return store.subscribe(function(value){values[i]=value;pending&=~(1<<i);if(inited){sync()}},function(){pending|=1<<i})});inited=true;sync();return function stop(){run_all(unsubscribers);cleanup()}})}// gutted from https://github.com/Polymer/observe-js/blob/master/src/observe.js
function noop$1(){}function detectEval(){// Don't test for eval if we're running in a Chrome App environment.
// We check for APIs set that only exist in a Chrome App context.
if(typeof chrome!=="undefined"&&chrome.app&&chrome.app.runtime){return false}// Firefox OS Apps do not allow eval. This feature detection is very hacky
// but even if some other platform adds support for this function this code
// will continue to work.
if(typeof navigator!="undefined"&&navigator.getDeviceStorage){return false}try{var f=new Function("","return true;");return f()}catch(ex){return false}}var hasEval=detectEval();function isIndex(s){return+s===s>>>0&&s!==""}function isObject(obj){return obj===Object(obj)}var createObject="__proto__"in{}?function(obj){return obj}:function(obj){var proto=obj.__proto__;if(!proto)return obj;var newObject=Object.create(proto);Object.getOwnPropertyNames(obj).forEach(function(name){Object.defineProperty(newObject,name,Object.getOwnPropertyDescriptor(obj,name))});return newObject};function parsePath(path){var keys=[];var index=-1;var c,newChar,key,type,transition,action,typeMap,mode="beforePath";var actions={push:function push(){if(key===undefined)return;keys.push(key);key=undefined},append:function append(){if(key===undefined)key=newChar;else key+=newChar}};function maybeUnescapeQuote(){if(index>=path.length)return;var nextChar=path[index+1];if(mode=="inSingleQuote"&&nextChar=="'"||mode=="inDoubleQuote"&&nextChar=="\""){index++;newChar=nextChar;actions.append();return true}}while(mode){index++;c=path[index];if(c=="\\"&&maybeUnescapeQuote())continue;type=getPathCharType(c);typeMap=pathStateMachine[mode];transition=typeMap[type]||typeMap["else"]||"error";if(transition=="error")return;// parse error
mode=transition[0];action=actions[transition[1]]||noop$1;newChar=transition[2]===undefined?c:transition[2];action();if(mode==="afterPath"){return keys}}return;// parse error
}var identStart="[$_a-zA-Z]";var identPart="[$_a-zA-Z0-9]";var identRegExp=new RegExp("^"+identStart+"+"+identPart+"*"+"$");function isIdent(s){return identRegExp.test(s)}var constructorIsPrivate={};function Path(parts,privateToken){if(privateToken!==constructorIsPrivate)throw Error("Use Path.get to retrieve path objects");for(var i=0;i<parts.length;i++){this.push(String(parts[i]))}if(hasEval&&this.length){this.getValueFrom=this.compiledGetValueFromFn()}}var pathCache={};function getPath(pathString){if(pathString instanceof Path)return pathString;if(pathString==null||pathString.length==0)pathString="";if(typeof pathString!="string"){if(isIndex(pathString.length)){// Constructed with array-like (pre-parsed) keys
return new Path(pathString,constructorIsPrivate)}pathString=String(pathString)}var path=pathCache[pathString];if(path)return path;var parts=parsePath(pathString);if(!parts)return invalidPath;var path=new Path(parts,constructorIsPrivate);pathCache[pathString]=path;return path}Path.get=getPath;function formatAccessor(key){if(isIndex(key)){return"["+key+"]"}else{return"[\""+key.replace(/"/g,"\\\"")+"\"]"}}Path.prototype=createObject({__proto__:[],valid:true,toString:function toString(){var pathString="";for(var i=0;i<this.length;i++){var key=this[i];if(isIdent(key)){pathString+=i?"."+key:key}else{pathString+=formatAccessor(key)}}return pathString},getValueFrom:function getValueFrom(obj,directObserver){for(var i=0;i<this.length;i++){if(obj==null)return;obj=obj[this[i]]}return obj},iterateObjects:function iterateObjects(obj,observe){for(var i=0;i<this.length;i++){if(i)obj=obj[this[i-1]];if(!isObject(obj))return;observe(obj,this[i])}},compiledGetValueFromFn:function compiledGetValueFromFn(){var str="";var pathString="obj";str+="if (obj != null";var i=0;var key;for(;i<this.length-1;i++){key=this[i];pathString+=isIdent(key)?"."+key:formatAccessor(key);str+=" &&\n     "+pathString+" != null"}str+=")\n";var key=this[i];pathString+=isIdent(key)?"."+key:formatAccessor(key);str+="  return "+pathString+";\nelse\n  return undefined;";return new Function("obj",str)},setValueFrom:function setValueFrom(obj,value){if(!this.length)return false;for(var i=0;i<this.length-1;i++){if(!isObject(obj))return false;obj=obj[this[i]]}if(!isObject(obj))return false;obj[this[i]]=value;return true}});function getPathCharType(_char){if(_char===undefined)return"eof";var code=_char.charCodeAt(0);switch(code){case 91:// [
case 93:// ]
case 46:// .
case 34:// "
case 39:// '
case 48:// 0
return _char;case 95:// _
case 36:// $
return"ident";case 32:// Space
case 9:// Tab
case 10:// Newline
case 13:// Return
case 160:// No-break space
case 65279:// Byte Order Mark
case 8232:// Line Separator
case 8233:// Paragraph Separator
return"ws";}// a-z, A-Z
if(97<=code&&code<=122||65<=code&&code<=90)return"ident";// 1-9
if(49<=code&&code<=57)return"number";return"else"}var pathStateMachine={"beforePath":{"ws":["beforePath"],"ident":["inIdent","append"],"[":["beforeElement"],"eof":["afterPath"]},"inPath":{"ws":["inPath"],".":["beforeIdent"],"[":["beforeElement"],"eof":["afterPath"]},"beforeIdent":{"ws":["beforeIdent"],"ident":["inIdent","append"]},"inIdent":{"ident":["inIdent","append"],"0":["inIdent","append"],"number":["inIdent","append"],"ws":["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],"eof":["afterPath","push"]},"beforeElement":{"ws":["beforeElement"],"0":["afterZero","append"],"number":["inIndex","append"],"'":["inSingleQuote","append",""],"\"":["inDoubleQuote","append",""]},"afterZero":{"ws":["afterElement","push"],"]":["inPath","push"]},"inIndex":{"0":["inIndex","append"],"number":["inIndex","append"],"ws":["afterElement"],"]":["inPath","push"]},"inSingleQuote":{"'":["afterElement"],"eof":["error"],"else":["inSingleQuote","append"]},"inDoubleQuote":{"\"":["afterElement"],"eof":["error"],"else":["inDoubleQuote","append"]},"afterElement":{"ws":["afterElement"],"]":["inPath","push"]}};var invalidPath=new Path("",constructorIsPrivate);invalidPath.valid=false;invalidPath.getValueFrom=invalidPath.setValueFrom=function(){};var path=Path;/**
	 *
	 * @param {Object} o
	 * @param {String} path
	 * @returns {*}
	 */var objectResolvePath=function objectResolvePath(o,path$1){if(typeof path$1!=="string"){throw new TypeError("path must be a string")}if(_typeof(o)!=="object"){throw new TypeError("object must be passed")}var pathObj=path.get(path$1);if(!pathObj.valid){throw new Error("path is not a valid object path")}return pathObj.getValueFrom(o)};var parser=/*
	 * Generated by PEG.js 0.10.0.
	 *
	 * http://pegjs.org/
	 */function(){function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function literal(expectation){return"\""+literalEscape(expectation.text)+"\""},"class":function _class(expectation){var escapedParts="",i;for(i=0;i<expectation.parts.length;i++){escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i])}return"["+(expectation.inverted?"^":"")+escapedParts+"]"},any:function any(expectation){return"any character"},end:function end(expectation){return"end of input"},other:function other(expectation){return expectation.description}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}function literalEscape(s){return s.replace(/\\/g,"\\\\").replace(/"/g,"\\\"").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function classEscape(s){return s.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return"\\x"+hex(ch)})}function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation)}function describeExpected(expected){var descriptions=new Array(expected.length),i,j;for(i=0;i<expected.length;i++){descriptions[i]=describeExpectation(expected[i])}descriptions.sort();if(descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++){if(descriptions[i-1]!==descriptions[i]){descriptions[j]=descriptions[i];j++}}descriptions.length=j}switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")+", or "+descriptions[descriptions.length-1];}}function describeFound(found){return found?"\""+literalEscape(found)+"\"":"end of input"}return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found."};function peg$parse(input,options){options=options!==void 0?options:{};var peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function peg$c0(elements){return{type:"messageFormatPattern",elements:elements,location:location()}},peg$c1=function peg$c1(chunks){return chunks.reduce(function(all,chunk){return all.concat(chunk)},[]).join("")},peg$c2=function peg$c2(messageText){return{type:"messageTextElement",value:messageText,location:location()}},peg$c3=function peg$c3(chars){return chars.join("")},peg$c4="{",peg$c5=peg$literalExpectation("{",false),peg$c6=",",peg$c7=peg$literalExpectation(",",false),peg$c8="}",peg$c9=peg$literalExpectation("}",false),peg$c10=function peg$c10(id,format){return{type:"argumentElement",id:id,format:format&&format[2],location:location()}},peg$c11="number",peg$c12=peg$literalExpectation("number",false),peg$c13="date",peg$c14=peg$literalExpectation("date",false),peg$c15="time",peg$c16=peg$literalExpectation("time",false),peg$c17=function peg$c17(type,style){return{type:type+"Format",style:style&&style[2],location:location()}},peg$c18="plural",peg$c19=peg$literalExpectation("plural",false),peg$c20=function peg$c20(pluralStyle){return{type:pluralStyle.type,ordinal:false,offset:pluralStyle.offset||0,options:pluralStyle.options,location:location()}},peg$c21="selectordinal",peg$c22=peg$literalExpectation("selectordinal",false),peg$c23=function peg$c23(pluralStyle){return{type:pluralStyle.type,ordinal:true,offset:pluralStyle.offset||0,options:pluralStyle.options,location:location()}},peg$c24="select",peg$c25=peg$literalExpectation("select",false),peg$c26=function peg$c26(options){return{type:"selectFormat",options:options,location:location()}},peg$c27="=",peg$c28=peg$literalExpectation("=",false),peg$c29=function peg$c29(selector,pattern){return{type:"optionalFormatPattern",selector:selector,value:pattern,location:location()}},peg$c30="offset:",peg$c31=peg$literalExpectation("offset:",false),peg$c32=function peg$c32(number){return number},peg$c33=function peg$c33(offset,options){return{type:"pluralFormat",offset:offset,options:options,location:location()}},peg$c34=peg$otherExpectation("whitespace"),peg$c35=/^[ \t\n\r]/,peg$c36=peg$classExpectation([" ","\t","\n","\r"],false,false),peg$c37=peg$otherExpectation("optionalWhitespace"),peg$c38=/^[0-9]/,peg$c39=peg$classExpectation([["0","9"]],false,false),peg$c40=/^[0-9a-f]/i,peg$c41=peg$classExpectation([["0","9"],["a","f"]],false,true),peg$c42="0",peg$c43=peg$literalExpectation("0",false),peg$c44=/^[1-9]/,peg$c45=peg$classExpectation([["1","9"]],false,false),peg$c46=function peg$c46(digits){return parseInt(digits,10)},peg$c47="'",peg$c48=peg$literalExpectation("'",false),peg$c49=/^[ \t\n\r,.+={}#]/,peg$c50=peg$classExpectation([" ","\t","\n","\r",",",".","+","=","{","}","#"],false,false),peg$c51=peg$anyExpectation(),peg$c52=function peg$c52(_char2){return _char2},peg$c53=function peg$c53(sequence){return sequence},peg$c54=/^[^{}\\\0-\x1F\x7F \t\n\r]/,peg$c55=peg$classExpectation(["{","}","\\",["\0","\x1F"],"\x7F"," ","\t","\n","\r"],true,false),peg$c56="\\\\",peg$c57=peg$literalExpectation("\\\\",false),peg$c58=function peg$c58(){return"\\"},peg$c59="\\#",peg$c60=peg$literalExpectation("\\#",false),peg$c61=function peg$c61(){return"\\#"},peg$c62="\\{",peg$c63=peg$literalExpectation("\\{",false),peg$c64=function peg$c64(){return"{"},peg$c65="\\}",peg$c66=peg$literalExpectation("\\}",false),peg$c67=function peg$c67(){return"}"},peg$c68="\\u",peg$c69=peg$literalExpectation("\\u",false),peg$c70=function peg$c70(digits){return String.fromCharCode(parseInt(digits,16))},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+"\".")}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase}}function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase}}function peg$anyExpectation(){return{type:"any"}}function peg$endExpectation(){return{type:"end"}}function peg$otherExpectation(description){return{type:"other",description:description}}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column};while(p<pos){if(input.charCodeAt(p)===10){details.line++;details.column=1}else{details.column++}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location)}function peg$parsestart(){var s0;s0=peg$parsemessageFormatPattern();return s0}function peg$parsemessageFormatPattern(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsemessageFormatElement();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsemessageFormatElement()}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s1)}s0=s1;return s0}function peg$parsemessageFormatElement(){var s0;s0=peg$parsemessageTextElement();if(s0===peg$FAILED){s0=peg$parseargumentElement()}return s0}function peg$parsemessageText(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=[];s2=peg$currPos;s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsechars();if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s3=[s3,s4,s5];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$currPos;s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsechars();if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s3=[s3,s4,s5];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c1(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}}return s0}function peg$parsemessageTextElement(){var s0,s1;s0=peg$currPos;s1=peg$parsemessageText();if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c2(s1)}s0=s1;return s0}function peg$parseargument(){var s0,s1,s2;s0=peg$parsenumber();if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parsequoteEscapedChar();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsequoteEscapedChar()}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1)}s0=s1}return s0}function peg$parseargumentElement(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseargument();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$currPos;if(input.charCodeAt(peg$currPos)===44){s6=peg$c6;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){s8=peg$parseelementFormat();if(s8!==peg$FAILED){s6=[s6,s7,s8];s5=s6}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}}else{peg$currPos=s5;s5=peg$FAILED}if(s5===peg$FAILED){s5=null}if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s7=peg$c8;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c10(s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseelementFormat(){var s0;s0=peg$parsesimpleFormat();if(s0===peg$FAILED){s0=peg$parsepluralFormat();if(s0===peg$FAILED){s0=peg$parseselectOrdinalFormat();if(s0===peg$FAILED){s0=peg$parseselectFormat()}}}return s0}function peg$parsesimpleFormat(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c11){s1=peg$c11;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c12)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c13){s1=peg$c13;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c15){s1=peg$c15;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===44){s4=peg$c6;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsechars();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}if(s3===peg$FAILED){s3=null}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c17(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsepluralFormat(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c18){s1=peg$c18;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c19)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsepluralStyle();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c20(s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseselectOrdinalFormat(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,13)===peg$c21){s1=peg$c21;peg$currPos+=13}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsepluralStyle();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseselectFormat(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c24){s1=peg$c24;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c6;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=[];s6=peg$parseoptionalFormatPattern();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parseoptionalFormatPattern()}}else{s5=peg$FAILED}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c26(s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseselector(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$currPos;if(input.charCodeAt(peg$currPos)===61){s2=peg$c27;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28)}}if(s2!==peg$FAILED){s3=peg$parsenumber();if(s3!==peg$FAILED){s2=[s2,s3];s1=s2}else{peg$currPos=s1;s1=peg$FAILED}}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}if(s0===peg$FAILED){s0=peg$parsechars()}return s0}function peg$parseoptionalFormatPattern(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=peg$parseselector();if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s4=peg$c4;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5)}}if(s4!==peg$FAILED){s5=peg$parsemessageFormatPattern();if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s6=peg$c8;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9)}}if(s6!==peg$FAILED){peg$savedPos=s0;s1=peg$c29(s2,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseoffset(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,7)===peg$c30){s1=peg$c30;peg$currPos+=7}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c31)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parsenumber();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c32(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsepluralStyle(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseoffset();if(s1===peg$FAILED){s1=null}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=[];s4=peg$parseoptionalFormatPattern();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseoptionalFormatPattern()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c33(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parsews(){var s0,s1;peg$silentFails++;s0=[];if(peg$c35.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c35.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c36)}}}}else{s0=peg$FAILED}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c34)}}return s0}function peg$parse_(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parsews();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsews()}if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos)}else{s0=s1}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}return s0}function peg$parsedigit(){var s0;if(peg$c38.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}return s0}function peg$parsehexDigit(){var s0;if(peg$c40.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}return s0}function peg$parsenumber(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===48){s1=peg$c42;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}if(s1===peg$FAILED){s1=peg$currPos;s2=peg$currPos;if(peg$c44.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}if(s3!==peg$FAILED){s4=[];s5=peg$parsedigit();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parsedigit()}if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2!==peg$FAILED){s1=input.substring(s1,peg$currPos)}else{s1=s2}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c46(s1)}s0=s1;return s0}function peg$parsequoteEscapedChar(){var s0,s1,s2;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===39){s2=peg$c47;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s2===peg$FAILED){if(peg$c49.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}}peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c51)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c52(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s1=peg$c47;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s1!==peg$FAILED){s2=peg$parseescape();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c53(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}return s0}function peg$parseapostrophe(){var s0;if(input.charCodeAt(peg$currPos)===39){s0=peg$c47;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}return s0}function peg$parseescape(){var s0;if(peg$c49.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50)}}if(s0===peg$FAILED){s0=peg$parseapostrophe()}return s0}function peg$parsechar(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===39){s1=peg$c47;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48)}}if(s1!==peg$FAILED){s2=peg$parseapostrophe();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c53(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}if(s0===peg$FAILED){if(peg$c54.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c55)}}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c56){s1=peg$c56;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c57)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c58()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c59){s1=peg$c59;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c61()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c62){s1=peg$c62;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c64()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c65){s1=peg$c65;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66)}}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c67()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c68){s1=peg$c68;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c69)}}if(s1!==peg$FAILED){s2=peg$currPos;s3=peg$currPos;s4=peg$parsehexDigit();if(s4!==peg$FAILED){s5=peg$parsehexDigit();if(s5!==peg$FAILED){s6=peg$parsehexDigit();if(s6!==peg$FAILED){s7=peg$parsehexDigit();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}}else{peg$currPos=s3;s3=peg$FAILED}if(s3!==peg$FAILED){s2=input.substring(s2,peg$currPos)}else{s2=s3}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c70(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}}}}}}return s0}function peg$parsechars(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsechar();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsechar()}}else{s1=peg$FAILED}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1)}s0=s1;return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail(peg$endExpectation())}throw peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}();/*
	Copyright (c) 2014, Yahoo! Inc. All rights reserved.
	Copyrights licensed under the New BSD License.
	See the accompanying LICENSE file for terms.
	*/var __extends=window&&window.__extends||function(){var _extendStatics=function extendStatics(d,b){_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p]}};return _extendStatics(d,b)};return function(d,b){_extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Compiler=/** @class */function(){function Compiler(locales,formats,formatters){this.locales=[];this.formats={number:{},date:{},time:{}};this.pluralNumberFormat=null;this.currentPlural=null;this.pluralStack=[];this.locales=locales;this.formats=formats;this.formatters=formatters}Compiler.prototype.compile=function(ast){this.pluralStack=[];this.currentPlural=null;this.pluralNumberFormat=null;return this.compileMessage(ast)};Compiler.prototype.compileMessage=function(ast){var _this=this;if(!(ast&&ast.type==="messageFormatPattern")){throw new Error("Message AST is not of type: \"messageFormatPattern\"")}var elements=ast.elements;var pattern=elements.filter(function(el){return el.type==="messageTextElement"||el.type==="argumentElement"}).map(function(el){return el.type==="messageTextElement"?_this.compileMessageText(el):_this.compileArgument(el)});if(pattern.length!==elements.length){throw new Error("Message element does not have a valid type")}return pattern};Compiler.prototype.compileMessageText=function(element){// When this `element` is part of plural sub-pattern and its value contains
// an unescaped '#', use a `PluralOffsetString` helper to properly output
// the number with the correct offset in the string.
if(this.currentPlural&&/(^|[^\\])#/g.test(element.value)){// Create a cache a NumberFormat instance that can be reused for any
// PluralOffsetString instance in this message.
if(!this.pluralNumberFormat){this.pluralNumberFormat=new Intl.NumberFormat(this.locales)}return new PluralOffsetString(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,element.value)}// Unescape the escaped '#'s in the message text.
return element.value.replace(/\\#/g,"#")};Compiler.prototype.compileArgument=function(element){var format=element.format,id=element.id;var formatters=this.formatters;if(!format){return new StringFormat(id)}var _a=this,formats=_a.formats,locales=_a.locales;switch(format.type){case"numberFormat":return{id:id,format:formatters.getNumberFormat(locales,formats.number[format.style]).format};case"dateFormat":return{id:id,format:formatters.getDateTimeFormat(locales,formats.date[format.style]).format};case"timeFormat":return{id:id,format:formatters.getDateTimeFormat(locales,formats.time[format.style]).format};case"pluralFormat":return new PluralFormat(id,format.offset,this.compileOptions(element),formatters.getPluralRules(locales,{type:format.ordinal?"ordinal":"cardinal"}));case"selectFormat":return new SelectFormat(id,this.compileOptions(element));default:throw new Error("Message element does not have a valid format type");}};Compiler.prototype.compileOptions=function(element){var _this=this;var format=element.format;var options=format.options;// Save the current plural element, if any, then set it to a new value when
// compiling the options sub-patterns. This conforms the spec's algorithm
// for handling `"#"` syntax in message text.
this.pluralStack.push(this.currentPlural);this.currentPlural=format.type==="pluralFormat"?element:null;var optionsHash=options.reduce(function(all,option){// Compile the sub-pattern and save it under the options's selector.
all[option.selector]=_this.compileMessage(option.value);return all},{});// Pop the plural stack to put back the original current plural value.
this.currentPlural=this.pluralStack.pop();return optionsHash};return Compiler}();// -- Compiler Helper Classes --------------------------------------------------
var Formatter=/** @class */function(){function Formatter(id){this.id=id}return Formatter}();var StringFormat=/** @class */function(_super){__extends(StringFormat,_super);function StringFormat(){return _super!==null&&_super.apply(this,arguments)||this}StringFormat.prototype.format=function(value){if(!value&&typeof value!=="number"){return""}return typeof value==="string"?value:String(value)};return StringFormat}(Formatter);var PluralFormat=/** @class */function(){function PluralFormat(id,offset,options,pluralRules){this.id=id;this.offset=offset;this.options=options;this.pluralRules=pluralRules}PluralFormat.prototype.getOption=function(value){var options=this.options;var option=options["="+value]||options[this.pluralRules.select(value-this.offset)];return option||options.other};return PluralFormat}();var PluralOffsetString=/** @class */function(_super){__extends(PluralOffsetString,_super);function PluralOffsetString(id,offset,numberFormat,string){var _this=_super.call(this,id)||this;_this.offset=offset;_this.numberFormat=numberFormat;_this.string=string;return _this}PluralOffsetString.prototype.format=function(value){var number=this.numberFormat.format(value-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+number).replace(/\\#/g,"#")};return PluralOffsetString}(Formatter);var SelectFormat=/** @class */function(){function SelectFormat(id,options){this.id=id;this.options=options}SelectFormat.prototype.getOption=function(value){var options=this.options;return options[value]||options.other};return SelectFormat}();function isSelectOrPluralFormat(f){return!!f.options}/*
	Copyright (c) 2014, Yahoo! Inc. All rights reserved.
	Copyrights licensed under the New BSD License.
	See the accompanying LICENSE file for terms.
	*/var __extends$1=window&&window.__extends||function(){var _extendStatics2=function extendStatics(d,b){_extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b){if(b.hasOwnProperty(p))d[p]=b[p]}};return _extendStatics2(d,b)};return function(d,b){_extendStatics2(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __assign=window&&window.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return __assign.apply(this,arguments)};// -- MessageFormat --------------------------------------------------------
function resolveLocale(locales){if(typeof locales==="string"){locales=[locales]}try{return Intl.NumberFormat.supportedLocalesOf(locales,{// IE11 localeMatcher `lookup` seems to convert `en` -> `en-US`
// but not other browsers,
localeMatcher:"best fit"})[0]}catch(e){return IntlMessageFormat.defaultLocale}}function formatPatterns(pattern,values){var result="";for(var _i=0,pattern_1=pattern;_i<pattern_1.length;_i++){var part=pattern_1[_i];// Exist early for string parts.
if(typeof part==="string"){result+=part;continue}var id=part.id;// Enforce that all required values are provided by the caller.
if(!(values&&id in values)){throw new FormatError("A value must be provided for: "+id,id)}var value=values[id];// Recursively format plural and select parts' option  which can be a
// nested pattern structure. The choosing of the option to use is
// abstracted-by and delegated-to the part helper object.
if(isSelectOrPluralFormat(part)){result+=formatPatterns(part.getOption(value),values)}else{result+=part.format(value)}}return result}function mergeConfig(c1,c2){if(!c2){return c1}return __assign({},c1||{},c2||{},Object.keys(c1).reduce(function(all,k){all[k]=__assign({},c1[k],c2[k]||{});return all},{}))}function mergeConfigs(defaultConfig,configs){if(!configs){return defaultConfig}return Object.keys(defaultConfig).reduce(function(all,k){all[k]=mergeConfig(defaultConfig[k],configs[k]);return all},__assign({},defaultConfig))}var FormatError=/** @class */function(_super){__extends$1(FormatError,_super);function FormatError(msg,variableId){var _this=_super.call(this,msg)||this;_this.variableId=variableId;return _this}return FormatError}(Error);function createDefaultFormatters(){return{getNumberFormat:function getNumberFormat(){var _a;var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return new((_a=Intl.NumberFormat).bind.apply(_a,[void 0].concat(args)))},getDateTimeFormat:function getDateTimeFormat(){var _a;var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return new((_a=Intl.DateTimeFormat).bind.apply(_a,[void 0].concat(args)))},getPluralRules:function getPluralRules(){var _a;var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return new((_a=Intl.PluralRules).bind.apply(_a,[void 0].concat(args)))}}}var IntlMessageFormat=/** @class */function(){function IntlMessageFormat(message,locales,overrideFormats,opts){var _this=this;if(locales===void 0){locales=IntlMessageFormat.defaultLocale}this.format=function(values){try{return formatPatterns(_this.pattern,values)}catch(e){if(e.variableId){throw new Error("The intl string context variable '"+e.variableId+"' was not provided to the string '"+_this.message+"'")}else{throw e}}};if(typeof message==="string"){if(!IntlMessageFormat.__parse){throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`")}// Parse string messages into an AST.
this.ast=IntlMessageFormat.__parse(message)}else{this.ast=message}this.message=message;if(!(this.ast&&this.ast.type==="messageFormatPattern")){throw new TypeError("A message must be provided as a String or AST.")}// Creates a new object with the specified `formats` merged with the default
// formats.
var formats=mergeConfigs(IntlMessageFormat.formats,overrideFormats);// Defined first because it's used to build the format pattern.
this.locale=resolveLocale(locales||[]);var formatters=opts&&opts.formatters||createDefaultFormatters();// Compile the `ast` to a pattern that is highly optimized for repeated
// `format()` invocations. **Note:** This passes the `locales` set provided
// to the constructor instead of just the resolved locale.
this.pattern=new Compiler(locales,formats,formatters).compile(this.ast);// "Bind" `format()` method to `this` so it can be passed by reference like
// the other `Intl` APIs.
}IntlMessageFormat.prototype.resolvedOptions=function(){return{locale:this.locale}};IntlMessageFormat.prototype.getAst=function(){return this.ast};IntlMessageFormat.defaultLocale="en";IntlMessageFormat.__parse=undefined;// Default format options used as the prototype of the `formats` provided to the
// constructor. These are used when constructing the internal Intl.NumberFormat
// and Intl.DateTimeFormat instances.
IntlMessageFormat.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}};return IntlMessageFormat}();/*
	Copyright (c) 2014, Yahoo! Inc. All rights reserved.
	Copyrights licensed under the New BSD License.
	See the accompanying LICENSE file for terms.
	*/IntlMessageFormat.__parse=parser.parse;var microMemoize=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){/**
	   * @constant DEFAULT_OPTIONS_KEYS the default options keys
	   */var DEFAULT_OPTIONS_KEYS={isEqual:true,isMatchingKey:true,isPromise:true,maxSize:true,onCacheAdd:true,onCacheChange:true,onCacheHit:true,transformKey:true};/**
	   * @function slice
	   *
	   * @description
	   * slice.call() pre-bound
	   */var slice=Array.prototype.slice;/**
	   * @function cloneArray
	   *
	   * @description
	   * clone the array-like object and return the new array
	   *
	   * @param arrayLike the array-like object to clone
	   * @returns the clone as an array
	   */function cloneArray(arrayLike){var length=arrayLike.length;if(!length){return[]}if(length===1){return[arrayLike[0]]}if(length===2){return[arrayLike[0],arrayLike[1]]}if(length===3){return[arrayLike[0],arrayLike[1],arrayLike[2]]}return slice.call(arrayLike,0)}/**
	   * @function getCustomOptions
	   *
	   * @description
	   * get the custom options on the object passed
	   *
	   * @param options the memoization options passed
	   * @returns the custom options passed
	   */function getCustomOptions(options){var customOptions={};/* eslint-disable no-restricted-syntax */for(var key in options){if(!DEFAULT_OPTIONS_KEYS[key]){customOptions[key]=options[key]}}/* eslint-enable */return customOptions}/**
	   * @function isMemoized
	   *
	   * @description
	   * is the function passed already memoized
	   *
	   * @param fn the function to test
	   * @returns is the function already memoized
	   */function isMemoized(fn){return typeof fn==="function"&&fn.isMemoized}/**
	   * @function isSameValueZero
	   *
	   * @description
	   * are the objects equal based on SameValueZero equality
	   *
	   * @param object1 the first object to compare
	   * @param object2 the second object to compare
	   * @returns are the two objects equal
	   */function isSameValueZero(object1,object2){// eslint-disable-next-line no-self-compare
return object1===object2||object1!==object1&&object2!==object2}/**
	   * @function mergeOptions
	   *
	   * @description
	   * merge the options into the target
	   *
	   * @param existingOptions the options provided
	   * @param newOptions the options to include
	   * @returns the merged options
	   */function mergeOptions(existingOptions,newOptions){// @ts-ignore
var target={};/* eslint-disable no-restricted-syntax */for(var key in existingOptions){target[key]=existingOptions[key]}for(var key in newOptions){target[key]=newOptions[key]}/* eslint-enable */return target}// utils
var Cache=/** @class */function(){function Cache(options){this.keys=[];this.values=[];this.options=options;var isMatchingKeyFunction=typeof options.isMatchingKey==="function";if(isMatchingKeyFunction){this.getKeyIndex=this._getKeyIndexFromMatchingKey}else if(options.maxSize>1){this.getKeyIndex=this._getKeyIndexForMany}else{this.getKeyIndex=this._getKeyIndexForSingle}this.canTransformKey=typeof options.transformKey==="function";this.shouldCloneArguments=this.canTransformKey||isMatchingKeyFunction;this.shouldUpdateOnAdd=typeof options.onCacheAdd==="function";this.shouldUpdateOnChange=typeof options.onCacheChange==="function";this.shouldUpdateOnHit=typeof options.onCacheHit==="function"}Object.defineProperty(Cache.prototype,"size",{get:function get(){return this.keys.length},enumerable:true,configurable:true});Object.defineProperty(Cache.prototype,"snapshot",{get:function get(){return{keys:cloneArray(this.keys),size:this.size,values:cloneArray(this.values)}},enumerable:true,configurable:true});/**
	       * @function _getKeyIndexFromMatchingKey
	       *
	       * @description
	       * gets the matching key index when a custom key matcher is used
	       *
	       * @param keyToMatch the key to match
	       * @returns the index of the matching key, or -1
	       */Cache.prototype._getKeyIndexFromMatchingKey=function(keyToMatch){var _a=this.options,isMatchingKey=_a.isMatchingKey,maxSize=_a.maxSize;var keys=this.keys;var keysLength=keys.length;if(!keysLength){return-1}if(isMatchingKey(keys[0],keyToMatch)){return 0}if(maxSize>1){for(var index=1;index<keysLength;index++){if(isMatchingKey(keys[index],keyToMatch)){return index}}}return-1};/**
	       * @function _getKeyIndexForMany
	       *
	       * @description
	       * gets the matching key index when multiple keys are used
	       *
	       * @param keyToMatch the key to match
	       * @returns the index of the matching key, or -1
	       */Cache.prototype._getKeyIndexForMany=function(keyToMatch){var isEqual=this.options.isEqual;var keys=this.keys;var keysLength=keys.length;if(!keysLength){return-1}if(keysLength===1){return this._getKeyIndexForSingle(keyToMatch)}var keyLength=keyToMatch.length;var existingKey;var argIndex;if(keyLength>1){for(var index=0;index<keysLength;index++){existingKey=keys[index];if(existingKey.length===keyLength){argIndex=0;for(;argIndex<keyLength;argIndex++){if(!isEqual(existingKey[argIndex],keyToMatch[argIndex])){break}}if(argIndex===keyLength){return index}}}}else{for(var index=0;index<keysLength;index++){existingKey=keys[index];if(existingKey.length===keyLength&&isEqual(existingKey[0],keyToMatch[0])){return index}}}return-1};/**
	       * @function _getKeyIndexForSingle
	       *
	       * @description
	       * gets the matching key index when a single key is used
	       *
	       * @param keyToMatch the key to match
	       * @returns the index of the matching key, or -1
	       */Cache.prototype._getKeyIndexForSingle=function(keyToMatch){var keys=this.keys;if(!keys.length){return-1}var existingKey=keys[0];var length=existingKey.length;if(keyToMatch.length!==length){return-1}var isEqual=this.options.isEqual;if(length>1){for(var index=0;index<length;index++){if(!isEqual(existingKey[index],keyToMatch[index])){return-1}}return 0}return isEqual(existingKey[0],keyToMatch[0])?0:-1};/**
	       * @function orderByLru
	       *
	       * @description
	       * order the array based on a Least-Recently-Used basis
	       *
	       * @param key the new key to move to the front
	       * @param value the new value to move to the front
	       * @param startingIndex the index of the item to move to the front
	       */Cache.prototype.orderByLru=function(key,value,startingIndex){var keys=this.keys;var values=this.values;var currentLength=keys.length;var index=startingIndex;while(index--){keys[index+1]=keys[index];values[index+1]=values[index]}keys[0]=key;values[0]=value;var maxSize=this.options.maxSize;if(currentLength===maxSize&&startingIndex===currentLength){keys.pop();values.pop()}else if(startingIndex>=maxSize){// eslint-disable-next-line no-multi-assign
keys.length=values.length=maxSize}};/**
	       * @function updateAsyncCache
	       *
	       * @description
	       * update the promise method to auto-remove from cache if rejected, and
	       * if resolved then fire cache hit / changed
	       *
	       * @param memoized the memoized function
	       */Cache.prototype.updateAsyncCache=function(memoized){var _this=this;var _a=this.options,onCacheChange=_a.onCacheChange,onCacheHit=_a.onCacheHit;var firstKey=this.keys[0];var firstValue=this.values[0];this.values[0]=firstValue.then(function(value){if(_this.shouldUpdateOnHit){onCacheHit(_this,_this.options,memoized)}if(_this.shouldUpdateOnChange){onCacheChange(_this,_this.options,memoized)}return value},function(error){var keyIndex=_this.getKeyIndex(firstKey);if(keyIndex!==-1){_this.keys.splice(keyIndex,1);_this.values.splice(keyIndex,1)}throw error})};return Cache}();// cache
function createMemoizedFunction(fn,options){if(options===void 0){options={}}if(isMemoized(fn)){return createMemoizedFunction(fn.fn,mergeOptions(fn.options,options))}if(typeof fn!=="function"){throw new TypeError("You must pass a function to `memoize`.")}var _a=options.isEqual,isEqual=_a===void 0?isSameValueZero:_a,isMatchingKey=options.isMatchingKey,_b=options.isPromise,isPromise=_b===void 0?false:_b,_c=options.maxSize,maxSize=_c===void 0?1:_c,onCacheAdd=options.onCacheAdd,onCacheChange=options.onCacheChange,onCacheHit=options.onCacheHit,transformKey=options.transformKey;var normalizedOptions=mergeOptions({isEqual:isEqual,isMatchingKey:isMatchingKey,isPromise:isPromise,maxSize:maxSize,onCacheAdd:onCacheAdd,onCacheChange:onCacheChange,onCacheHit:onCacheHit,transformKey:transformKey},getCustomOptions(options));var cache=new Cache(normalizedOptions);var keys=cache.keys,values=cache.values,canTransformKey=cache.canTransformKey,shouldCloneArguments=cache.shouldCloneArguments,shouldUpdateOnAdd=cache.shouldUpdateOnAdd,shouldUpdateOnChange=cache.shouldUpdateOnChange,shouldUpdateOnHit=cache.shouldUpdateOnHit;// @ts-ignore
var memoized=function memoized(){// @ts-ignore
var key=shouldCloneArguments?cloneArray(arguments):arguments;if(canTransformKey){key=transformKey(key)}var keyIndex=keys.length?cache.getKeyIndex(key):-1;if(keyIndex!==-1){if(shouldUpdateOnHit){onCacheHit(cache,normalizedOptions,memoized)}if(keyIndex){cache.orderByLru(keys[keyIndex],values[keyIndex],keyIndex);if(shouldUpdateOnChange){onCacheChange(cache,normalizedOptions,memoized)}}}else{var newValue=fn.apply(this,arguments);var newKey=shouldCloneArguments?key:cloneArray(arguments);cache.orderByLru(newKey,newValue,keys.length);if(isPromise){cache.updateAsyncCache(memoized)}if(shouldUpdateOnAdd){onCacheAdd(cache,normalizedOptions,memoized)}if(shouldUpdateOnChange){onCacheChange(cache,normalizedOptions,memoized)}}return values[0]};memoized.cache=cache;memoized.fn=fn;memoized.isMemoized=true;memoized.options=normalizedOptions;return memoized}return createMemoizedFunction})});var capital=function capital(str){return str.replace(/(^|\s)\S/,function(l){return l.toUpperCase()})};var title=function title(str){return str.replace(/(^|\s)\S/g,function(l){return l.toUpperCase()})};var upper=function upper(str){return str.toLocaleUpperCase()};var lower=function lower(str){return str.toLocaleLowerCase()};var getClientLocale=function getClientLocale(){var _ref3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},navigator=_ref3.navigator,hash=_ref3.hash,search=_ref3.search,fallback=_ref3.fallback;var locale;var getFromURL=function getFromURL(urlPart,key){var keyVal=urlPart.substr(1).split("&").find(function(i){return i.indexOf(key)===0});if(keyVal){return keyVal.split("=").pop()}};// istanbul ignore else
if(typeof window!=="undefined"){if(navigator){// istanbul ignore next
locale=window.navigator.language||window.navigator.languages[0]}if(search){locale=getFromURL(window.location.search,search)}if(hash){locale=getFromURL(window.location.hash,hash)}}return locale||fallback};var currentLocale;var currentDictionary;var getAvailableLocale=function getAvailableLocale(newLocale){if(currentDictionary[newLocale])return newLocale;// istanbul ignore else
if(typeof newLocale==="string"){var fallbackLocale=newLocale.split("-").shift();if(currentDictionary[fallbackLocale]){return fallbackLocale}}return null};var getMessageFormatter=microMemoize(function(message,locale,formats){return new IntlMessageFormat(message,locale,formats)});var lookupMessage=microMemoize(function(path,locale){return currentDictionary[locale][path]||objectResolvePath(currentDictionary[locale],path)});var formatMessage=function formatMessage(message,interpolations){var locale=arguments.length>2&&arguments[2]!==undefined?arguments[2]:currentLocale;return getMessageFormatter(message,locale).format(interpolations)};var getLocalizedMessage=function getLocalizedMessage(path,interpolations){var locale=arguments.length>2&&arguments[2]!==undefined?arguments[2]:currentLocale;if(typeof interpolations==="string"){locale=interpolations;interpolations=undefined}var message=lookupMessage(path,locale);if(!message)return path;if(!interpolations)return message;return getMessageFormatter(message,locale).format(interpolations)};getLocalizedMessage.time=function(t){var format=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"short";var locale=arguments.length>2?arguments[2]:undefined;return formatMessage("{t,time,".concat(format,"}"),{t:t},locale)};getLocalizedMessage.date=function(d){var format=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"short";var locale=arguments.length>2?arguments[2]:undefined;return formatMessage("{d,date,".concat(format,"}"),{d:d},locale)};getLocalizedMessage.number=function(n,locale){return formatMessage("{n,number}",{n:n},locale)};getLocalizedMessage.capital=function(path,interpolations,locale){return capital(getLocalizedMessage(path,interpolations,locale))};getLocalizedMessage.title=function(path,interpolations,locale){return title(getLocalizedMessage(path,interpolations,locale))};getLocalizedMessage.upper=function(path,interpolations,locale){return upper(getLocalizedMessage(path,interpolations,locale))};getLocalizedMessage.lower=function(path,interpolations,locale){return lower(getLocalizedMessage(path,interpolations,locale))};var dictionary=writable({});dictionary.subscribe(function(newDictionary){currentDictionary=newDictionary});var locale=writable({});var localeSet=locale.set;locale.set=function(newLocale){var availableLocale=getAvailableLocale(newLocale);if(availableLocale){return localeSet(availableLocale)}console.warn("[svelte-i18n] Locale \"".concat(newLocale,"\" not found."));return localeSet(newLocale)};locale.update=function(fn){return localeSet(fn(currentLocale))};locale.subscribe(function(newLocale){currentLocale=newLocale});var format=derived([locale,dictionary],function(){return getLocalizedMessage});function cubicOut(t){var f=t-1;return f*f*f+1}function quintIn(t){return t*t*t*t*t}function fly(node,_ref4){var _ref4$delay=_ref4.delay,delay=_ref4$delay===void 0?0:_ref4$delay,_ref4$duration=_ref4.duration,duration=_ref4$duration===void 0?400:_ref4$duration,_ref4$easing=_ref4.easing,easing=_ref4$easing===void 0?cubicOut:_ref4$easing,_ref4$x=_ref4.x,x=_ref4$x===void 0?0:_ref4$x,_ref4$y=_ref4.y,y=_ref4$y===void 0?0:_ref4$y,_ref4$opacity=_ref4.opacity,opacity=_ref4$opacity===void 0?0:_ref4$opacity;var style=getComputedStyle(node);var target_opacity=+style.opacity;var transform=style.transform==="none"?"":style.transform;var od=target_opacity*(1-opacity);return{delay:delay,duration:duration,easing:easing,css:function css(t,u){return"\n\t\t\ttransform: ".concat(transform," translate(").concat((1-t)*x,"px, ").concat((1-t)*y,"px);\n\t\t\topacity: ").concat(target_opacity-od*u)}}}function flip(node,animation,params){var style=getComputedStyle(node);var transform=style.transform==="none"?"":style.transform;var dx=animation.from.left-animation.to.left;var dy=animation.from.top-animation.to.top;var d=Math.sqrt(dx*dx+dy*dy);var _params$delay=params.delay,delay=_params$delay===void 0?0:_params$delay,_params$duration=params.duration,duration=_params$duration===void 0?function(d){return Math.sqrt(d)*120}:_params$duration,_params$easing=params.easing,easing=_params$easing===void 0?cubicOut:_params$easing;return{delay:delay,duration:is_function(duration)?duration(d):duration,easing:easing,css:function css(_t,u){return"transform: ".concat(transform," translate(").concat(u*dx,"px, ").concat(u*dy,"px);")}}}/**
	 * lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="npm" -o ./`
	 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */ /** Used as the `TypeError` message for "Functions" methods. */var FUNC_ERROR_TEXT="Expected a function";/** Used as references for various `Number` constants. */var NAN=0/0;/** `Object#toString` result references. */var symbolTag="[object Symbol]";/** Used to match leading and trailing whitespace. */var reTrim=/^\s+|\s+$/g;/** Used to detect bad signed hexadecimal string values. */var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;/** Used to detect binary string values. */var reIsBinary=/^0b[01]+$/i;/** Used to detect octal string values. */var reIsOctal=/^0o[0-7]+$/i;/** Built-in method references without a dependency on `root`. */var freeParseInt=parseInt;/** Detect free variable `global` from Node.js. */var freeGlobal=_typeof(commonjsGlobal)=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;/** Detect free variable `self`. */var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;/** Used as a reference to the global object. */var root=freeGlobal||freeSelf||Function("return this")();/** Used for built-in method references. */var objectProto=Object.prototype;/**
	 * Used to resolve the
	 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
	 * of values.
	 */var objectToString=objectProto.toString;/* Built-in method references for those with the same name as other `lodash` methods. */var nativeMax=Math.max,nativeMin=Math.min;/**
	 * Gets the timestamp of the number of milliseconds that have elapsed since
	 * the Unix epoch (1 January 1970 00:00:00 UTC).
	 *
	 * @static
	 * @memberOf _
	 * @since 2.4.0
	 * @category Date
	 * @returns {number} Returns the timestamp.
	 * @example
	 *
	 * _.defer(function(stamp) {
	 *   console.log(_.now() - stamp);
	 * }, _.now());
	 * // => Logs the number of milliseconds it took for the deferred invocation.
	 */var now$1=function now$1(){return root.Date.now()};/**
	 * Creates a debounced function that delays invoking `func` until after `wait`
	 * milliseconds have elapsed since the last time the debounced function was
	 * invoked. The debounced function comes with a `cancel` method to cancel
	 * delayed `func` invocations and a `flush` method to immediately invoke them.
	 * Provide `options` to indicate whether `func` should be invoked on the
	 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
	 * with the last arguments provided to the debounced function. Subsequent
	 * calls to the debounced function return the result of the last `func`
	 * invocation.
	 *
	 * **Note:** If `leading` and `trailing` options are `true`, `func` is
	 * invoked on the trailing edge of the timeout only if the debounced function
	 * is invoked more than once during the `wait` timeout.
	 *
	 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
	 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
	 *
	 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
	 * for details over the differences between `_.debounce` and `_.throttle`.
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Function
	 * @param {Function} func The function to debounce.
	 * @param {number} [wait=0] The number of milliseconds to delay.
	 * @param {Object} [options={}] The options object.
	 * @param {boolean} [options.leading=false]
	 *  Specify invoking on the leading edge of the timeout.
	 * @param {number} [options.maxWait]
	 *  The maximum time `func` is allowed to be delayed before it's invoked.
	 * @param {boolean} [options.trailing=true]
	 *  Specify invoking on the trailing edge of the timeout.
	 * @returns {Function} Returns the new debounced function.
	 * @example
	 *
	 * // Avoid costly calculations while the window size is in flux.
	 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
	 *
	 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
	 * jQuery(element).on('click', _.debounce(sendMail, 300, {
	 *   'leading': true,
	 *   'trailing': false
	 * }));
	 *
	 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
	 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
	 * var source = new EventSource('/stream');
	 * jQuery(source).on('message', debounced);
	 *
	 * // Cancel the trailing debounced invocation.
	 * jQuery(window).on('popstate', debounced.cancel);
	 */function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject$1(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){// Reset any `maxWait` timer.
lastInvokeTime=time;// Start the timer for the trailing edge.
timerId=setTimeout(timerExpired,wait);// Invoke the leading edge.
return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;// Either this is the first call, activity has stopped and we're at the
// trailing edge, the system time has gone backwards and we're treating
// it as the trailing edge, or we've hit the `maxWait` limit.
return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now$1();if(shouldInvoke(time)){return trailingEdge(time)}// Restart the timer.
timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;// Only invoke if we have `lastArgs` which means `func` has been
// debounced at least once.
if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now$1())}function debounced(){var time=now$1(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){// Handle invocations in a tight loop.
timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}/**
	 * Checks if `value` is the
	 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
	 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
	 * @example
	 *
	 * _.isObject({});
	 * // => true
	 *
	 * _.isObject([1, 2, 3]);
	 * // => true
	 *
	 * _.isObject(_.noop);
	 * // => true
	 *
	 * _.isObject(null);
	 * // => false
	 */function isObject$1(value){var type=_typeof(value);return!!value&&(type=="object"||type=="function")}/**
	 * Checks if `value` is object-like. A value is object-like if it's not `null`
	 * and has a `typeof` result of "object".
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
	 * @example
	 *
	 * _.isObjectLike({});
	 * // => true
	 *
	 * _.isObjectLike([1, 2, 3]);
	 * // => true
	 *
	 * _.isObjectLike(_.noop);
	 * // => false
	 *
	 * _.isObjectLike(null);
	 * // => false
	 */function isObjectLike(value){return!!value&&_typeof(value)=="object"}/**
	 * Checks if `value` is classified as a `Symbol` primitive or object.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
	 * @example
	 *
	 * _.isSymbol(Symbol.iterator);
	 * // => true
	 *
	 * _.isSymbol('abc');
	 * // => false
	 */function isSymbol(value){return _typeof(value)=="symbol"||isObjectLike(value)&&objectToString.call(value)==symbolTag}/**
	 * Converts `value` to a number.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to process.
	 * @returns {number} Returns the number.
	 * @example
	 *
	 * _.toNumber(3.2);
	 * // => 3.2
	 *
	 * _.toNumber(Number.MIN_VALUE);
	 * // => 5e-324
	 *
	 * _.toNumber(Infinity);
	 * // => Infinity
	 *
	 * _.toNumber('3.2');
	 * // => 3.2
	 */function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject$1(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject$1(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var lodash_debounce=debounce;function argsEqual(args1,args2){return JSON.stringify(args1)===JSON.stringify(args2)}function timeString(time){var seconds=Math.floor(time/1000);var formattedSeconds=seconds<0?0:seconds;return formattedSeconds>=60?"".concat(Math.floor(formattedSeconds/60)," min"):"".concat(formattedSeconds," sec")}function formatTime(number){var time=new Date(number);return time.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true})}// will update object(merge new data) in list if it passes predicate, otherwise adds new object
function replaceOrAdd(list,predicate,data){var clone=_toConsumableArray(list);var index=clone.findIndex(predicate);if(index!==-1){var startTime=clone[index].startTime;var serverStartTime=data.startTime;clone[index]=_objectSpread({},data,{startTime:startTime||serverStartTime});return clone}return[].concat(_toConsumableArray(list),[data])}function extractMessageFromError(error){if(!error.stack||!error.message){return{eventCode:"txError",errorMsg:"An unknown error occured"}}var message=error.stack||error.message;if(message.includes("User denied transaction signature")){return{eventCode:"txSendFail",errorMsg:"User denied transaction signature"}}if(message.includes("transaction underpriced")){return{eventCode:"txUnderpriced",errorMsg:"Transaction is under priced"}}return{eventCode:"txError",errorMsg:message}}function createEmitter(){return{listeners:{},on:function on(eventCode,listener){// check if valid eventCode
switch(eventCode){case"txSent":case"txPool":case"txConfirmed":case"txSpeedUp":case"txCancel":case"txFailed":case"txRequest":case"nsfFail":case"txRepeat":case"txAwaitingApproval":case"txConfirmReminder":case"txSendFail":case"txError":case"txUnderPriced":case"all":break;default:throw new Error("".concat(eventCode," is not a valid event code, for a list of valid event codes see: https://github.com/blocknative/notify"));}// check that listener is a function
if(typeof listener!=="function"){throw new Error("Listener must be a function")}// add listener for the eventCode
this.listeners[eventCode]=listener},emit:function emit(state){if(this.listeners[state.eventCode||""]){return this.listeners[state.eventCode||""](state)}if(this.listeners.all){return this.listeners.all(state)}}}}var defaultNotifyMessages={en:{transaction:{txRequest:"Your transaction is waiting for you to confirm",nsfFail:"You have insufficient funds to complete this transaction",txUnderpriced:"The gas price for your transaction is too low, try again with a higher gas price",txRepeat:"This could be a repeat transaction",txAwaitingApproval:"You have a previous transaction waiting for you to confirm",txConfirmReminder:"Please confirm your transaction to continue, the transaction window may be behind your browser",txSendFail:"You rejected the transaction",txSent:"Your transaction has been sent to the network",txStallPending:"Your transaction has stalled and has not entered the transaction pool",txPool:"Your transaction has started",txStallConfirmed:"Your transaction has stalled and hasn't been confirmed",txSpeedUp:"Your transaction has been sped up",txCancel:"Your transaction is being canceled",txFailed:"Your transaction has failed",txConfirmed:"Your transaction has succeeded",txError:"Oops something went wrong, please try again"},watched:{txPool:"Your account is {verb} {formattedValue} {asset} {preposition} {counterpartyShortened}",txSpeedUp:"Your account is {verb} {formattedValue} {asset} {preposition} {counterpartyShortened}",txCancel:"Your account is {verb} {formattedValue} {asset} {preposition} {counterpartyShortened}",txConfirmed:"Your account successfully {verb} {formattedValue} {asset} {preposition} {counterpartyShortened}",txFailed:"Your account failed to {verb} {formattedValue} {asset} {preposition} {counterpartyShortened}"}},es:{transaction:{txRequest:"Su transacci\xF3n est\xE1 esperando que confirme",nsfFail:"No tiene fondos suficientes para completar esta transacci\xF3n.",txUnderpriced:"El precio del gas para su transacci\xF3n es demasiado bajo, intente nuevamente con un precio del gas m\xE1s alto",txRepeat:"Esto podr\xEDa ser una transacci\xF3n repetida",txAwaitingApproval:"Tienes una transacci\xF3n anterior esperando que confirmes",txConfirmReminder:"Confirme su transacci\xF3n para continuar, la ventana de transacci\xF3n puede estar detr\xE1s de su navegador",txSendFail:"Rechazaste la transacci\xF3n",txSent:"Su transacci\xF3n ha sido enviada a la red.",txStallPending:"Su transacci\xF3n se ha estancado y no ha ingresado al grupo de transacciones",txPool:"Su transacci\xF3n ha comenzado",txStallConfirmed:"Su transacci\xF3n se ha estancado y no ha sido confirmada.",txSpeedUp:"Su transacci\xF3n ha sido acelerada",txCancel:"Tu transacci\xF3n est\xE1 siendo cancelada",txFailed:"Su transacci\xF3n ha fallado",txConfirmed:"Su transacci\xF3n ha tenido \xE9xito.",txError:"Vaya, algo sali\xF3 mal, por favor intente nuevamente"},watched:{txPool:"su cuenta est\xE1 {verb, select, receiving {recibiendo} sending {enviando}} {formattedValue} {asset} {preposition, select, from {desde} to {a}} {counterpartyShortened}",txSpeedUp:"su cuenta est\xE1 {verb, select, receiving {recibiendo} sending {enviando}} {formattedValue} {asset} {preposition, select, from {desde} to {a}} {counterpartyShortened}",txCancel:"su cuenta est\xE1 {verb, select, receiving {recibiendo} sending {enviando}} {formattedValue} {asset} {preposition, select, from {desde} to {a}} {counterpartyShortened}",txConfirmed:"su cuenta {verb, select, received {recibi\xF3} sent {ha enviado}} con \xE9xito {formattedValue} {asset} {preposition, select, from {de} to {a}} {counterpartyShortened}",txFailed:"su cuenta fallado {verb, select, received {recibi\xF3} sent {ha enviado}} con \xE9xito {formattedValue} {asset} {preposition, select, from {de} to {a}} {counterpartyShortened}"}}};var app=writable({version:"",dappId:"",networkId:1,nodeSynced:true,mobilePosition:"top",desktopPosition:"bottomRight",darkMode:false,txApproveReminderTimeout:20000,txStallPendingTimeout:20000,txStallConfirmedTimeout:90000,clientLocale:"en",notifyMessages:defaultNotifyMessages});var transactions=createTransactionStore([]);var notifications=createNotificationStore([]);function createTransactionStore(initialState){var _writable=writable(initialState),subscribe=_writable.subscribe,update=_writable.update;function updateQueue(transaction){var predicate=function predicate(tx){return tx.id===transaction.id};update(function(store){return replaceOrAdd(store,predicate,transaction)})}function add(transaction){update(function(store){return[].concat(_toConsumableArray(store),[transaction])})}return{subscribe:subscribe,updateQueue:updateQueue,add:add}}function createNotificationStore(initialState){var _writable2=writable(initialState),subscribe=_writable2.subscribe,update=_writable2.update;function add(notification){update(function(store){var existingNotification=store.find(function(n){return n.id===notification.id});// if notification is a hint type or there are no existing notifications with same id, then just add it.
if(notification.type==="hint"||!existingNotification){return[].concat(_toConsumableArray(store),[notification])}// otherwise filter out all notifications with the same id and then add the new notification
return[].concat(_toConsumableArray(store.filter(function(n){return n.id!==notification.id})),[notification])})}function remove(id,eventCode){update(function(store){return store.filter(function(n){return n.id!==id||n.eventCode!==eventCode})})}return{subscribe:subscribe,add:add,remove:remove,update:update}}/* src/components/CloseIcon.svelte generated by Svelte v3.12.1 */function add_css(){var style=element("style");style.id="svelte-r8gx3p-style";style.textContent="div.svelte-r8gx3p{display:flex;justify-content:center;align-items:center;font-size:inherit;font-family:inherit;padding:0.3em;border-radius:40px;transition:background 150ms ease-in-out}div.svelte-r8gx3p:hover{background:#eeeeee;cursor:pointer}.bn-notify-dark-mode-close-background.svelte-r8gx3p:hover{background:#00222c}";append(document.head,style)}function create_fragment(ctx){var div,svg,g,path0,path1,g_stroke_value,dispose;return{c:function c(){div=element("div");svg=svg_element("svg");g=svg_element("g");path0=svg_element("path");path1=svg_element("path");attr(path0,"d","m.1.1 7.82304289 7.82304289");attr(path1,"d","m.1.1 7.82304289 7.82304289");attr(path1,"transform","matrix(-1 0 0 1 8 0)");attr(g,"fill","none");attr(g,"stroke",g_stroke_value=ctx.hovered?ctx.$app.darkMode?"#ffffff":"#4a4a4a":"#9B9B9B");attr(g,"stroke-linecap","square");attr(g,"stroke-width","2");set_style(g,"transition","stroke 150ms ease-in-out");attr(g,"transform","translate(2 2)");attr(svg,"height","8");attr(svg,"viewBox","0 0 12 12");attr(svg,"width","8");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(div,"class","bn-notify-custom bn-notify-notification-close-icon svelte-r8gx3p");toggle_class(div,"bn-notify-dark-mode-close-background",ctx.$app.darkMode);dispose=[listen(div,"mouseenter",ctx.mouseenter_handler),listen(div,"mouseleave",ctx.mouseleave_handler)]},m:function m(target,anchor){insert(target,div,anchor);append(div,svg);append(svg,g);append(g,path0);append(g,path1)},p:function p(changed,ctx){if((changed.hovered||changed.$app)&&g_stroke_value!==(g_stroke_value=ctx.hovered?ctx.$app.darkMode?"#ffffff":"#4a4a4a":"#9B9B9B")){attr(g,"stroke",g_stroke_value)}if(changed.$app){toggle_class(div,"bn-notify-dark-mode-close-background",ctx.$app.darkMode)}},i:noop,o:noop,d:function d(detaching){if(detaching){detach(div)}run_all(dispose)}}}function instance($$self,$$props,$$invalidate){var $app;component_subscribe($$self,app,function($$value){$app=$$value;$$invalidate("$app",$app)});var hovered;var mouseenter_handler=function mouseenter_handler(){return $$invalidate("hovered",hovered=true)};var mouseleave_handler=function mouseleave_handler(){return $$invalidate("hovered",hovered=false)};return{hovered:hovered,$app:$app,mouseenter_handler:mouseenter_handler,mouseleave_handler:mouseleave_handler}}var CloseIcon=/*#__PURE__*/function(_SvelteComponent){_inherits(CloseIcon,_SvelteComponent);function CloseIcon(options){var _this2;_classCallCheck(this,CloseIcon);_this2=_possibleConstructorReturn(this,_getPrototypeOf(CloseIcon).call(this));if(!document.getElementById("svelte-r8gx3p-style"))add_css();init(_assertThisInitialized(_this2),options,instance,create_fragment,safe_not_equal,[]);return _this2}return CloseIcon}(SvelteComponent);/* src/elements/NotificationMessage.svelte generated by Svelte v3.12.1 */function add_css$1(){var style=element("style");style.id="svelte-1l3nhhx-style";style.textContent="p.svelte-1l3nhhx{margin:0;font-family:\"Helvetica Neue\";font-size:inherit}";append(document.head,style)}function create_fragment$1(ctx){var p,t;return{c:function c(){p=element("p");t=text(ctx.message);attr(p,"class","bn-notify-custom bn-notify-notification-info-message svelte-1l3nhhx")},m:function m(target,anchor){insert(target,p,anchor);append(p,t)},p:function p(changed,ctx){if(changed.message){set_data(t,ctx.message)}},i:noop,o:noop,d:function d(detaching){if(detaching){detach(p)}}}}function instance$1($$self,$$props,$$invalidate){var message=$$props.message;$$self.$set=function($$props){if("message"in $$props)$$invalidate("message",message=$$props.message)};return{message:message}}var NotificationMessage=/*#__PURE__*/function(_SvelteComponent2){_inherits(NotificationMessage,_SvelteComponent2);function NotificationMessage(options){var _this3;_classCallCheck(this,NotificationMessage);_this3=_possibleConstructorReturn(this,_getPrototypeOf(NotificationMessage).call(this));if(!document.getElementById("svelte-1l3nhhx-style"))add_css$1();init(_assertThisInitialized(_this3),options,instance$1,create_fragment$1,safe_not_equal,["message"]);return _this3}return NotificationMessage}(SvelteComponent);/* src/elements/Clock.svelte generated by Svelte v3.12.1 */function add_css$2(){var style=element("style");style.id="svelte-1sck9uz-style";style.textContent="i.svelte-1sck9uz{width:15px;height:16px;display:inline-block;background-image:url(\"https://assist.blocknative.com/images/jJu8b0B.png\");background-position:-66px 0px;vertical-align:sub}";append(document.head,style)}function create_fragment$2(ctx){var i;return{c:function c(){i=element("i");attr(i,"class","bn-notify-custom bn-notify-notification-info-meta-clock svelte-1sck9uz")},m:function m(target,anchor){insert(target,i,anchor)},p:noop,i:noop,o:noop,d:function d(detaching){if(detaching){detach(i)}}}}var Clock=/*#__PURE__*/function(_SvelteComponent3){_inherits(Clock,_SvelteComponent3);function Clock(options){var _this4;_classCallCheck(this,Clock);_this4=_possibleConstructorReturn(this,_getPrototypeOf(Clock).call(this));if(!document.getElementById("svelte-1sck9uz-style"))add_css$2();init(_assertThisInitialized(_this4),options,null,create_fragment$2,safe_not_equal,[]);return _this4}return Clock}(SvelteComponent);/* src/elements/Time.svelte generated by Svelte v3.12.1 */function add_css$3(){var style=element("style");style.id="svelte-82cst2-style";style.textContent="span.svelte-82cst2{font-size:inherit;font-family:inherit}";append(document.head,style)}function create_fragment$3(ctx){var span,t;return{c:function c(){span=element("span");t=text(ctx.time);attr(span,"class","bn-notify-custom bn-notify-notification-info-meta-timestamp svelte-82cst2")},m:function m(target,anchor){insert(target,span,anchor);append(span,t)},p:function p(changed,ctx){if(changed.time){set_data(t,ctx.time)}},i:noop,o:noop,d:function d(detaching){if(detaching){detach(span)}}}}function instance$2($$self,$$props,$$invalidate){var time=$$props.time;$$self.$set=function($$props){if("time"in $$props)$$invalidate("time",time=$$props.time)};return{time:time}}var Time=/*#__PURE__*/function(_SvelteComponent4){_inherits(Time,_SvelteComponent4);function Time(options){var _this5;_classCallCheck(this,Time);_this5=_possibleConstructorReturn(this,_getPrototypeOf(Time).call(this));if(!document.getElementById("svelte-82cst2-style"))add_css$3();init(_assertThisInitialized(_this5),options,instance$2,create_fragment$3,safe_not_equal,["time"]);return _this5}return Time}(SvelteComponent);/* src/elements/Timer.svelte generated by Svelte v3.12.1 */function add_css$4(){var style=element("style");style.id="svelte-82cst2-style";style.textContent="span.svelte-82cst2{font-size:inherit;font-family:inherit}";append(document.head,style)}function create_fragment$4(ctx){var span,t;return{c:function c(){span=element("span");t=text(ctx.value);attr(span,"class","bn-notify-custom bn-notify-notification-info-meta-duration-time svelte-82cst2")},m:function m(target,anchor){insert(target,span,anchor);append(span,t)},p:function p(changed,ctx){if(changed.value){set_data(t,ctx.value)}},i:noop,o:noop,d:function d(detaching){if(detaching){detach(span)}}}}function instance$3($$self,$$props,$$invalidate){var value=$$props.value;$$self.$set=function($$props){if("value"in $$props)$$invalidate("value",value=$$props.value)};return{value:value}}var Timer=/*#__PURE__*/function(_SvelteComponent5){_inherits(Timer,_SvelteComponent5);function Timer(options){var _this6;_classCallCheck(this,Timer);_this6=_possibleConstructorReturn(this,_getPrototypeOf(Timer).call(this));if(!document.getElementById("svelte-82cst2-style"))add_css$4();init(_assertThisInitialized(_this6),options,instance$3,create_fragment$4,safe_not_equal,["value"]);return _this6}return Timer}(SvelteComponent);/* src/components/NotificationContent.svelte generated by Svelte v3.12.1 */function add_css$5(){var style=element("style");style.id="svelte-1xe6894-style";style.textContent="div.svelte-1xe6894{display:flex;flex-flow:column nowrap;justify-content:center;font-size:inherit;font-family:inherit;margin-left:0.75em;max-width:78%}p.svelte-1xe6894{margin:0.5em 0 0 0;opacity:0.7;font-size:0.889em;line-height:1.15;font-family:\"Helvetica Neue\"}span.svelte-1xe6894{font-family:\"Helvetica Neue\"}";append(document.head,style)}// (42:4) {#if notification.type === 'pending' && notification.startTime}
function create_if_block(ctx){var span,t0,t1,current;var clock=new Clock({});var timer=new Timer({props:{value:timeString(ctx.currentTime-ctx.notification.startTime)}});return{c:function c(){span=element("span");t0=text("-\n        ");clock.$$.fragment.c();t1=space();timer.$$.fragment.c();attr(span,"class","bn-notify-custom bn-notify-notification-info-meta-duration svelte-1xe6894")},m:function m(target,anchor){insert(target,span,anchor);append(span,t0);mount_component(clock,span,null);append(span,t1);mount_component(timer,span,null);current=true},p:function p(changed,ctx){var timer_changes={};if(changed.currentTime||changed.notification)timer_changes.value=timeString(ctx.currentTime-ctx.notification.startTime);timer.$set(timer_changes)},i:function i(local){if(current)return;transition_in(clock.$$.fragment,local);transition_in(timer.$$.fragment,local);current=true},o:function o(local){transition_out(clock.$$.fragment,local);transition_out(timer.$$.fragment,local);current=false},d:function d(detaching){if(detaching){detach(span)}destroy_component(clock);destroy_component(timer)}}}function create_fragment$5(ctx){var div,t0,_p,t1,current;var notificationmessage=new NotificationMessage({props:{message:ctx.notification.message}});var time=new Time({props:{time:ctx.formattedTime}});var if_block=ctx.notification.type==="pending"&&ctx.notification.startTime&&create_if_block(ctx);return{c:function c(){div=element("div");notificationmessage.$$.fragment.c();t0=space();_p=element("p");time.$$.fragment.c();t1=space();if(if_block)if_block.c();attr(_p,"class","bn-notify-custom bn-notify-notification-info-meta svelte-1xe6894");attr(div,"class","bn-notify-custom bn-notify-notification-info svelte-1xe6894")},m:function m(target,anchor){insert(target,div,anchor);mount_component(notificationmessage,div,null);append(div,t0);append(div,_p);mount_component(time,_p,null);append(_p,t1);if(if_block)if_block.m(_p,null);current=true},p:function p(changed,ctx){var notificationmessage_changes={};if(changed.notification)notificationmessage_changes.message=ctx.notification.message;notificationmessage.$set(notificationmessage_changes);var time_changes={};if(changed.formattedTime)time_changes.time=ctx.formattedTime;time.$set(time_changes);if(ctx.notification.type==="pending"&&ctx.notification.startTime){if(if_block){if_block.p(changed,ctx);transition_in(if_block,1)}else{if_block=create_if_block(ctx);if_block.c();transition_in(if_block,1);if_block.m(_p,null)}}else if(if_block){group_outros();transition_out(if_block,1,1,function(){if_block=null});check_outros()}},i:function i(local){if(current)return;transition_in(notificationmessage.$$.fragment,local);transition_in(time.$$.fragment,local);transition_in(if_block);current=true},o:function o(local){transition_out(notificationmessage.$$.fragment,local);transition_out(time.$$.fragment,local);transition_out(if_block);current=false},d:function d(detaching){if(detaching){detach(div)}destroy_component(notificationmessage);destroy_component(time);if(if_block)if_block.d()}}}function instance$4($$self,$$props,$$invalidate){var notification=$$props.notification,formattedTime=$$props.formattedTime,currentTime=$$props.currentTime;$$self.$set=function($$props){if("notification"in $$props)$$invalidate("notification",notification=$$props.notification);if("formattedTime"in $$props)$$invalidate("formattedTime",formattedTime=$$props.formattedTime);if("currentTime"in $$props)$$invalidate("currentTime",currentTime=$$props.currentTime)};return{notification:notification,formattedTime:formattedTime,currentTime:currentTime}}var NotificationContent=/*#__PURE__*/function(_SvelteComponent6){_inherits(NotificationContent,_SvelteComponent6);function NotificationContent(options){var _this7;_classCallCheck(this,NotificationContent);_this7=_possibleConstructorReturn(this,_getPrototypeOf(NotificationContent).call(this));if(!document.getElementById("svelte-1xe6894-style"))add_css$5();init(_assertThisInitialized(_this7),options,instance$4,create_fragment$5,safe_not_equal,["notification","formattedTime","currentTime"]);return _this7}return NotificationContent}(SvelteComponent);/* src/components/TypeIcon.svelte generated by Svelte v3.12.1 */function add_css$6(){var style=element("style");style.id="svelte-7rn0pv-style";style.textContent="div.svelte-7rn0pv{height:100%;font-size:inherit;font-family:inherit;width:1.5em}";append(document.head,style)}// (15:2) {#if type === 'hint'}
function create_if_block_3(ctx){var svg,style,t,g_2,g,circle,g_1,path,circle_1;return{c:function c(){svg=svg_element("svg");style=svg_element("style");t=text("@-webkit-keyframes kf_el_51c2MS41pY_an_cXFUsKhg3V {\n          50% {\n            stroke-dasharray: 553;\n          }\n          0% {\n            stroke-dasharray: 553;\n          }\n          100% {\n            stroke-dasharray: 553;\n          }\n        }\n        @keyframes kf_el_51c2MS41pY_an_cXFUsKhg3V {\n          50% {\n            stroke-dasharray: 553;\n          }\n          0% {\n            stroke-dasharray: 553;\n          }\n          100% {\n            stroke-dasharray: 553;\n          }\n        }\n        @-webkit-keyframes kf_el_51c2MS41pY_an_M-ML-YLcm {\n          50% {\n            stroke-dashoffset: 553;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 553;\n          }\n        }\n        @keyframes kf_el_51c2MS41pY_an_M-ML-YLcm {\n          50% {\n            stroke-dashoffset: 553;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 553;\n          }\n        }\n        @-webkit-keyframes kf_el_j5HR_U6Nrp_an_KGzPpGvQb {\n          50% {\n            opacity: 0;\n          }\n          56.67% {\n            opacity: 1;\n          }\n          0% {\n            opacity: 0;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n        @keyframes kf_el_j5HR_U6Nrp_an_KGzPpGvQb {\n          50% {\n            opacity: 0;\n          }\n          56.67% {\n            opacity: 1;\n          }\n          0% {\n            opacity: 0;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n        @-webkit-keyframes kf_el_j5HR_U6Nrp_an_al_MjoEv-F {\n          50% {\n            stroke-dasharray: 39.41;\n          }\n          0% {\n            stroke-dasharray: 39.41;\n          }\n          100% {\n            stroke-dasharray: 39.41;\n          }\n        }\n        @keyframes kf_el_j5HR_U6Nrp_an_al_MjoEv-F {\n          50% {\n            stroke-dasharray: 39.41;\n          }\n          0% {\n            stroke-dasharray: 39.41;\n          }\n          100% {\n            stroke-dasharray: 39.41;\n          }\n        }\n        @-webkit-keyframes kf_el_j5HR_U6Nrp_an_VsVMmQ1MU {\n          50% {\n            stroke-dashoffset: 39.41;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 39.41;\n          }\n        }\n        @keyframes kf_el_j5HR_U6Nrp_an_VsVMmQ1MU {\n          50% {\n            stroke-dashoffset: 39.41;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 39.41;\n          }\n        }\n        @-webkit-keyframes kf_el_TZApOLwXZU_an_dL6-SZLSH {\n          50% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          83.33% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          100% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(1, 1) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(1, 1)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          0% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n        }\n        @keyframes kf_el_TZApOLwXZU_an_dL6-SZLSH {\n          50% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          83.33% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          100% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(1, 1) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(1, 1)\n              translate(-88.50000762939453px, -56.5px);\n          }\n          0% {\n            -webkit-transform: translate(88.50000762939453px, 56.5px)\n              scale(0, 0) translate(-88.50000762939453px, -56.5px);\n            transform: translate(88.50000762939453px, 56.5px) scale(0, 0)\n              translate(-88.50000762939453px, -56.5px);\n          }\n        }\n        #el_DHAskxC2T * {\n          -webkit-animation-duration: 1s;\n          animation-duration: 1s;\n          -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el__hILOKhuR3 {\n          fill: none;\n          -webkit-transform: translate(7px, 7px);\n          transform: translate(7px, 7px);\n        }\n        #el_TZApOLwXZU {\n          fill: #979797;\n          -webkit-transform: matrix(1, 0, 0, -1, 0, 113);\n          transform: matrix(1, 0, 0, -1, 0, 113);\n        }\n        #el_fIxIrV8WbF {\n          stroke: #979797;\n          stroke-width: 14;\n        }\n        #el_TZApOLwXZU_an_dL6-SZLSH {\n          -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n          -webkit-animation-name: kf_el_TZApOLwXZU_an_dL6-SZLSH;\n          animation-name: kf_el_TZApOLwXZU_an_dL6-SZLSH;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el_j5HR_U6Nrp {\n          -webkit-animation-fill-mode: forwards, forwards, forwards;\n          animation-fill-mode: forwards, forwards, forwards;\n          -webkit-animation-name: kf_el_j5HR_U6Nrp_an_VsVMmQ1MU,\n            kf_el_j5HR_U6Nrp_an_al_MjoEv-F, kf_el_j5HR_U6Nrp_an_KGzPpGvQb;\n          animation-name: kf_el_j5HR_U6Nrp_an_VsVMmQ1MU,\n            kf_el_j5HR_U6Nrp_an_al_MjoEv-F, kf_el_j5HR_U6Nrp_an_KGzPpGvQb;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1), cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1), cubic-bezier(0, 0, 1, 1);\n        }\n        #el_51c2MS41pY {\n          -webkit-animation-fill-mode: forwards, forwards;\n          animation-fill-mode: forwards, forwards;\n          -webkit-animation-name: kf_el_51c2MS41pY_an_M-ML-YLcm,\n            kf_el_51c2MS41pY_an_cXFUsKhg3V;\n          animation-name: kf_el_51c2MS41pY_an_M-ML-YLcm,\n            kf_el_51c2MS41pY_an_cXFUsKhg3V;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n        }\n      ");g_2=svg_element("g");g=svg_element("g");circle=svg_element("circle");g_1=svg_element("g");path=svg_element("path");circle_1=svg_element("circle");attr(circle,"cx","88.5");attr(circle,"cy","56.5");attr(circle,"r","7.5");attr(circle,"id","el_TZApOLwXZU");attr(g,"id","el_TZApOLwXZU_an_dL6-SZLSH");attr(g,"data-animator-group","true");attr(g,"data-animator-type","2");attr(path,"d","m88.5 128v-39.4130859");attr(path,"stroke-linecap","round");attr(path,"stroke-linejoin","round");attr(path,"id","el_j5HR_U6Nrp");attr(circle_1,"cx","88");attr(circle_1,"cy","88");attr(circle_1,"r","88");attr(circle_1,"id","el_51c2MS41pY");attr(g_1,"id","el_fIxIrV8WbF");attr(g_2,"fill-rule","evenodd");attr(g_2,"id","el__hILOKhuR3");attr(svg,"viewBox","0 0 190 190");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"id","el_DHAskxC2T")},m:function m(target,anchor){insert(target,svg,anchor);append(svg,style);append(style,t);append(svg,g_2);append(g_2,g);append(g,circle);append(g_2,g_1);append(g_1,path);append(g_1,circle_1)},d:function d(detaching){if(detaching){detach(svg)}}}}// (263:2) {#if type === 'pending'}
function create_if_block_2(ctx){var svg,style,t,g_3,circle,g_2,g,path,g_1,path_1;return{c:function c(){svg=svg_element("svg");style=svg_element("style");t=text("@-webkit-keyframes kf_el_fv0z90vBrL_an_PwUBZ96LS {\n          0% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n          }\n          100% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n          }\n        }\n        @keyframes kf_el_fv0z90vBrL_an_PwUBZ96LS {\n          0% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n          }\n          100% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n          }\n        }\n        @-webkit-keyframes kf_el_u3QHGLTow3_an_EQ8OetHGq {\n          0% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n          }\n          50% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n          }\n          100% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(720deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(720deg)\n              translate(-88px, -87.587890625px);\n          }\n        }\n        @keyframes kf_el_u3QHGLTow3_an_EQ8OetHGq {\n          0% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(0deg)\n              translate(-88px, -87.587890625px);\n          }\n          50% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(360deg)\n              translate(-88px, -87.587890625px);\n          }\n          100% {\n            -webkit-transform: translate(88px, 87.587890625px) rotate(720deg)\n              translate(-88px, -87.587890625px);\n            transform: translate(88px, 87.587890625px) rotate(720deg)\n              translate(-88px, -87.587890625px);\n          }\n        }\n        #el_XWLVvD_rP * {\n          -webkit-animation-duration: 2s;\n          animation-duration: 2s;\n          -webkit-animation-iteration-count: infinite;\n          animation-iteration-count: infinite;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el_Uh6HOhkAVi {\n          fill: none;\n          stroke-width: 14;\n          -webkit-transform: translate(7px, 7px);\n          transform: translate(7px, 7px);\n        }\n        #el_PHAWgO26lN {\n          stroke: #ffbd00;\n        }\n        #el_A4XF5QQwhp {\n          stroke: #ffbf00;\n        }\n        #el_u3QHGLTow3_an_EQ8OetHGq {\n          -webkit-animation-fill-mode: backwards;\n          animation-fill-mode: backwards;\n          -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n            translate(-88px, -87.587890625px);\n          transform: translate(88px, 87.587890625px) rotate(0deg)\n            translate(-88px, -87.587890625px);\n          -webkit-animation-name: kf_el_u3QHGLTow3_an_EQ8OetHGq;\n          animation-name: kf_el_u3QHGLTow3_an_EQ8OetHGq;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el_fv0z90vBrL_an_PwUBZ96LS {\n          -webkit-animation-fill-mode: backwards;\n          animation-fill-mode: backwards;\n          -webkit-transform: translate(88px, 87.587890625px) rotate(0deg)\n            translate(-88px, -87.587890625px);\n          transform: translate(88px, 87.587890625px) rotate(0deg)\n            translate(-88px, -87.587890625px);\n          -webkit-animation-name: kf_el_fv0z90vBrL_an_PwUBZ96LS;\n          animation-name: kf_el_fv0z90vBrL_an_PwUBZ96LS;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n      ");g_3=svg_element("g");circle=svg_element("circle");g_2=svg_element("g");g=svg_element("g");path=svg_element("path");g_1=svg_element("g");path_1=svg_element("path");attr(circle,"cx","88");attr(circle,"cy","88");attr(circle,"r","88");attr(circle,"id","el_PHAWgO26lN");attr(path,"d","m88 25v62.5878906");attr(path,"id","el_fv0z90vBrL");attr(g,"id","el_fv0z90vBrL_an_PwUBZ96LS");attr(g,"data-animator-group","true");attr(g,"data-animator-type","1");attr(path_1,"d","m88 45.9160156v41.671875");attr(path_1,"id","el_u3QHGLTow3");attr(g_1,"id","el_u3QHGLTow3_an_EQ8OetHGq");attr(g_1,"data-animator-group","true");attr(g_1,"data-animator-type","1");attr(g_2,"stroke-linecap","round");attr(g_2,"stroke-linejoin","round");attr(g_2,"id","el_A4XF5QQwhp");attr(g_3,"fill-rule","evenodd");attr(g_3,"id","el_Uh6HOhkAVi");attr(svg,"viewBox","0 0 190 190");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"id","el_XWLVvD_rP")},m:function m(target,anchor){insert(target,svg,anchor);append(svg,style);append(style,t);append(svg,g_3);append(g_3,circle);append(g_3,g_2);append(g_2,g);append(g,path);append(g_2,g_1);append(g_1,path_1)},d:function d(detaching){if(detaching){detach(svg)}}}}// (402:2) {#if type === 'success'}
function create_if_block_1(ctx){var svg,style,t,path;return{c:function c(){svg=svg_element("svg");style=svg_element("style");t=text("@-webkit-keyframes kf_el_RzYtw9rUyN_an_gX4OsFPwzz {\n          0% {\n            stroke-dasharray: 473.87;\n          }\n          100% {\n            stroke-dasharray: 473.87;\n          }\n        }\n        @keyframes kf_el_RzYtw9rUyN_an_gX4OsFPwzz {\n          0% {\n            stroke-dasharray: 473.87;\n          }\n          100% {\n            stroke-dasharray: 473.87;\n          }\n        }\n        @-webkit-keyframes kf_el_RzYtw9rUyN_an_WfcYZ9pjL {\n          0% {\n            stroke-dashoffset: 473.87;\n          }\n          50% {\n            stroke-dashoffset: 473.87;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n        }\n        @keyframes kf_el_RzYtw9rUyN_an_WfcYZ9pjL {\n          0% {\n            stroke-dashoffset: 473.87;\n          }\n          50% {\n            stroke-dashoffset: 473.87;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n        }\n        #el_3OA8Szq_A * {\n          -webkit-animation-duration: 1s;\n          animation-duration: 1s;\n          -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el_RzYtw9rUyN {\n          fill: none;\n          stroke: #7ed321;\n          stroke-width: 17;\n          -webkit-animation-fill-mode: forwards, forwards;\n          animation-fill-mode: forwards, forwards;\n          -webkit-animation-name: kf_el_RzYtw9rUyN_an_WfcYZ9pjL,\n            kf_el_RzYtw9rUyN_an_gX4OsFPwzz;\n          animation-name: kf_el_RzYtw9rUyN_an_WfcYZ9pjL,\n            kf_el_RzYtw9rUyN_an_gX4OsFPwzz;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n        }\n      ");path=svg_element("path");attr(path,"d","m176.126953 63.8789062-94.4130858 95.4130858-72.87402345-72.8740232\n        27.93945315-27.9394532 44.9345703 44.9345704 94.4130858-94.413086");attr(path,"stroke-linecap","round");attr(path,"stroke-linejoin","round");attr(path,"id","el_RzYtw9rUyN");attr(svg,"viewBox","0 0 185 168");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"id","el_3OA8Szq_A")},m:function m(target,anchor){insert(target,svg,anchor);append(svg,style);append(style,t);append(svg,path)},d:function d(detaching){if(detaching){detach(svg)}}}}// (479:2) {#if type === 'error'}
function create_if_block$1(ctx){var svg,style,t,g_1,path,g,circle,path_1;return{c:function c(){svg=svg_element("svg");style=svg_element("style");t=text("@-webkit-keyframes kf_el_IAuv9ut-2-_an_xlDuvYsRc {\n          50% {\n            opacity: 0;\n          }\n          66.67% {\n            opacity: 1;\n          }\n          0% {\n            opacity: 0;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n        @keyframes kf_el_IAuv9ut-2-_an_xlDuvYsRc {\n          50% {\n            opacity: 0;\n          }\n          66.67% {\n            opacity: 1;\n          }\n          0% {\n            opacity: 0;\n          }\n          100% {\n            opacity: 1;\n          }\n        }\n        @-webkit-keyframes kf_el_IAuv9ut-2-_an_29XE36SGo1 {\n          50% {\n            stroke-dasharray: 39.41;\n          }\n          0% {\n            stroke-dasharray: 39.41;\n          }\n          100% {\n            stroke-dasharray: 39.41;\n          }\n        }\n        @keyframes kf_el_IAuv9ut-2-_an_29XE36SGo1 {\n          50% {\n            stroke-dasharray: 39.41;\n          }\n          0% {\n            stroke-dasharray: 39.41;\n          }\n          100% {\n            stroke-dasharray: 39.41;\n          }\n        }\n        @-webkit-keyframes kf_el_IAuv9ut-2-_an_xo_EIWruT {\n          50% {\n            stroke-dashoffset: 39.41;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 39.41;\n          }\n        }\n        @keyframes kf_el_IAuv9ut-2-_an_xo_EIWruT {\n          50% {\n            stroke-dashoffset: 39.41;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 39.41;\n          }\n        }\n        @-webkit-keyframes kf_el_q_eIK0z3HI_an_045tZJOHl {\n          50% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          83.33% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          100% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(1, 1) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(1, 1)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          0% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n        }\n        @keyframes kf_el_q_eIK0z3HI_an_045tZJOHl {\n          50% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          83.33% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          100% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(1, 1) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(1, 1)\n              translate(-88.50000762939453px, -144.5px);\n          }\n          0% {\n            -webkit-transform: translate(88.50000762939453px, 144.5px)\n              scale(0, 0) translate(-88.50000762939453px, -144.5px);\n            transform: translate(88.50000762939453px, 144.5px) scale(0, 0)\n              translate(-88.50000762939453px, -144.5px);\n          }\n        }\n        @-webkit-keyframes kf_el_5BNAI_PBsn_an_aToWhdlG8F {\n          50% {\n            stroke-dasharray: 527.67;\n          }\n          0% {\n            stroke-dasharray: 527.67;\n          }\n          100% {\n            stroke-dasharray: 527.67;\n          }\n        }\n        @keyframes kf_el_5BNAI_PBsn_an_aToWhdlG8F {\n          50% {\n            stroke-dasharray: 527.67;\n          }\n          0% {\n            stroke-dasharray: 527.67;\n          }\n          100% {\n            stroke-dasharray: 527.67;\n          }\n        }\n        @-webkit-keyframes kf_el_5BNAI_PBsn_an_tQV_CQebU {\n          50% {\n            stroke-dashoffset: 527.67;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 527.67;\n          }\n        }\n        @keyframes kf_el_5BNAI_PBsn_an_tQV_CQebU {\n          50% {\n            stroke-dashoffset: 527.67;\n          }\n          100% {\n            stroke-dashoffset: 0;\n          }\n          0% {\n            stroke-dashoffset: 527.67;\n          }\n        }\n        #el_bYTVKD04y * {\n          -webkit-animation-duration: 1s;\n          animation-duration: 1s;\n          -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n        #el_doMgf96Cxx {\n          fill: none;\n          -webkit-transform: translate(1px, -5px);\n          transform: translate(1px, -5px);\n        }\n        #el_5BNAI_PBsn {\n          stroke: #ff0039;\n          stroke-width: 14;\n          -webkit-animation-fill-mode: forwards, forwards;\n          animation-fill-mode: forwards, forwards;\n          -webkit-animation-name: kf_el_5BNAI_PBsn_an_tQV_CQebU,\n            kf_el_5BNAI_PBsn_an_aToWhdlG8F;\n          animation-name: kf_el_5BNAI_PBsn_an_tQV_CQebU,\n            kf_el_5BNAI_PBsn_an_aToWhdlG8F;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1);\n        }\n        #el_q_eIK0z3HI {\n          fill: #ff0042;\n        }\n        #el_IAuv9ut-2- {\n          stroke: #ff0042;\n          stroke-width: 14;\n          -webkit-animation-fill-mode: forwards, forwards, forwards;\n          animation-fill-mode: forwards, forwards, forwards;\n          -webkit-animation-name: kf_el_IAuv9ut-2-_an_xo_EIWruT,\n            kf_el_IAuv9ut-2-_an_29XE36SGo1, kf_el_IAuv9ut-2-_an_xlDuvYsRc;\n          animation-name: kf_el_IAuv9ut-2-_an_xo_EIWruT,\n            kf_el_IAuv9ut-2-_an_29XE36SGo1, kf_el_IAuv9ut-2-_an_xlDuvYsRc;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1), cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1),\n            cubic-bezier(0, 0, 1, 1), cubic-bezier(0, 0, 1, 1);\n        }\n        #el_q_eIK0z3HI_an_045tZJOHl {\n          -webkit-animation-fill-mode: forwards;\n          animation-fill-mode: forwards;\n          -webkit-animation-name: kf_el_q_eIK0z3HI_an_045tZJOHl;\n          animation-name: kf_el_q_eIK0z3HI_an_045tZJOHl;\n          -webkit-animation-timing-function: cubic-bezier(0, 0, 1, 1);\n          animation-timing-function: cubic-bezier(0, 0, 1, 1);\n        }\n      ");g_1=svg_element("g");path=svg_element("path");g=svg_element("g");circle=svg_element("circle");path_1=svg_element("path");attr(path,"d","m96.9442719 17.8885438 71.8196601 143.6393202c2.469893\n          4.939785.467649 10.946515-4.472136 13.416408-1.388554.694277-2.919685\n          1.055728-4.472136 1.055728h-143.6393201c-5.5228475\n          0-10.00000001-4.477153-10.00000001-10 0-1.552451.36145092-3.083582\n          1.05572809-4.472136l71.81966012-143.6393202c2.4698925-4.939785\n          8.4766229-6.9420284 13.4164079-4.4721359 1.935274.967637 3.5044989\n          2.5368619 4.4721359 4.4721359z");attr(path,"stroke-linejoin","round");attr(path,"id","el_5BNAI_PBsn");attr(circle,"cx","88.5");attr(circle,"cy","144.5");attr(circle,"r","7.5");attr(circle,"id","el_q_eIK0z3HI");attr(g,"id","el_q_eIK0z3HI_an_045tZJOHl");attr(g,"data-animator-group","true");attr(g,"data-animator-type","2");attr(path_1,"d","m88.5 112.413086v-39.413086");attr(path_1,"stroke-linecap","round");attr(path_1,"stroke-linejoin","round");attr(path_1,"id","el_IAuv9ut-2-");attr(g_1,"fill-rule","evenodd");attr(g_1,"id","el_doMgf96Cxx");attr(svg,"viewBox","0 0 178 178");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"id","el_bYTVKD04y")},m:function m(target,anchor){insert(target,svg,anchor);append(svg,style);append(style,t);append(svg,g_1);append(g_1,path);append(g_1,g);append(g,circle);append(g_1,path_1)},d:function d(detaching){if(detaching){detach(svg)}}}}function create_fragment$6(ctx){var div,t0,t1,t2;var if_block0=ctx.type==="hint"&&create_if_block_3();var if_block1=ctx.type==="pending"&&create_if_block_2();var if_block2=ctx.type==="success"&&create_if_block_1();var if_block3=ctx.type==="error"&&create_if_block$1();return{c:function c(){div=element("div");if(if_block0)if_block0.c();t0=space();if(if_block1)if_block1.c();t1=space();if(if_block2)if_block2.c();t2=space();if(if_block3)if_block3.c();attr(div,"class","bn-notify-custom bn-notify-notification-status-icon svelte-7rn0pv")},m:function m(target,anchor){insert(target,div,anchor);if(if_block0)if_block0.m(div,null);append(div,t0);if(if_block1)if_block1.m(div,null);append(div,t1);if(if_block2)if_block2.m(div,null);append(div,t2);if(if_block3)if_block3.m(div,null)},p:function p(changed,ctx){if(ctx.type==="hint"){if(!if_block0){if_block0=create_if_block_3();if_block0.c();if_block0.m(div,t0)}}else if(if_block0){if_block0.d(1);if_block0=null}if(ctx.type==="pending"){if(!if_block1){if_block1=create_if_block_2();if_block1.c();if_block1.m(div,t1)}}else if(if_block1){if_block1.d(1);if_block1=null}if(ctx.type==="success"){if(!if_block2){if_block2=create_if_block_1();if_block2.c();if_block2.m(div,t2)}}else if(if_block2){if_block2.d(1);if_block2=null}if(ctx.type==="error"){if(!if_block3){if_block3=create_if_block$1();if_block3.c();if_block3.m(div,null)}}else if(if_block3){if_block3.d(1);if_block3=null}},i:noop,o:noop,d:function d(detaching){if(detaching){detach(div)}if(if_block0)if_block0.d();if(if_block1)if_block1.d();if(if_block2)if_block2.d();if(if_block3)if_block3.d()}}}function instance$5($$self,$$props,$$invalidate){var type=$$props.type;$$self.$set=function($$props){if("type"in $$props)$$invalidate("type",type=$$props.type)};return{type:type}}var TypeIcon=/*#__PURE__*/function(_SvelteComponent7){_inherits(TypeIcon,_SvelteComponent7);function TypeIcon(options){var _this8;_classCallCheck(this,TypeIcon);_this8=_possibleConstructorReturn(this,_getPrototypeOf(TypeIcon).call(this));if(!document.getElementById("svelte-7rn0pv-style"))add_css$6();init(_assertThisInitialized(_this8),options,instance$5,create_fragment$6,safe_not_equal,["type"]);return _this8}return TypeIcon}(SvelteComponent);/* src/components/AutoDismiss.svelte generated by Svelte v3.12.1 */function create_fragment$7(ctx){return{c:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function instance$6($$self,$$props,$$invalidate){var _$$props$notification=$$props.notification,notification=_$$props$notification===void 0?{id:"",type:"",key:"",message:"",eventCode:""}:_$$props$notification;if(notification.autoDismiss&&notification.id){setTimeout(function(){notifications.remove(notification.id,notification.eventCode)},notification.autoDismiss)}$$self.$set=function($$props){if("notification"in $$props)$$invalidate("notification",notification=$$props.notification)};return{notification:notification}}var AutoDismiss=/*#__PURE__*/function(_SvelteComponent8){_inherits(AutoDismiss,_SvelteComponent8);function AutoDismiss(options){var _this9;_classCallCheck(this,AutoDismiss);_this9=_possibleConstructorReturn(this,_getPrototypeOf(AutoDismiss).call(this));init(_assertThisInitialized(_this9),options,instance$6,create_fragment$7,safe_not_equal,["notification"]);return _this9}return AutoDismiss}(SvelteComponent);/* src/views/Notify.svelte generated by Svelte v3.12.1 */function add_css$7(){var style=element("style");style.id="svelte-1jezb03-style";style.textContent="ul.svelte-1jezb03{display:flex;flex-flow:column nowrap;position:fixed;font-size:16px;padding:0 0.75em;margin:0;list-style-type:none;width:20em;bottom:0;right:0;font-family:\"Helvetica Neue\";max-height:100vh;overflow-y:scroll;overflow-x:hidden;color:#4a4a4a;background:transparent;scrollbar-width:none;box-sizing:border-box;height:100vh;pointer-events:none;z-index:99999999}@media only screen and (max-width: 450px){ul.svelte-1jezb03{width:100%}}.bn-notify-custom.bn-notify-dark-mode{background:#283944;color:#ffffff;background:rgba(40, 57, 68, 0.9)}.bn-notify-clickable:hover{cursor:pointer}.svelte-1jezb03::-webkit-scrollbar{display:none}li.svelte-1jezb03{position:relative;display:flex;padding:0.75em;font-size:0.889em;border-radius:10px;background:#ffffff;box-shadow:0px 2px 10px rgba(0, 0, 0, 0.1);color:inherit;transition:background 300ms ease-in-out, color 300ms ease-in-out;pointer-events:all;background:#ffffff;backdrop-filter:blur(5px);background:rgba(255, 255, 255, 0.9)}div.svelte-1jezb03{position:absolute;top:0.75em;right:0.75em;font-size:inherit}";append(document.head,style)}function get_each_context(ctx,list,i){var child_ctx=Object.create(ctx);child_ctx.notification=list[i];child_ctx.i=i;return child_ctx}// (175:0) {#if $notifications.length > 0}
function create_if_block$2(ctx){var ul,each_blocks=[],each_1_lookup=new Map,ul_style_value,current;var each_value=ctx.$notifications;var get_key=function get_key(ctx){return ctx.notification.key};for(var _i5=0;_i5<each_value.length;_i5+=1){var child_ctx=get_each_context(ctx,each_value,_i5);var key=get_key(child_ctx);each_1_lookup.set(key,each_blocks[_i5]=create_each_block(key,child_ctx))}return{c:function c(){ul=element("ul");for(var _i6=0;_i6<each_blocks.length;_i6+=1){each_blocks[_i6].c()}attr(ul,"class","bn-notify-custom bn-notify-notifications svelte-1jezb03");attr(ul,"style",ul_style_value="".concat(ctx.positioning," ").concat(ctx.justifyContent))},m:function m(target,anchor){insert(target,ul,anchor);for(var _i7=0;_i7<each_blocks.length;_i7+=1){each_blocks[_i7].m(ul,null)}current=true},p:function p(changed,ctx){var each_value=ctx.$notifications;group_outros();for(var _i8=0;_i8<each_blocks.length;_i8+=1){each_blocks[_i8].r()}each_blocks=update_keyed_each(each_blocks,changed,get_key,1,ctx,each_value,each_1_lookup,ul,fix_and_outro_and_destroy_block,create_each_block,null,get_each_context);for(var _i9=0;_i9<each_blocks.length;_i9+=1){each_blocks[_i9].a()}check_outros();if((!current||changed.positioning||changed.justifyContent)&&ul_style_value!==(ul_style_value="".concat(ctx.positioning," ").concat(ctx.justifyContent))){attr(ul,"style",ul_style_value)}},i:function i(local){if(current)return;for(var _i10=0;_i10<each_value.length;_i10+=1){transition_in(each_blocks[_i10])}current=true},o:function o(local){for(var _i11=0;_i11<each_blocks.length;_i11+=1){transition_out(each_blocks[_i11])}current=false},d:function d(detaching){if(detaching){detach(ul)}for(var _i12=0;_i12<each_blocks.length;_i12+=1){each_blocks[_i12].d()}}}}// (179:4) {#each $notifications as notification, i (notification.key)}
function create_each_block(key_1,ctx){var li,t0,t1,div,t2,t3,li_intro,li_outro,rect,stop_animation=noop,current,dispose;var typeicon=new TypeIcon({props:{type:ctx.notification.type}});var notificationcontent=new NotificationContent({props:{notification:ctx.notification,formattedTime:ctx.formattedTime,currentTime:ctx.currentTime}});var closeicon=new CloseIcon({});function click_handler(){return ctx.click_handler(ctx)}var autodismiss=new AutoDismiss({props:{notification:ctx.notification}});return{key:key_1,first:null,c:function c(){li=element("li");typeicon.$$.fragment.c();t0=space();notificationcontent.$$.fragment.c();t1=space();div=element("div");closeicon.$$.fragment.c();t2=space();autodismiss.$$.fragment.c();t3=space();attr(div,"class","bn-notify-custom bn-notify-notification-close svelte-1jezb03");attr(li,"style",ctx.notificationMargin);attr(li,"class","bn-notify-custom bn-notify-notification svelte-1jezb03");toggle_class(li,"bn-notify-dark-mode",ctx.$app.darkMode);toggle_class(li,"bn-notify-clickable",ctx.notification.onclick);dispose=[listen(div,"click",click_handler),listen(li,"click",ctx.notification.onclick)];this.first=li},m:function m(target,anchor){insert(target,li,anchor);mount_component(typeicon,li,null);append(li,t0);mount_component(notificationcontent,li,null);append(li,t1);append(li,div);mount_component(closeicon,div,null);append(li,t2);mount_component(autodismiss,li,null);append(li,t3);current=true},p:function p(changed,new_ctx){ctx=new_ctx;var typeicon_changes={};if(changed.$notifications)typeicon_changes.type=ctx.notification.type;typeicon.$set(typeicon_changes);var notificationcontent_changes={};if(changed.$notifications)notificationcontent_changes.notification=ctx.notification;if(changed.currentTime)notificationcontent_changes.currentTime=ctx.currentTime;notificationcontent.$set(notificationcontent_changes);var autodismiss_changes={};if(changed.$notifications)autodismiss_changes.notification=ctx.notification;autodismiss.$set(autodismiss_changes);if(!current||changed.notificationMargin){attr(li,"style",ctx.notificationMargin)}if(changed.$app){toggle_class(li,"bn-notify-dark-mode",ctx.$app.darkMode)}if(changed.$notifications){toggle_class(li,"bn-notify-clickable",ctx.notification.onclick)}},r:function r(){rect=li.getBoundingClientRect()},f:function f(){fix_position(li);stop_animation();add_transform(li,rect)},a:function a(){stop_animation();stop_animation=create_animation(li,rect,flip,{duration:500})},i:function i(local){if(current)return;transition_in(typeicon.$$.fragment,local);transition_in(notificationcontent.$$.fragment,local);transition_in(closeicon.$$.fragment,local);transition_in(autodismiss.$$.fragment,local);add_render_callback(function(){if(li_outro)li_outro.end(1);if(!li_intro)li_intro=create_in_transition(li,fly,{duration:1200,delay:300,x:ctx.x,y:ctx.y,easing:elasticOut});li_intro.start()});current=true},o:function o(local){transition_out(typeicon.$$.fragment,local);transition_out(notificationcontent.$$.fragment,local);transition_out(closeicon.$$.fragment,local);transition_out(autodismiss.$$.fragment,local);if(li_intro)li_intro.invalidate();li_outro=create_out_transition(li,fly,{duration:400,x:ctx.x,y:ctx.y,easing:quintIn});current=false},d:function d(detaching){if(detaching){detach(li)}destroy_component(typeicon);destroy_component(notificationcontent);destroy_component(closeicon);destroy_component(autodismiss);if(detaching){if(li_outro)li_outro.end()}run_all(dispose)}}}function create_fragment$8(ctx){var if_block_anchor,current;var if_block=ctx.$notifications.length>0&&create_if_block$2(ctx);return{c:function c(){if(if_block)if_block.c();if_block_anchor=empty()},m:function m(target,anchor){if(if_block)if_block.m(target,anchor);insert(target,if_block_anchor,anchor);current=true},p:function p(changed,ctx){if(ctx.$notifications.length>0){if(if_block){if_block.p(changed,ctx);transition_in(if_block,1)}else{if_block=create_if_block$2(ctx);if_block.c();transition_in(if_block,1);if_block.m(if_block_anchor.parentNode,if_block_anchor)}}else if(if_block){group_outros();transition_out(if_block,1,1,function(){if_block=null});check_outros()}},i:function i(local){if(current)return;transition_in(if_block);current=true},o:function o(local){transition_out(if_block);current=false},d:function d(detaching){if(if_block)if_block.d(detaching);if(detaching){detach(if_block_anchor)}}}}function elasticOut(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-35*t)+1}function instance$7($$self,$$props,$$invalidate){var $notifications,$app;component_subscribe($$self,notifications,function($$value){$notifications=$$value;$$invalidate("$notifications",$notifications)});component_subscribe($$self,app,function($$value){$app=$$value;$$invalidate("$app",$app)});var smallScreen=window.outerWidth<450;var positioning;var x;var y;var notificationMargin;var justifyContent;var appState={version:"",dappId:"",networkId:1,nodeSynced:true,mobilePosition:"top",desktopPosition:"bottomRight",darkMode:false,txApproveReminderTimeout:20000,txStallPendingTimeout:20000,txStallConfirmedTimeout:90000};var unsubscribe=app.subscribe(function(store){return $$invalidate("appState",appState=store)});// listen for screen resize events
window.addEventListener("resize",lodash_debounce(function(){if(window.outerWidth<450){if(!smallScreen){$$invalidate("smallScreen",smallScreen=true)}}else{if(smallScreen){$$invalidate("smallScreen",smallScreen=false)}}},300));var currentTime=Date.now();var intervalId=setInterval(function(){$$invalidate("currentTime",currentTime=Date.now())},1000);onDestroy(function(){clearInterval(intervalId);unsubscribe()});var formattedTime=formatTime(currentTime);var click_handler=function click_handler(_ref5){var notification=_ref5.notification;return notifications.remove(notification.id,notification.eventCode)};$$self.$$.update=function(){var $$dirty=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{appState:1,smallScreen:1,positioning:1};if($$dirty.appState||$$dirty.smallScreen||$$dirty.positioning){if(appState.desktopPosition&&!smallScreen){$$invalidate("positioning",positioning=appState.desktopPosition==="bottomRight"?"bottom: 0; right: 0;":appState.desktopPosition==="bottomLeft"?"left: 0; right: unset;":appState.desktopPosition==="topRight"?"top: 0;":"top: 0; bottom: unset; left: 0; right: unset;");$$invalidate("x",x=positioning&&positioning.includes("left")?-321:321);$$invalidate("y",y=0);if(appState.desktopPosition.includes("top")){$$invalidate("justifyContent",justifyContent="justify-content: unset;");$$invalidate("notificationMargin",notificationMargin="margin: 0.75rem 0 0 0;")}else{$$invalidate("justifyContent",justifyContent="justify-content: flex-end;");$$invalidate("notificationMargin",notificationMargin="margin: 0 0 0.75rem 0;")}}}if($$dirty.appState||$$dirty.smallScreen){if(appState.mobilePosition&&smallScreen){$$invalidate("positioning",positioning=appState.mobilePosition==="top"?"top: 0; bottom: unset;":"bottom: 0; top: unset;");$$invalidate("x",x=0);if(appState.mobilePosition==="top"){$$invalidate("y",y=-50);$$invalidate("justifyContent",justifyContent="justify-content: unset;");$$invalidate("notificationMargin",notificationMargin="margin: 0.75rem 0 0 0;")}else{$$invalidate("y",y=50);$$invalidate("justifyContent",justifyContent="justify-content: flex-end;");$$invalidate("notificationMargin",notificationMargin="margin: 0 0 0.75rem 0;")}}}if($$dirty.appState||$$dirty.smallScreen){if(!appState.desktopPosition&&!appState.mobilePosition){$$invalidate("x",x=smallScreen?0:321);$$invalidate("y",y=smallScreen?50:0);$$invalidate("notificationMargin",notificationMargin="margin: 0 0 0.75rem 0;");$$invalidate("justifyContent",justifyContent="justify-content: flex-end;");$$invalidate("positioning",positioning="bottom: 0; right: 0;")}}};return{positioning:positioning,x:x,y:y,notificationMargin:notificationMargin,justifyContent:justifyContent,currentTime:currentTime,formattedTime:formattedTime,$notifications:$notifications,$app:$app,click_handler:click_handler}}var Notify=/*#__PURE__*/function(_SvelteComponent9){_inherits(Notify,_SvelteComponent9);function Notify(options){var _this10;_classCallCheck(this,Notify);_this10=_possibleConstructorReturn(this,_getPrototypeOf(Notify).call(this));if(!document.getElementById("svelte-1jezb03-style"))add_css$7();init(_assertThisInitialized(_this10),options,instance$7,create_fragment$8,safe_not_equal,[]);return _this10}return Notify}(SvelteComponent);var bignumber=createCommonjsModule(function(module){(function(globalObject){/*
	 *      bignumber.js v9.0.0
	 *      A JavaScript library for arbitrary-precision arithmetic.
	 *      https://github.com/MikeMcl/bignumber.js
	 *      Copyright (c) 2019 Michael Mclaughlin <M8ch88l@gmail.com>
	 *      MIT Licensed.
	 *
	 *      BigNumber.prototype methods     |  BigNumber methods
	 *                                      |
	 *      absoluteValue            abs    |  clone
	 *      comparedTo                      |  config               set
	 *      decimalPlaces            dp     |      DECIMAL_PLACES
	 *      dividedBy                div    |      ROUNDING_MODE
	 *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT
	 *      exponentiatedBy          pow    |      RANGE
	 *      integerValue                    |      CRYPTO
	 *      isEqualTo                eq     |      MODULO_MODE
	 *      isFinite                        |      POW_PRECISION
	 *      isGreaterThan            gt     |      FORMAT
	 *      isGreaterThanOrEqualTo   gte    |      ALPHABET
	 *      isInteger                       |  isBigNumber
	 *      isLessThan               lt     |  maximum              max
	 *      isLessThanOrEqualTo      lte    |  minimum              min
	 *      isNaN                           |  random
	 *      isNegative                      |  sum
	 *      isPositive                      |
	 *      isZero                          |
	 *      minus                           |
	 *      modulo                   mod    |
	 *      multipliedBy             times  |
	 *      negated                         |
	 *      plus                            |
	 *      precision                sd     |
	 *      shiftedBy                       |
	 *      squareRoot               sqrt   |
	 *      toExponential                   |
	 *      toFixed                         |
	 *      toFormat                        |
	 *      toFraction                      |
	 *      toJSON                          |
	 *      toNumber                        |
	 *      toPrecision                     |
	 *      toString                        |
	 *      valueOf                         |
	 *
	 */var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,// 2^53 - 1
// MAX_INT32 = 0x7fffffff,                   // 2^31 - 1
POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,// EDITABLE
// The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and
// the arguments to toExponential, toFixed, toFormat, and toPrecision.
MAX=1E9;// 0 to MAX_INT32
/*
	   * Create and return a BigNumber constructor.
	   */function clone(configObject){var div,convertBase,parseNumeric,P=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},ONE=new BigNumber(1),//----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------
// The default values below must be integers within the inclusive ranges stated.
// The values can also be changed at run-time using BigNumber.set.
// The maximum number of decimal places for operations involving division.
DECIMAL_PLACES=20,// 0 to MAX
// The rounding mode used when rounding to the above decimal places, and when using
// toExponential, toFixed, toFormat and toPrecision, and round (default value).
// UP         0 Away from zero.
// DOWN       1 Towards zero.
// CEIL       2 Towards +Infinity.
// FLOOR      3 Towards -Infinity.
// HALF_UP    4 Towards nearest neighbour. If equidistant, up.
// HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.
// HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.
// HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.
// HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.
ROUNDING_MODE=4,// 0 to 8
// EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]
// The exponent value at and beneath which toString returns exponential notation.
// Number type: -7
TO_EXP_NEG=-7,// 0 to -MAX
// The exponent value at and above which toString returns exponential notation.
// Number type: 21
TO_EXP_POS=21,// 0 to MAX
// RANGE : [MIN_EXP, MAX_EXP]
// The minimum exponent value, beneath which underflow to zero occurs.
// Number type: -324  (5e-324)
MIN_EXP=-1e7,// -1 to -MAX
// The maximum exponent value, above which overflow to Infinity occurs.
// Number type:  308  (1.7976931348623157e+308)
// For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.
MAX_EXP=1e7,// 1 to MAX
// Whether to use cryptographically-secure random number generation, if available.
CRYPTO=false,// true or false
// The modulo mode used when calculating the modulus: a mod n.
// The quotient (q = a / n) is calculated according to the corresponding rounding mode.
// The remainder (r) is calculated as: r = a - n * q.
//
// UP        0 The remainder is positive if the dividend is negative, else is negative.
// DOWN      1 The remainder has the same sign as the dividend.
//             This modulo mode is commonly known as 'truncated division' and is
//             equivalent to (a % n) in JavaScript.
// FLOOR     3 The remainder has the same sign as the divisor (Python %).
// HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.
// EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).
//             The remainder is always positive.
//
// The truncated division, floored division, Euclidian division and IEEE 754 remainder
// modes are commonly used for the modulus operation.
// Although the other rounding modes can also be used, they may not give useful results.
MODULO_MODE=1,// 0 to 9
// The maximum number of significant digits of the result of the exponentiatedBy operation.
// If POW_PRECISION is 0, there will be unlimited significant digits.
POW_PRECISION=0,// 0 to MAX
// The format specification used by the BigNumber.prototype.toFormat method.
FORMAT={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",// non-breaking space
suffix:""},// The alphabet used for base conversion. It must be at least 2 characters long, with no '+',
// '-', '.', whitespace, or repeated character.
// '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'
ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz";//------------------------------------------------------------------------------------------
// CONSTRUCTOR
/*
	     * The BigNumber constructor and exported function.
	     * Create and return a new instance of a BigNumber object.
	     *
	     * v {number|string|BigNumber} A numeric value.
	     * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.
	     */function BigNumber(v,b){var alphabet,c,caseChanged,e,i,isNum,len,str,x=this;// Enable constructor call without `new`.
if(!(x instanceof BigNumber))return new BigNumber(v,b);if(b==null){if(v&&v._isBigNumber===true){x.s=v.s;if(!v.c||v.e>MAX_EXP){x.c=x.e=null}else if(v.e<MIN_EXP){x.c=[x.e=0]}else{x.e=v.e;x.c=v.c.slice()}return}if((isNum=typeof v=="number")&&v*0==0){// Use `1 / n` to handle minus zero also.
x.s=1/v<0?(v=-v,-1):1;// Fast path for integers, where n < 2147483648 (2**31).
if(v===~~v){for(e=0,i=v;i>=10;i/=10,e++){;}if(e>MAX_EXP){x.c=x.e=null}else{x.e=e;x.c=[v]}return}str=String(v)}else{if(!isNumeric.test(str=String(v)))return parseNumeric(x,str,isNum);x.s=str.charCodeAt(0)==45?(str=str.slice(1),-1):1}// Decimal point?
if((e=str.indexOf("."))>-1)str=str.replace(".","");// Exponential form?
if((i=str.search(/e/i))>0){// Determine exponent.
if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i)}else if(e<0){// Integer.
e=str.length}}else{// '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'
intCheck(b,2,ALPHABET.length,"Base");// Allow exponential notation to be used with base 10 argument, while
// also rounding to DECIMAL_PLACES as with other bases.
if(b==10){x=new BigNumber(v);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE)}str=String(v);if(isNum=typeof v=="number"){// Avoid potential interpretation of Infinity and NaN as base 44+ values.
if(v*0!=0)return parseNumeric(x,str,isNum,b);x.s=1/v<0?(str=str.slice(1),-1):1;// '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'
if(BigNumber.DEBUG&&str.replace(/^0\.0*|\./,"").length>15){throw Error(tooManyDigits+v)}}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1}alphabet=ALPHABET.slice(0,b);e=i=0;// Check that str is a valid base b number.
// Don't use RegExp, so alphabet can contain special characters.
for(len=str.length;i<len;i++){if(alphabet.indexOf(c=str.charAt(i))<0){if(c=="."){// If '.' is not the first character and it has not be found before.
if(i>e){e=len;continue}}else if(!caseChanged){// Allow e.g. hexadecimal 'FF' as well as 'ff'.
if(str==str.toUpperCase()&&(str=str.toLowerCase())||str==str.toLowerCase()&&(str=str.toUpperCase())){caseChanged=true;i=-1;e=0;continue}}return parseNumeric(x,String(v),isNum,b)}}// Prevent later check for length on converted number.
isNum=false;str=convertBase(str,b,10,x.s);// Decimal point?
if((e=str.indexOf("."))>-1)str=str.replace(".","");else e=str.length}// Determine leading zeros.
for(i=0;str.charCodeAt(i)===48;i++){;}// Determine trailing zeros.
for(len=str.length;str.charCodeAt(--len)===48;){;}if(str=str.slice(i,++len)){len-=i;// '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'
if(isNum&&BigNumber.DEBUG&&len>15&&(v>MAX_SAFE_INTEGER||v!==mathfloor(v))){throw Error(tooManyDigits+x.s*v)}// Overflow?
if((e=e-i-1)>MAX_EXP){// Infinity.
x.c=x.e=null;// Underflow?
}else if(e<MIN_EXP){// Zero.
x.c=[x.e=0]}else{x.e=e;x.c=[];// Transform base
// e is the base 10 exponent.
// i is where to slice str to get the first element of the coefficient array.
i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;// i < 1
if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE))}i=LOG_BASE-(str=str.slice(i)).length}else{i-=len}for(;i--;str+="0"){;}x.c.push(+str)}}else{// Zero.
x.c=[x.e=0]}}// CONSTRUCTOR PROPERTIES
BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;/*
	     * Configure infrequently-changing library-wide settings.
	     *
	     * Accept an object with the following optional properties (if the value of a property is
	     * a number, it must be an integer within the inclusive range stated):
	     *
	     *   DECIMAL_PLACES   {number}           0 to MAX
	     *   ROUNDING_MODE    {number}           0 to 8
	     *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]
	     *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]
	     *   CRYPTO           {boolean}          true or false
	     *   MODULO_MODE      {number}           0 to 9
	     *   POW_PRECISION       {number}           0 to MAX
	     *   ALPHABET         {string}           A string of two or more unique characters which does
	     *                                       not contain '.'.
	     *   FORMAT           {object}           An object with some of the following properties:
	     *     prefix                 {string}
	     *     groupSize              {number}
	     *     secondaryGroupSize     {number}
	     *     groupSeparator         {string}
	     *     decimalSeparator       {string}
	     *     fractionGroupSize      {number}
	     *     fractionGroupSeparator {string}
	     *     suffix                 {string}
	     *
	     * (The values assigned to the above FORMAT object properties are not checked for validity.)
	     *
	     * E.g.
	     * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })
	     *
	     * Ignore properties/parameters set to null or undefined, except for ALPHABET.
	     *
	     * Return an object with the properties current values.
	     */BigNumber.config=BigNumber.set=function(obj){var p,v;if(obj!=null){if(_typeof(obj)=="object"){// DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.
// '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'
if(obj.hasOwnProperty(p="DECIMAL_PLACES")){v=obj[p];intCheck(v,0,MAX,p);DECIMAL_PLACES=v}// ROUNDING_MODE {number} Integer, 0 to 8 inclusive.
// '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'
if(obj.hasOwnProperty(p="ROUNDING_MODE")){v=obj[p];intCheck(v,0,8,p);ROUNDING_MODE=v}// EXPONENTIAL_AT {number|number[]}
// Integer, -MAX to MAX inclusive or
// [integer -MAX to 0 inclusive, 0 to MAX inclusive].
// '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'
if(obj.hasOwnProperty(p="EXPONENTIAL_AT")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,0,p);intCheck(v[1],0,MAX,p);TO_EXP_NEG=v[0];TO_EXP_POS=v[1]}else{intCheck(v,-MAX,MAX,p);TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v)}}// RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or
// [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].
// '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'
if(obj.hasOwnProperty(p="RANGE")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,-1,p);intCheck(v[1],1,MAX,p);MIN_EXP=v[0];MAX_EXP=v[1]}else{intCheck(v,-MAX,MAX,p);if(v){MIN_EXP=-(MAX_EXP=v<0?-v:v)}else{throw Error(bignumberError+p+" cannot be zero: "+v)}}}// CRYPTO {boolean} true or false.
// '[BigNumber Error] CRYPTO not true or false: {v}'
// '[BigNumber Error] crypto unavailable'
if(obj.hasOwnProperty(p="CRYPTO")){v=obj[p];if(v===!!v){if(v){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=v}else{CRYPTO=!v;throw Error(bignumberError+"crypto unavailable")}}else{CRYPTO=v}}else{throw Error(bignumberError+p+" not true or false: "+v)}}// MODULO_MODE {number} Integer, 0 to 9 inclusive.
// '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'
if(obj.hasOwnProperty(p="MODULO_MODE")){v=obj[p];intCheck(v,0,9,p);MODULO_MODE=v}// POW_PRECISION {number} Integer, 0 to MAX inclusive.
// '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'
if(obj.hasOwnProperty(p="POW_PRECISION")){v=obj[p];intCheck(v,0,MAX,p);POW_PRECISION=v}// FORMAT {object}
// '[BigNumber Error] FORMAT not an object: {v}'
if(obj.hasOwnProperty(p="FORMAT")){v=obj[p];if(_typeof(v)=="object")FORMAT=v;else throw Error(bignumberError+p+" not an object: "+v)}// ALPHABET {string}
// '[BigNumber Error] ALPHABET invalid: {v}'
if(obj.hasOwnProperty(p="ALPHABET")){v=obj[p];// Disallow if only one character,
// or if it contains '+', '-', '.', whitespace, or a repeated character.
if(typeof v=="string"&&!/^.$|[+-.\s]|(.).*\1/.test(v)){ALPHABET=v}else{throw Error(bignumberError+p+" invalid: "+v)}}}else{// '[BigNumber Error] Object expected: {v}'
throw Error(bignumberError+"Object expected: "+obj)}}return{DECIMAL_PLACES:DECIMAL_PLACES,ROUNDING_MODE:ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO:CRYPTO,MODULO_MODE:MODULO_MODE,POW_PRECISION:POW_PRECISION,FORMAT:FORMAT,ALPHABET:ALPHABET}};/*
	     * Return true if v is a BigNumber instance, otherwise return false.
	     *
	     * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.
	     *
	     * v {any}
	     *
	     * '[BigNumber Error] Invalid BigNumber: {v}'
	     */BigNumber.isBigNumber=function(v){if(!v||v._isBigNumber!==true)return false;if(!BigNumber.DEBUG)return true;var i,n,c=v.c,e=v.e,s=v.s;out:if({}.toString.call(c)=="[object Array]"){if((s===1||s===-1)&&e>=-MAX&&e<=MAX&&e===mathfloor(e)){// If the first element is zero, the BigNumber value must be zero.
if(c[0]===0){if(e===0&&c.length===1)return true;break out}// Calculate number of digits that c[0] should have, based on the exponent.
i=(e+1)%LOG_BASE;if(i<1)i+=LOG_BASE;// Calculate number of digits of c[0].
//if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {
if(String(c[0]).length==i){for(i=0;i<c.length;i++){n=c[i];if(n<0||n>=BASE||n!==mathfloor(n))break out}// Last element cannot be zero, unless it is the only element.
if(n!==0)return true}}// Infinity/NaN
}else if(c===null&&e===null&&(s===null||s===1||s===-1)){return true}throw Error(bignumberError+"Invalid BigNumber: "+v)};/*
	     * Return a new BigNumber whose value is the maximum of the arguments.
	     *
	     * arguments {number|string|BigNumber}
	     */BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt)};/*
	     * Return a new BigNumber whose value is the minimum of the arguments.
	     *
	     * arguments {number|string|BigNumber}
	     */BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt)};/*
	     * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,
	     * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing
	     * zeros are produced).
	     *
	     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'
	     * '[BigNumber Error] crypto unavailable'
	     */BigNumber.random=function(){var pow2_53=9007199254740992;// Return a 53 bit integer n, where 0 <= n < 9007199254740992.
// Check if Math.random() produces more than 32 bits of randomness.
// If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.
// 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.
var random53bitInt=Math.random()*pow2_53&2097151?function(){return mathfloor(Math.random()*pow2_53)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(dp==null)dp=DECIMAL_PLACES;else intCheck(dp,0,MAX);k=mathceil(dp/LOG_BASE);if(CRYPTO){// Browsers supporting crypto.getRandomValues.
if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){// 53 bits:
// ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)
// 11111 11111111 11111111 11111111 11100000 00000000 00000000
// ((Math.pow(2, 32) - 1) >>> 11).toString(2)
//                                     11111 11111111 11111111
// 0x20000 is 2^21.
v=a[i]*131072+(a[i+1]>>>11);// Rejection sampling:
// 0 <= v < 9007199254740992
// Probability that v >= 9e15, is
// 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251
if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1]}else{// 0 <= v <= 8999999999999999
// 0 <= (v % 1e14) <= 99999999999999
c.push(v%1e14);i+=2}}i=k/2;// Node.js supporting crypto.randomBytes.
}else if(crypto.randomBytes){// buffer
a=crypto.randomBytes(k*=7);for(;i<k;){// 0x1000000000000 is 2^48, 0x10000000000 is 2^40
// 0x100000000 is 2^32, 0x1000000 is 2^24
// 11111 11111111 11111111 11111111 11111111 11111111 11111111
// 0 <= v < 9007199254740992
v=(a[i]&31)*281474976710656+a[i+1]*1099511627776+a[i+2]*4294967296+a[i+3]*16777216+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i)}else{// 0 <= (v % 1e14) <= 99999999999999
c.push(v%1e14);i+=7}}i=k/7}else{CRYPTO=false;throw Error(bignumberError+"crypto unavailable")}}// Use Math.random.
if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14}}k=c[--i];dp%=LOG_BASE;// Convert trailing digits to zeros according to dp.
if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v}// Remove trailing elements which are zero.
for(;c[i]===0;c.pop(),i--){;}// Zero?
if(i<0){c=[e=0]}else{// Remove leading elements which are zero and adjust exponent accordingly.
for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE){;}// Count the digits of the first element of c to determine leading zeros, and...
for(i=1,v=c[0];v>=10;v/=10,i++){;}// adjust the exponent accordingly.
if(i<LOG_BASE)e-=LOG_BASE-i}rand.e=e;rand.c=c;return rand}}();/*
	     * Return a BigNumber whose value is the sum of the arguments.
	     *
	     * arguments {number|string|BigNumber}
	     */BigNumber.sum=function(){var i=1,args=arguments,sum=new BigNumber(args[0]);for(;i<args.length;){sum=sum.plus(args[i++])}return sum};// PRIVATE FUNCTIONS
// Called by BigNumber and BigNumber.prototype.toString.
convertBase=function(){var decimal="0123456789";/*
	       * Convert string of baseIn to an array of numbers of baseOut.
	       * Eg. toBaseOut('255', 10, 16) returns [15, 15].
	       * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].
	       */function toBaseOut(str,baseIn,baseOut,alphabet){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn){;}arr[0]+=alphabet.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}// Convert a numeric string of baseIn to a numeric string of baseOut.
// If the caller is toString, we are converting from base 10 to baseOut.
// If the caller is BigNumber, we are converting from baseIn to base 10.
return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf("."),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;// Non-integer.
if(i>=0){k=POW_PRECISION;// Unlimited precision.
POW_PRECISION=0;str=str.replace(".","");y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;// Convert str as if an integer, then restore the fraction part by dividing the
// result by its base raised to a power.
y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,"0"),10,baseOut,decimal);y.e=y.c.length}// Convert the number as integer.
xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,decimal):(alphabet=decimal,ALPHABET));// xc now represents str as an integer and converted to baseOut. e is the exponent.
e=k=xc.length;// Remove trailing zeros.
for(;xc[--k]==0;xc.pop()){;}// Zero?
if(!xc[0])return alphabet.charAt(0);// Does str represent an integer? If so, no need for the division.
if(i<0){--e}else{x.c=xc;x.e=e;// The sign is needed for correct rounding.
x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e}// xc now represents str converted to baseOut.
// THe index of the rounding digit.
d=e+dp+1;// The rounding digit: the digit to the right of the digit that may be rounded up.
i=xc[d];// Look at the rounding digits and mode to determine whether to round up.
k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));// If the index of the rounding digit is not greater than zero, or xc represents
// zero, then the result of the base conversion is zero or, if rounding up, a value
// such as 0.00001.
if(d<1||!xc[0]){// 1^-dp or 0
str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0)}else{// Truncate xc to the required number of decimal places.
xc.length=d;// Round up?
if(r){// Rounding up may mean the previous digit has to be rounded up and so on.
for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc)}}}// Determine trailing zeros.
for(k=xc.length;!xc[--k];){;}// E.g. [4, 11, 15] becomes 4bf.
for(i=0,str="";i<=k;str+=alphabet.charAt(xc[i++])){;}// Add leading zeros, decimal point and trailing zeros as required.
str=toFixedPoint(str,e,alphabet.charAt(0))}// The caller will add the sign.
return str}}();// Perform division in the specified base. Called by div and convertBase.
div=function(){// Assume non-zero x and k.
function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base}if(carry)x=[carry].concat(x);return x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}}}return cmp}function subtract(a,b,aL,base){var i=0;// Subtract b from a.
for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}// Remove leading zeros.
for(;!a[0]&&a.length>1;a.splice(0,1)){;}}// x: dividend, y: divisor.
return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;// Either NaN, Infinity or 0?
if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(// Return NaN if either NaN, or both Infinity or 0.
!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:// Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.
xc&&xc[0]==0||!yc?s*0:s/0)}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0}// Result exponent may be one less then the current value of e.
// The coefficients of the BigNumbers from convertBase may have trailing zeros.
for(i=0;yc[i]==(xc[i]||0);i++){;}if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true}else{xL=xc.length;yL=yc.length;i=0;s+=2;// Normalise xc and yc so highest order digit of yc is >= base / 2.
n=mathfloor(base/(yc[0]+1));// Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.
// if (n > 1 || n++ == 1 && yc[0] < base / 2) {
if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length}xi=yL;rem=xc.slice(0,yL);remL=rem.length;// Add zeros to make remainder as long as divisor.
for(;remL<yL;rem[remL++]=0){;}yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;// Not necessary, but to prevent trial digit n > base, when using base 3.
// else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;
do{n=0;// Compare divisor and remainder.
cmp=compare(yc,rem,yL,remL);// If divisor < remainder.
if(cmp<0){// Calculate trial digit, n.
rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);// n is how many times the divisor goes into the current remainder.
n=mathfloor(rem0/yc0);//  Algorithm:
//  product = divisor multiplied by trial digit (n).
//  Compare product and remainder.
//  If product is greater than remainder:
//    Subtract divisor from product, decrement trial digit.
//  Subtract product from remainder.
//  If product was less than remainder at the last compare:
//    Compare new remainder and divisor.
//    If remainder is greater than divisor:
//      Subtract divisor from remainder, increment trial digit.
if(n>1){// n may be > base only when base is 3.
if(n>=base)n=base-1;// product = divisor * trial digit.
prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;// Compare product and remainder.
// If product > remainder then trial digit n too high.
// n is 1 too high about 5% of the time, and is not known to have
// ever been more than 1 too high.
while(compare(prod,rem,prodL,remL)==1){n--;// Subtract divisor from product.
subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1}}else{// n is 0 or 1, cmp is -1.
// If n is 0, there is no need to compare yc and rem again below,
// so change cmp to 1 to avoid it.
// If n is 1, leave cmp as -1, so yc and rem are compared again.
if(n==0){// divisor < remainder, so n must be at least 1.
cmp=n=1}// product = divisor
prod=yc.slice();prodL=prod.length}if(prodL<remL)prod=[0].concat(prod);// Subtract product from remainder.
subtract(rem,prod,remL,base);remL=rem.length;// If product was < remainder.
if(cmp==-1){// Compare divisor and new remainder.
// If divisor < new remainder, subtract divisor from remainder.
// Trial digit n too low.
// n is 1 too low about 5% of the time, and very rarely 2 too low.
while(compare(yc,rem,yL,remL)<1){n++;// Subtract divisor from remainder.
subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length}}}else if(cmp===0){n++;rem=[0]}// else cmp === 1 and n will be 0
// Add the next digit, n, to the result array.
qc[i++]=n;// Update the remainder.
if(rem[0]){rem[remL++]=xc[xi]||0}else{rem=[xc[xi]];remL=1}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;// Leading zero?
if(!qc[0])qc.splice(0,1)}if(base==BASE){// To calculate q.e, first get the number of digits of qc[0].
for(i=1,s=qc[0];s>=10;s/=10,i++){;}round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more);// Caller is convertBase.
}else{q.e=e;q.r=+more}return q}}();/*
	     * Return a string representing the value of BigNumber n in fixed-point or exponential
	     * notation rounded to the specified decimal places or significant digits.
	     *
	     * n: a BigNumber.
	     * i: the index of the last digit required (i.e. the digit that may be rounded up).
	     * rm: the rounding mode.
	     * id: 1 (toExponential) or 2 (toPrecision).
	     */function format(n,i,rm,id){var c0,e,ne,len,str;if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=id==1||id==2&&(ne<=TO_EXP_NEG||ne>=TO_EXP_POS)?toExponential(str,ne):toFixedPoint(str,ne,"0")}else{n=round(new BigNumber(n),i,rm);// n.e may have changed if the value was rounded up.
e=n.e;str=coeffToString(n.c);len=str.length;// toPrecision returns exponential notation if the number of significant digits
// specified is less than the number of digits necessary to represent the integer
// part of the value in fixed-point notation.
// Exponential notation.
if(id==1||id==2&&(i<=e||e<=TO_EXP_NEG)){// Append zeros?
for(;len<i;str+="0",len++){;}str=toExponential(str,e);// Fixed-point notation.
}else{i-=ne;str=toFixedPoint(str,e,"0");// Append zeros?
if(e+1>len){if(--i>0)for(str+=".";i--;str+="0"){;}}else{i+=e-len;if(i>0){if(e+1==len)str+=".";for(;i--;str+="0"){;}}}}}return n.s<0&&c0?"-"+str:str}// Handle BigNumber.max and BigNumber.min.
function maxOrMin(args,method){var n,i=1,m=new BigNumber(args[0]);for(;i<args.length;i++){n=new BigNumber(args[i]);// If any number is NaN, return NaN.
if(!n.s){m=n;break}else if(method.call(m,n)){m=n}}return m}/*
	     * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.
	     * Called by minus, plus and times.
	     */function normalise(n,c,e){var i=1,j=c.length;// Remove trailing zeros.
for(;!c[--j];c.pop()){;}// Calculate the base 10 exponent. First get the number of digits of c[0].
for(j=c[0];j>=10;j/=10,i++){;}// Overflow?
if((e=i+e*LOG_BASE-1)>MAX_EXP){// Infinity.
n.c=n.e=null;// Underflow?
}else if(e<MIN_EXP){// Zero.
n.c=[n.e=0]}else{n.e=e;n.c=c}return n}// Handle values that fail the validity test in BigNumber.
parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,"");// No exception on Infinity or NaN.
if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1}else{if(!isNum){// basePrefix = /^(-?)0([xbo])(?=\w[\w.]*$)/i
s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=="x"?16:p2=="b"?2:8;return!b||b==base?p1:m});if(b){base=b;// E.g. '1.' to '1', '.1' to '0.1'
s=s.replace(dotAfter,"$1").replace(dotBefore,"0.$1")}if(str!=s)return new BigNumber(s,base)}// '[BigNumber Error] Not a number: {n}'
// '[BigNumber Error] Not a base {b} number: {n}'
if(BigNumber.DEBUG){throw Error(bignumberError+"Not a"+(b?" base "+b:"")+" number: "+str)}// NaN
x.s=null}x.c=x.e=null}}();/*
	     * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.
	     * If r is truthy, it is known that there are more digits after the rounding digit.
	     */function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;// if x is not Infinity or NaN...
if(xc){// rd is the rounding digit, i.e. the digit after the digit that may be rounded up.
// n is a base 1e14 number, the value of the element of array x.c containing rd.
// ni is the index of n within x.c.
// d is the number of digits of n.
// i is the index of rd within n including leading zeros.
// j is the actual index of rd within n (if < 0, rd is a leading zero).
out:{// Get the number of digits of the first element of xc.
for(d=1,k=xc[0];k>=10;k/=10,d++){;}i=sd-d;// If the rounding digit is in the first element of xc...
if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];// Get the rounding digit at index j of n.
rd=n/pows10[d-j-1]%10|0}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){// Needed by sqrt.
for(;xc.length<=ni;xc.push(0)){;}n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1}else{break out}}else{n=k=xc[ni];// Get the number of digits of n.
for(d=1;k>=10;k/=10,d++){;}// Get the index of rd within n.
i%=LOG_BASE;// Get the index of rd within n, adjusted for leading zeros.
// The number of leading zeros of n is given by LOG_BASE - d.
j=i-LOG_BASE+d;// Get the rounding digit at index j of n.
rd=j<0?0:n/pows10[d-j-1]%10|0}}r=r||sd<0||// Are there any non-zero digits after the rounding digit?
// The expression  n % pows10[d - j - 1]  returns all digits of n to the right
// of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.
xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&// Check whether the digit to the left of the rounding digit is odd.
(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){// Convert sd to decimal places.
sd-=x.e+1;// 1, 0.1, 0.01, 0.001, 0.0001 etc.
xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0}else{// Zero.
xc[0]=x.e=0}return x}// Remove excess digits.
if(i==0){xc.length=ni;k=1;ni--}else{xc.length=ni+1;k=pows10[LOG_BASE-i];// E.g. 56700 becomes 56000 if 7 is the rounding digit.
// j > 0 means i > number of leading zeros of n.
xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0}// Round up?
if(r){for(;;){// If the digit to be rounded up is in the first element of xc...
if(ni==0){// i will be the length of xc[0] before k is added.
for(i=1,j=xc[0];j>=10;j/=10,i++){;}j=xc[0]+=k;for(k=1;j>=10;j/=10,k++){;}// if i != k the length has increased.
if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1}break}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1}}}// Remove trailing zeros.
for(i=xc.length;xc[--i]===0;xc.pop()){;}}// Overflow? Infinity.
if(x.e>MAX_EXP){x.c=x.e=null;// Underflow? Zero.
}else if(x.e<MIN_EXP){x.c=[x.e=0]}}return x}function valueOf(n){var str,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,"0");return n.s<0?"-"+str:str}// PROTOTYPE/INSTANCE METHODS
/*
	     * Return a new BigNumber whose value is the absolute value of this BigNumber.
	     */P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x};/*
	     * Return
	     *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),
	     *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),
	     *   0 if they have the same value,
	     *   or null if the value of either is NaN.
	     */P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b))};/*
	     * If dp is undefined or null or true or false, return the number of decimal places of the
	     * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.
	     *
	     * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this
	     * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or
	     * ROUNDING_MODE if rm is omitted.
	     *
	     * [dp] {number} Decimal places: integer, 0 to MAX inclusive.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'
	     */P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(dp!=null){intCheck(dp,0,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),dp+x.e+1,rm)}if(!(c=x.c))return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;// Subtract the number of trailing zeros of the last number.
if(v=c[v])for(;v%10==0;v/=10,n--){;}if(n<0)n=0;return n};/*
	     *  n / 0 = I
	     *  n / N = N
	     *  n / I = 0
	     *  0 / n = 0
	     *  0 / 0 = N
	     *  0 / N = N
	     *  0 / I = 0
	     *  N / n = N
	     *  N / 0 = N
	     *  N / N = N
	     *  N / I = N
	     *  I / n = I
	     *  I / 0 = I
	     *  I / N = N
	     *  I / I = N
	     *
	     * Return a new BigNumber whose value is the value of this BigNumber divided by the value of
	     * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.
	     */P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE)};/*
	     * Return a new BigNumber whose value is the integer part of dividing the value of this
	     * BigNumber by the value of BigNumber(y, b).
	     */P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1)};/*
	     * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.
	     *
	     * If m is present, return the result modulo m.
	     * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.
	     * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.
	     *
	     * The modular power operation works efficiently when x, n, and m are integers, otherwise it
	     * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.
	     *
	     * n {number|string|BigNumber} The exponent. An integer.
	     * [m] {number|string|BigNumber} The modulus.
	     *
	     * '[BigNumber Error] Exponent not an integer: {n}'
	     */P.exponentiatedBy=P.pow=function(n,m){var half,isModExp,i,k,more,nIsBig,nIsNeg,nIsOdd,y,x=this;n=new BigNumber(n);// Allow NaN and Infinity, but not other non-integers.
if(n.c&&!n.isInteger()){throw Error(bignumberError+"Exponent not an integer: "+valueOf(n))}if(m!=null)m=new BigNumber(m);// Exponent of MAX_SAFE_INTEGER is 15.
nIsBig=n.e>14;// If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.
if(!x.c||!x.c[0]||x.c[0]==1&&!x.e&&x.c.length==1||!n.c||!n.c[0]){// The sign of the result of pow when x is negative depends on the evenness of n.
// If +n overflows to Infinity, the evenness of n would be not be known.
y=new BigNumber(Math.pow(+valueOf(x),nIsBig?2-isOdd(n):+valueOf(n)));return m?y.mod(m):y}nIsNeg=n.s<0;if(m){// x % m returns NaN if abs(m) is zero, or m is NaN.
if(m.c?!m.c[0]:!m.s)return new BigNumber(NaN);isModExp=!nIsNeg&&x.isInteger()&&m.isInteger();if(isModExp)x=x.mod(m);// Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.
// Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.
}else if(n.e>9&&(x.e>0||x.e<-1||(x.e==0// [1, 240000000]
?x.c[0]>1||nIsBig&&x.c[1]>=24e7// [80000000000000]  [99999750000000]
:x.c[0]<8e13||nIsBig&&x.c[0]<=9999975e7))){// If x is negative and n is odd, k = -0, else k = 0.
k=x.s<0&&isOdd(n)?-0:0;// If x >= 1, k = Infinity.
if(x.e>-1)k=1/k;// If n is negative return 0, else return Infinity.
return new BigNumber(nIsNeg?1/k:k)}else if(POW_PRECISION){// Truncating each coefficient array to a length of k after each multiplication
// equates to truncating significant digits to POW_PRECISION + [28, 41],
// i.e. there will be a minimum of 28 guard digits retained.
k=mathceil(POW_PRECISION/LOG_BASE+2)}if(nIsBig){half=new BigNumber(0.5);if(nIsNeg)n.s=1;nIsOdd=isOdd(n)}else{i=Math.abs(+valueOf(n));nIsOdd=i%2}y=new BigNumber(ONE);// Performs 54 loop iterations for n of 9007199254740991.
for(;;){if(nIsOdd){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k}else if(isModExp){y=y.mod(m);//y = y.minus(div(y, m, 0, MODULO_MODE).times(m));
}}if(i){i=mathfloor(i/2);if(i===0)break;nIsOdd=i%2}else{n=n.times(half);round(n,n.e+1,1);if(n.e>14){nIsOdd=isOdd(n)}else{i=+valueOf(n);if(i===0)break;nIsOdd=i%2}}x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k}else if(isModExp){x=x.mod(m);//x = x.minus(div(x, m, 0, MODULO_MODE).times(m));
}}if(isModExp)return y;if(nIsNeg)y=ONE.div(y);return m?y.mod(m):k?round(y,POW_PRECISION,ROUNDING_MODE,more):y};/*
	     * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer
	     * using rounding mode rm, or ROUNDING_MODE if rm is omitted.
	     *
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'
	     */P.integerValue=function(rm){var n=new BigNumber(this);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(n,n.e+1,rm)};/*
	     * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),
	     * otherwise return false.
	     */P.isEqualTo=P.eq=function(y,b){return compare(this,new BigNumber(y,b))===0};/*
	     * Return true if the value of this BigNumber is a finite number, otherwise return false.
	     */P.isFinite=function(){return!!this.c};/*
	     * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),
	     * otherwise return false.
	     */P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0};/*
	     * Return true if the value of this BigNumber is greater than or equal to the value of
	     * BigNumber(y, b), otherwise return false.
	     */P.isGreaterThanOrEqualTo=P.gte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===1||b===0};/*
	     * Return true if the value of this BigNumber is an integer, otherwise return false.
	     */P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2};/*
	     * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),
	     * otherwise return false.
	     */P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0};/*
	     * Return true if the value of this BigNumber is less than or equal to the value of
	     * BigNumber(y, b), otherwise return false.
	     */P.isLessThanOrEqualTo=P.lte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===-1||b===0};/*
	     * Return true if the value of this BigNumber is NaN, otherwise return false.
	     */P.isNaN=function(){return!this.s};/*
	     * Return true if the value of this BigNumber is negative, otherwise return false.
	     */P.isNegative=function(){return this.s<0};/*
	     * Return true if the value of this BigNumber is positive, otherwise return false.
	     */P.isPositive=function(){return this.s>0};/*
	     * Return true if the value of this BigNumber is 0 or -0, otherwise return false.
	     */P.isZero=function(){return!!this.c&&this.c[0]==0};/*
	     *  n - 0 = n
	     *  n - N = N
	     *  n - I = -I
	     *  0 - n = -n
	     *  0 - 0 = 0
	     *  0 - N = N
	     *  0 - I = -I
	     *  N - n = N
	     *  N - 0 = N
	     *  N - N = N
	     *  N - I = N
	     *  I - n = I
	     *  I - 0 = I
	     *  I - N = N
	     *  I - I = N
	     *
	     * Return a new BigNumber whose value is the value of this BigNumber minus the value of
	     * BigNumber(y, b).
	     */P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;// Either NaN?
if(!a||!b)return new BigNumber(NaN);// Signs differ?
if(a!=b){y.s=-b;return x.plus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){// Either Infinity?
if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);// Either zero?
if(!xc[0]||!yc[0]){// Return y if y is non-zero, x if x is non-zero, or zero if both are zero.
return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:// IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity
ROUNDING_MODE==3?-0:0)}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();// Determine which is the bigger number.
if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc}else{ye=xe;t=yc}t.reverse();// Prepend zeros to equalise exponents.
for(b=a;b--;t.push(0)){;}t.reverse()}else{// Exponents equal. Check digit by digit.
j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}// x < y? Point xc to the array of the bigger number.
if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);// Append zeros to xc if shorter.
// No need to add zeros to yc if shorter as subtract only needs to start at yc.length.
if(b>0)for(;b--;xc[i++]=0){;}b=BASE-1;// Subtract yc from xc.
for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b){;}--xc[i];xc[j]+=BASE}xc[j]-=yc[j]}// Remove leading zeros and adjust exponent accordingly.
for(;xc[0]==0;xc.splice(0,1),--ye){;}// Zero?
if(!xc[0]){// Following IEEE 754 (2008) 6.3,
// n - n = +0  but  n - n = -0  when rounding towards -Infinity.
y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y}// No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity
// for finite x and y.
return normalise(y,xc,ye)};/*
	     *   n % 0 =  N
	     *   n % N =  N
	     *   n % I =  n
	     *   0 % n =  0
	     *  -0 % n = -0
	     *   0 % 0 =  N
	     *   0 % N =  N
	     *   0 % I =  0
	     *   N % n =  N
	     *   N % 0 =  N
	     *   N % N =  N
	     *   N % I =  N
	     *   I % n =  N
	     *   I % 0 =  N
	     *   I % N =  N
	     *   I % I =  N
	     *
	     * Return a new BigNumber whose value is the value of this BigNumber modulo the value of
	     * BigNumber(y, b). The result depends on the value of MODULO_MODE.
	     */P.modulo=P.mod=function(y,b){var q,s,x=this;y=new BigNumber(y,b);// Return NaN if x is Infinity or NaN, or y is NaN or zero.
if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN);// Return x if y is Infinity or x is zero.
}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x)}if(MODULO_MODE==9){// Euclidian division: q = sign(y) * floor(x / abs(y))
// r = x - qy    where  0 <= r < abs(y)
s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s}else{q=div(x,y,0,MODULO_MODE)}y=x.minus(q.times(y));// To match JavaScript %, ensure sign of zero is sign of dividend.
if(!y.c[0]&&MODULO_MODE==1)y.s=x.s;return y};/*
	     *  n * 0 = 0
	     *  n * N = N
	     *  n * I = I
	     *  0 * n = 0
	     *  0 * 0 = 0
	     *  0 * N = N
	     *  0 * I = N
	     *  N * n = N
	     *  N * 0 = N
	     *  N * N = N
	     *  N * I = N
	     *  I * n = I
	     *  I * 0 = N
	     *  I * N = N
	     *  I * I = I
	     *
	     * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value
	     * of BigNumber(y, b).
	     */P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;// Either NaN, Infinity or 0?
if(!xc||!yc||!xc[0]||!yc[0]){// Return NaN if either is NaN, or one is 0 and the other is Infinity.
if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null}else{y.s*=x.s;// Return Infinity if either is Infinity.
if(!xc||!yc){y.c=y.e=null;// Return 0 if either is 0.
}else{y.c=[0];y.e=0}}return y}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;// Ensure xc points to longer array and xcL to its length.
if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;// Initialise the result array with zeros.
for(i=xcL+ycL,zc=[];i--;zc.push(0)){;}base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base}zc[j]=c}if(c){++e}else{zc.splice(0,1)}return normalise(y,zc,e)};/*
	     * Return a new BigNumber whose value is the value of this BigNumber negated,
	     * i.e. multiplied by -1.
	     */P.negated=function(){var x=new BigNumber(this);x.s=-x.s||null;return x};/*
	     *  n + 0 = n
	     *  n + N = N
	     *  n + I = I
	     *  0 + n = n
	     *  0 + 0 = 0
	     *  0 + N = N
	     *  0 + I = I
	     *  N + n = N
	     *  N + 0 = N
	     *  N + N = N
	     *  N + I = N
	     *  I + n = I
	     *  I + 0 = I
	     *  I + N = N
	     *  I + I = I
	     *
	     * Return a new BigNumber whose value is the value of this BigNumber plus the value of
	     * BigNumber(y, b).
	     */P.plus=function(y,b){var t,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;// Either NaN?
if(!a||!b)return new BigNumber(NaN);// Signs differ?
if(a!=b){y.s=-b;return x.minus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){// Return Infinity if either Infinity.
if(!xc||!yc)return new BigNumber(a/0);// Either zero?
// Return y if y is non-zero, x if x is non-zero, or zero if both are zero.
if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0)}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();// Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.
if(a=xe-ye){if(a>0){ye=xe;t=yc}else{a=-a;t=xc}t.reverse();for(;a--;t.push(0)){;}t.reverse()}a=xc.length;b=yc.length;// Point xc to the longer array, and b to the shorter length.
if(a-b<0)t=yc,yc=xc,xc=t,b=a;// Only start adding at yc.length - 1 as the further digits of xc can be ignored.
for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE}if(a){xc=[a].concat(xc);++ye}// No need to check for zero, as +x + +y != 0 && -x + -y != 0
// ye = MAX_EXP + 1 possible
return normalise(y,xc,ye)};/*
	     * If sd is undefined or null or true or false, return the number of significant digits of
	     * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.
	     * If sd is true include integer-part trailing zeros in the count.
	     *
	     * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this
	     * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or
	     * ROUNDING_MODE if rm is omitted.
	     *
	     * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.
	     *                     boolean: whether to count integer-part trailing zeros: true or false.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'
	     */P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(sd!=null&&sd!==!!sd){intCheck(sd,1,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),sd,rm)}if(!(c=x.c))return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){// Subtract the number of trailing zeros of the last element.
for(;v%10==0;v/=10,n--){;}// Add the number of digits of the first element.
for(v=c[0];v>=10;v/=10,n++){;}}if(sd&&x.e+1>n)n=x.e+1;return n};/*
	     * Return a new BigNumber whose value is the value of this BigNumber shifted by k places
	     * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.
	     *
	     * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'
	     */P.shiftedBy=function(k){intCheck(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);return this.times("1e"+k)};/*
	     *  sqrt(-n) =  N
	     *  sqrt(N) =  N
	     *  sqrt(-I) =  N
	     *  sqrt(I) =  I
	     *  sqrt(0) =  0
	     *  sqrt(-0) = -0
	     *
	     * Return a new BigNumber whose value is the square root of the value of this BigNumber,
	     * rounded according to DECIMAL_PLACES and ROUNDING_MODE.
	     */P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber("0.5");// Negative/NaN/Infinity/zero?
if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0)}// Initial estimate.
s=Math.sqrt(+valueOf(x));// Math.sqrt underflow/overflow?
// Pass x to Math.sqrt as integer, then adjust the exponent of the result.
if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+="0";s=Math.sqrt(+n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="1e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new BigNumber(n)}else{r=new BigNumber(s+"")}// Check for zero.
// r could be zero if MIN_EXP is changed after the this value was created.
// This would cause a division by zero (x/t) and hence Infinity below, which would cause
// coeffToString to throw.
if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;// Newton-Raphson iteration.
for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){// The exponent of r may here be one less than the final result exponent,
// e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits
// are indexed correctly.
if(r.e<e)--s;n=n.slice(s-3,s+1);// The 4th rounding digit may be in error by -1 so if the 4 rounding digits
// are 9999 or 4999 (i.e. approaching a rounding boundary) continue the
// iteration.
if(n=="9999"||!rep&&n=="4999"){// On the first iteration only, check to see if rounding up gives the
// exact result as the nines may infinitely repeat.
if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break}}dp+=4;s+=4;rep=1}else{// If rounding digits are null, 0{0,4} or 50{0,3}, check for exact
// result. If not, then there are further digits and m will be truthy.
if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){// Truncate to the first rounding digit.
round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x)}break}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m)};/*
	     * Return a string representing the value of this BigNumber in exponential notation and
	     * rounded using ROUNDING_MODE to dp fixed decimal places.
	     *
	     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'
	     */P.toExponential=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp++}return format(this,dp,rm,1)};/*
	     * Return a string representing the value of this BigNumber in fixed-point notation rounding
	     * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.
	     *
	     * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',
	     * but e.g. (-0.00001).toFixed(0) is '-0'.
	     *
	     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'
	     */P.toFixed=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp=dp+this.e+1}return format(this,dp,rm)};/*
	     * Return a string representing the value of this BigNumber in fixed-point notation rounded
	     * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties
	     * of the format or FORMAT object (see BigNumber.set).
	     *
	     * The formatting object may contain some or all of the properties shown below.
	     *
	     * FORMAT = {
	     *   prefix: '',
	     *   groupSize: 3,
	     *   secondaryGroupSize: 0,
	     *   groupSeparator: ',',
	     *   decimalSeparator: '.',
	     *   fractionGroupSize: 0,
	     *   fractionGroupSeparator: '\xA0',      // non-breaking space
	     *   suffix: ''
	     * };
	     *
	     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     * [format] {object} Formatting options. See FORMAT pbject above.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'
	     * '[BigNumber Error] Argument not an object: {format}'
	     */P.toFormat=function(dp,rm,format){var str,x=this;if(format==null){if(dp!=null&&rm&&_typeof(rm)=="object"){format=rm;rm=null}else if(dp&&_typeof(dp)=="object"){format=dp;dp=rm=null}else{format=FORMAT}}else if(_typeof(format)!="object"){throw Error(bignumberError+"Argument not an object: "+format)}str=x.toFixed(dp,rm);if(x.c){var i,arr=str.split("."),g1=+format.groupSize,g2=+format.secondaryGroupSize,groupSeparator=format.groupSeparator||"",intPart=arr[0],fractionPart=arr[1],isNeg=x.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1)}if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart="-"+intPart}str=fractionPart?intPart+(format.decimalSeparator||"")+((g2=+format.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+(format.fractionGroupSeparator||"")):fractionPart):intPart}return(format.prefix||"")+str+(format.suffix||"")};/*
	     * Return an array of two BigNumbers representing the value of this BigNumber as a simple
	     * fraction with an integer numerator and an integer denominator.
	     * The denominator will be a positive non-zero value less than or equal to the specified
	     * maximum denominator. If a maximum denominator is not specified, the denominator will be
	     * the lowest value necessary to represent the number exactly.
	     *
	     * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.
	     *
	     * '[BigNumber Error] Argument {not an integer|out of range} : {md}'
	     */P.toFraction=function(md){var d,d0,d1,d2,e,exp,n,n0,n1,q,r,s,x=this,xc=x.c;if(md!=null){n=new BigNumber(md);// Throw if md is less than one or is not an integer, unless it is Infinity.
if(!n.isInteger()&&(n.c||n.s!==1)||n.lt(ONE)){throw Error(bignumberError+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+valueOf(n))}}if(!xc)return new BigNumber(x);d=new BigNumber(ONE);n1=d0=new BigNumber(ONE);d1=n0=new BigNumber(ONE);s=coeffToString(xc);// Determine initial denominator.
// d is a power of 10 and the minimum max denominator that specifies the value exactly.
e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.comparedTo(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);// n0 = d1 = 0
n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.comparedTo(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e=e*2;// Determine which fraction is closer to x, n0/d0 or n1/d1
r=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1,d1]:[n0,d0];MAX_EXP=exp;return r};/*
	     * Return the value of this BigNumber converted to a number primitive.
	     */P.toNumber=function(){return+valueOf(this)};/*
	     * Return a string representing the value of this BigNumber rounded to sd significant digits
	     * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits
	     * necessary to represent the integer part of the value in fixed-point notation, then use
	     * exponential notation.
	     *
	     * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.
	     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
	     *
	     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'
	     */P.toPrecision=function(sd,rm){if(sd!=null)intCheck(sd,1,MAX);return format(this,sd,rm,2)};/*
	     * Return a string representing the value of this BigNumber in base b, or base 10 if b is
	     * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and
	     * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent
	     * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than
	     * TO_EXP_NEG, return exponential notation.
	     *
	     * [b] {number} Integer, 2 to ALPHABET.length inclusive.
	     *
	     * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'
	     */P.toString=function(b){var str,n=this,s=n.s,e=n.e;// Infinity or NaN?
if(e===null){if(s){str="Infinity";if(s<0)str="-"+str}else{str="NaN"}}else{if(b==null){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(coeffToString(n.c),e):toFixedPoint(coeffToString(n.c),e,"0")}else if(b===10){n=round(new BigNumber(n),DECIMAL_PLACES+e+1,ROUNDING_MODE);str=toFixedPoint(coeffToString(n.c),n.e,"0")}else{intCheck(b,2,ALPHABET.length,"Base");str=convertBase(toFixedPoint(coeffToString(n.c),e,"0"),10,b,s,true)}if(s<0&&n.c[0])str="-"+str}return str};/*
	     * Return as toString, but do not accept a base argument, and include the minus sign for
	     * negative zero.
	     */P.valueOf=P.toJSON=function(){return valueOf(this)};P._isBigNumber=true;if(configObject!=null)BigNumber.set(configObject);return BigNumber}// PRIVATE HELPER FUNCTIONS
// These functions don't need access to variables,
// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.
function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1}// Return a coefficient array as a string of base 10 digits.
function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+"";for(;i<j;){s=a[i++]+"";z=LOG_BASE-s.length;for(;z--;s="0"+s){;}r+=s}// Determine trailing zeros.
for(j=r.length;r.charCodeAt(--j)===48;){;}return r.slice(0,j+1||1)}// Compare the value of BigNumbers x and y.
function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;// Either NaN?
if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];// Either zero?
if(a||b)return a?b?0:-j:i;// Signs differ?
if(i!=j)return i;a=i<0;b=k==l;// Either Infinity?
if(!xc||!yc)return b?0:!xc^a?1:-1;// Compare exponents.
if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;// Compare digit by digit.
for(i=0;i<j;i++){if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1}// Compare lengths.
return k==l?0:k>l^a?1:-1}/*
	   * Check that n is a primitive number, an integer, and in range, otherwise throw.
	   */function intCheck(n,min,max,name){if(n<min||n>max||n!==mathfloor(n)){throw Error(bignumberError+(name||"Argument")+(typeof n=="number"?n<min||n>max?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}}// Assumes finite n.
function isOdd(n){var k=n.c.length-1;return bitFloor(n.e/LOG_BASE)==k&&n.c[k]%2!=0}function toExponential(str,e){return(str.length>1?str.charAt(0)+"."+str.slice(1):str)+(e<0?"e":"e+")+e}function toFixedPoint(str,e,z){var len,zs;// Negative exponent?
if(e<0){// Prepend zeros.
for(zs=z+".";++e;zs+=z){;}str=zs+str;// Positive exponent
}else{len=str.length;// Append zeros.
if(++e>len){for(zs=z,e-=len;--e;zs+=z){;}str+=zs}else if(e<len){str=str.slice(0,e)+"."+str.slice(e)}}return str}// EXPORT
BigNumber=clone();BigNumber["default"]=BigNumber.BigNumber=BigNumber;// AMD.
if(module.exports){module.exports=BigNumber;// Browser.
}else{if(!globalObject){globalObject=typeof self!="undefined"&&self?self:window}globalObject.BigNumber=BigNumber}})(commonjsGlobal)});function eventToType(eventCode){switch(eventCode){case"txSent":case"txPool":case"txSpeedUp":case"txCancel":return"pending";case"txRequest":case"txRepeat":case"txAwaitingApproval":case"txConfirmReminder":case"txStallPending":case"txStallConfirmed":return"hint";case"txError":case"txSendFail":case"txFailed":case"txDropped":case"nsfFail":case"txUnderpriced":return"error";case"txConfirmed":return"success";default:return"hint";}}function typeToDismissTimeout(type){switch(type){case"success":case"hint":return 4000;default:return 0;}}// subscribe to the formatter store
var formatter;format.subscribe(function(store){return formatter=store});function createNotification(details){var customization=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var id=details.id,hash=details.hash,startTime=details.startTime,eventCode=details.eventCode,direction=details.direction,counterparty=details.counterparty,value=details.value,asset=details.asset;var type=eventToType(eventCode);var key="".concat(id,"-").concat(_typeof(customization)==="object"&&customization.eventCode||eventCode);var counterpartyShortened=counterparty&&counterparty.substring(0,4)+"..."+counterparty.substring(counterparty.length-4);var formatterOptions=counterparty&&value?["watched.".concat(eventCode),{verb:eventCode==="txConfirmed"?direction==="incoming"?"received":"sent":direction==="incoming"?"receiving":"sending",formattedValue:new bignumber(value).div(new bignumber("1000000000000000000")).toString(10),preposition:direction==="incoming"?"from":"to",counterpartyShortened:counterpartyShortened,asset:asset}]:["transaction.".concat(eventCode)];var internationalizedMessage=formatter.apply(void 0,formatterOptions);var noMessageAvailable=internationalizedMessage===formatterOptions[0];var message=noMessageAvailable?defaultNotifyMessages.en[counterparty?"watched":"transaction"][eventCode||""]:internationalizedMessage;var notificationObject={id:id||hash,type:type,key:key,startTime:startTime,eventCode:eventCode,message:message,autoDismiss:typeToDismissTimeout(_typeof(customization)==="object"&&customization.type||type)};if(_typeof(customization)==="object"){notificationObject=_objectSpread({},notificationObject,{},customization)}notifications.add(notificationObject)}function validateType(_ref6){var name=_ref6.name,value=_ref6.value,type=_ref6.type,optional=_ref6.optional,customValidation=_ref6.customValidation;if(!optional&&typeof value==="undefined"){throw new Error("\"".concat(name,"\" is required"))}if(typeof value!=="undefined"&&(type==="array"?Array.isArray(type):_typeof(value)!==type)){throw new Error("\"".concat(name,"\" must be of type: ").concat(type,", received type: ").concat(_typeof(value)," from value: ").concat(value))}if(typeof value!=="undefined"&&customValidation&&!customValidation(value)){throw new Error("\"".concat(value,"\" is not a valid \"").concat(name,"\""))}}function validateInit(init){validateType({name:"init",value:init,type:"object"});var dappId=init.dappId,networkId=init.networkId,transactionHandler=init.transactionHandler;validateType({name:"dappId",value:dappId,type:"string"});validateType({name:"networkId",value:networkId,type:"number"});validateType({name:"transactionHandler",value:transactionHandler,type:"function",optional:true})}function stringOrNumber(val){return typeof val==="string"||typeof val==="number"}function validateTransactionOptions(options){validateType({name:"transaction options",value:options,type:"object"});var sendTransaction=options.sendTransaction,estimateGas=options.estimateGas,gasPrice=options.gasPrice,balance=options.balance,contractCall=options.contractCall,txDetails=options.txDetails;validateType({name:"sendTransaction",value:sendTransaction,type:"function",optional:true});validateType({name:"estimateGas",value:estimateGas,type:"function",optional:true});validateType({name:"gasPrice",value:gasPrice,type:"function",optional:true});validateType({name:"balance",value:balance,type:"string",optional:true});validateType({name:"contractCall",value:contractCall,type:"object",optional:true});if(contractCall){var methodName=contractCall.methodName,params=contractCall.params;validateType({name:"methodName",value:methodName,type:"string",optional:true});validateType({name:"params",value:params,type:"array",optional:true})}validateType({name:"txDetails",value:txDetails,type:"object",optional:true});if(txDetails){var to=txDetails.to,value=txDetails.value,from=txDetails.from;validateType({name:"to",value:to,type:"string",optional:true,customValidation:isAddress});if(typeof value!=="undefined"&&!stringOrNumber(value)){throw new Error("\"value\" must be of type: string | number, received type: ".concat(_typeof(value)," from value: ").concat(value))}validateType({name:"from",value:from,type:"string",optional:true,customValidation:isAddress})}}function validateNotificationObject(notification){validateType({name:"notification",value:notification,type:"object"});if(_typeof(notification)!=="object")return;var eventCode=notification.eventCode,type=notification.type,message=notification.message,autoDismiss=notification.autoDismiss,onclick=notification.onclick;validateType({name:"eventCode",value:eventCode,type:"string",optional:true});validateType({name:"type",value:type,type:"string",optional:true,customValidation:validNotificationType});validateType({name:"message",value:message,type:"string"});validateType({name:"autoDismiss",value:autoDismiss,type:"number",optional:true});validateType({name:"onclick",value:onclick,type:"function",optional:true})}function validateConfig(config){validateType({name:"config",value:config,type:"object"});var mobilePosition=config.mobilePosition,desktopPosition=config.desktopPosition,darkMode=config.darkMode,notifyMessages=config.notifyMessages,clientLocale=config.clientLocale,txApproveReminderTimeout=config.txApproveReminderTimeout,txStallPendingTimeout=config.txStallPendingTimeout,txStallConfirmedTimeout=config.txStallConfirmedTimeout;validateType({name:"mobilePosition",value:mobilePosition,type:"string",optional:true,customValidation:validMobilePosition});validateType({name:"desktopPosition",value:desktopPosition,type:"string",optional:true,customValidation:validDesktopPosition});validateType({name:"darkMode",value:darkMode,type:"boolean",optional:true});validateType({name:"notifyMessages",value:notifyMessages,type:"object",optional:true});if(notifyMessages){Object.keys(notifyMessages).forEach(function(locale){validateType({name:locale,value:notifyMessages[locale],type:"object"});var _notifyMessages$local=notifyMessages[locale],transaction=_notifyMessages$local.transaction,watched=_notifyMessages$local.watched;validateType({name:"notifyMessages.".concat(locale,".transaction"),value:transaction,type:"object"});validateType({name:"notifyMessages.".concat(locale,".watched"),value:watched,type:"object"})})}validateType({name:"clientLocale",value:clientLocale,type:"string",optional:true});validateType({name:"txApproveReminderTimeout",value:txApproveReminderTimeout,type:"number",optional:true});validateType({name:"txStallPendingTimeout",value:txStallPendingTimeout,type:"number",optional:true});validateType({name:"txStallConfirmedTimeout",value:txStallConfirmedTimeout,type:"number",optional:true})}function validNotificationType(type){switch(type){case"hint":case"pending":case"error":case"success":return true;default:return false;}}function validMobilePosition(position){return position==="top"||position==="bottom"}function validDesktopPosition(position){switch(position){case"bottomLeft":case"bottomRight":case"topLeft":case"topRight":return true;default:return false;}}function isAddress(address){return /^(0x)?[0-9a-fA-F]{40}$/.test(address)}/**
	 * lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="npm" -o ./`
	 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */ /** Used as references for various `Number` constants. */var MAX_SAFE_INTEGER=9007199254740991;/** `Object#toString` result references. */var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]";/** Used to detect unsigned integer values. */var reIsUint=/^(?:0|[1-9]\d*)$/;/**
	 * A faster alternative to `Function#apply`, this function invokes `func`
	 * with the `this` binding of `thisArg` and the arguments of `args`.
	 *
	 * @private
	 * @param {Function} func The function to invoke.
	 * @param {*} thisArg The `this` binding of `func`.
	 * @param {Array} args The arguments to invoke `func` with.
	 * @returns {*} Returns the result of `func`.
	 */function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args)}/**
	 * The base implementation of `_.times` without support for iteratee shorthands
	 * or max array length checks.
	 *
	 * @private
	 * @param {number} n The number of times to invoke `iteratee`.
	 * @param {Function} iteratee The function invoked per iteration.
	 * @returns {Array} Returns the array of results.
	 */function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}/** Used for built-in method references. */var objectProto$1=Object.prototype;/** Used to check objects for own properties. */var hasOwnProperty=objectProto$1.hasOwnProperty;/**
	 * Used to resolve the
	 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
	 * of values.
	 */var objectToString$1=objectProto$1.toString;/** Built-in value references. */var propertyIsEnumerable=objectProto$1.propertyIsEnumerable;/* Built-in method references for those with the same name as other `lodash` methods. */var nativeMax$1=Math.max;/**
	 * Creates an array of the enumerable property names of the array-like `value`.
	 *
	 * @private
	 * @param {*} value The value to query.
	 * @param {boolean} inherited Specify returning inherited property names.
	 * @returns {Array} Returns the array of property names.
	 */function arrayLikeKeys(value,inherited){// Safari 8.1 makes `arguments.callee` enumerable in strict mode.
// Safari 9 makes `arguments.length` enumerable in strict mode.
var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[];var length=result.length,skipIndexes=!!length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isIndex$1(key,length)))){result.push(key)}}return result}/**
	 * Used by `_.defaults` to customize its `_.assignIn` use.
	 *
	 * @private
	 * @param {*} objValue The destination value.
	 * @param {*} srcValue The source value.
	 * @param {string} key The key of the property to assign.
	 * @param {Object} object The parent object of `objValue`.
	 * @returns {*} Returns the value to assign.
	 */function assignInDefaults(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto$1[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}/**
	 * Assigns `value` to `key` of `object` if the existing value is not equivalent
	 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
	 * for equality comparisons.
	 *
	 * @private
	 * @param {Object} object The object to modify.
	 * @param {string} key The key of the property to assign.
	 * @param {*} value The value to assign.
	 */function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){object[key]=value}}/**
	 * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
	 *
	 * @private
	 * @param {Object} object The object to query.
	 * @returns {Array} Returns the array of property names.
	 */function baseKeysIn(object){if(!isObject$2(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}/**
	 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
	 *
	 * @private
	 * @param {Function} func The function to apply a rest parameter to.
	 * @param {number} [start=func.length-1] The start position of the rest parameter.
	 * @returns {Function} Returns the new function.
	 */function baseRest(func,start){start=nativeMax$1(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax$1(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=array;return apply(func,this,otherArgs)}}/**
	 * Copies properties of `source` to `object`.
	 *
	 * @private
	 * @param {Object} source The object to copy properties from.
	 * @param {Array} props The property identifiers to copy.
	 * @param {Object} [object={}] The object to copy properties to.
	 * @param {Function} [customizer] The function to customize copied values.
	 * @returns {Object} Returns `object`.
	 */function copyObject(source,props,object,customizer){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;assignValue(object,key,newValue===undefined?source[key]:newValue)}return object}/**
	 * Creates a function like `_.assign`.
	 *
	 * @private
	 * @param {Function} assigner The function to assign values.
	 * @returns {Function} Returns the new assigner function.
	 */function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}/**
	 * Checks if `value` is a valid array-like index.
	 *
	 * @private
	 * @param {*} value The value to check.
	 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
	 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
	 */function isIndex$1(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}/**
	 * Checks if the given arguments are from an iteratee call.
	 *
	 * @private
	 * @param {*} value The potential iteratee value argument.
	 * @param {*} index The potential iteratee index or key argument.
	 * @param {*} object The potential iteratee object argument.
	 * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
	 *  else `false`.
	 */function isIterateeCall(value,index,object){if(!isObject$2(object)){return false}var type=_typeof(index);if(type=="number"?isArrayLike(object)&&isIndex$1(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}/**
	 * Checks if `value` is likely a prototype object.
	 *
	 * @private
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
	 */function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$1;return value===proto}/**
	 * This function is like
	 * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
	 * except that it includes inherited enumerable properties.
	 *
	 * @private
	 * @param {Object} object The object to query.
	 * @returns {Array} Returns the array of property names.
	 */function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}/**
	 * Performs a
	 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
	 * comparison between two values to determine if they are equivalent.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to compare.
	 * @param {*} other The other value to compare.
	 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
	 * @example
	 *
	 * var object = { 'a': 1 };
	 * var other = { 'a': 1 };
	 *
	 * _.eq(object, object);
	 * // => true
	 *
	 * _.eq(object, other);
	 * // => false
	 *
	 * _.eq('a', 'a');
	 * // => true
	 *
	 * _.eq('a', Object('a'));
	 * // => false
	 *
	 * _.eq(NaN, NaN);
	 * // => true
	 */function eq(value,other){return value===other||value!==value&&other!==other}/**
	 * Checks if `value` is likely an `arguments` object.
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
	 *  else `false`.
	 * @example
	 *
	 * _.isArguments(function() { return arguments; }());
	 * // => true
	 *
	 * _.isArguments([1, 2, 3]);
	 * // => false
	 */function isArguments(value){// Safari 8.1 makes `arguments.callee` enumerable in strict mode.
return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString$1.call(value)==argsTag)}/**
	 * Checks if `value` is classified as an `Array` object.
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
	 * @example
	 *
	 * _.isArray([1, 2, 3]);
	 * // => true
	 *
	 * _.isArray(document.body.children);
	 * // => false
	 *
	 * _.isArray('abc');
	 * // => false
	 *
	 * _.isArray(_.noop);
	 * // => false
	 */var isArray=Array.isArray;/**
	 * Checks if `value` is array-like. A value is considered array-like if it's
	 * not a function and has a `value.length` that's an integer greater than or
	 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
	 * @example
	 *
	 * _.isArrayLike([1, 2, 3]);
	 * // => true
	 *
	 * _.isArrayLike(document.body.children);
	 * // => true
	 *
	 * _.isArrayLike('abc');
	 * // => true
	 *
	 * _.isArrayLike(_.noop);
	 * // => false
	 */function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}/**
	 * This method is like `_.isArrayLike` except that it also checks if `value`
	 * is an object.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is an array-like object,
	 *  else `false`.
	 * @example
	 *
	 * _.isArrayLikeObject([1, 2, 3]);
	 * // => true
	 *
	 * _.isArrayLikeObject(document.body.children);
	 * // => true
	 *
	 * _.isArrayLikeObject('abc');
	 * // => false
	 *
	 * _.isArrayLikeObject(_.noop);
	 * // => false
	 */function isArrayLikeObject(value){return isObjectLike$1(value)&&isArrayLike(value)}/**
	 * Checks if `value` is classified as a `Function` object.
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
	 * @example
	 *
	 * _.isFunction(_);
	 * // => true
	 *
	 * _.isFunction(/abc/);
	 * // => false
	 */function isFunction(value){// The use of `Object#toString` avoids issues with the `typeof` operator
// in Safari 8-9 which returns 'object' for typed array and other constructors.
var tag=isObject$2(value)?objectToString$1.call(value):"";return tag==funcTag||tag==genTag}/**
	 * Checks if `value` is a valid array-like length.
	 *
	 * **Note:** This method is loosely based on
	 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
	 * @example
	 *
	 * _.isLength(3);
	 * // => true
	 *
	 * _.isLength(Number.MIN_VALUE);
	 * // => false
	 *
	 * _.isLength(Infinity);
	 * // => false
	 *
	 * _.isLength('3');
	 * // => false
	 */function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}/**
	 * Checks if `value` is the
	 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
	 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
	 *
	 * @static
	 * @memberOf _
	 * @since 0.1.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
	 * @example
	 *
	 * _.isObject({});
	 * // => true
	 *
	 * _.isObject([1, 2, 3]);
	 * // => true
	 *
	 * _.isObject(_.noop);
	 * // => true
	 *
	 * _.isObject(null);
	 * // => false
	 */function isObject$2(value){var type=_typeof(value);return!!value&&(type=="object"||type=="function")}/**
	 * Checks if `value` is object-like. A value is object-like if it's not `null`
	 * and has a `typeof` result of "object".
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @category Lang
	 * @param {*} value The value to check.
	 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
	 * @example
	 *
	 * _.isObjectLike({});
	 * // => true
	 *
	 * _.isObjectLike([1, 2, 3]);
	 * // => true
	 *
	 * _.isObjectLike(_.noop);
	 * // => false
	 *
	 * _.isObjectLike(null);
	 * // => false
	 */function isObjectLike$1(value){return!!value&&_typeof(value)=="object"}/**
	 * This method is like `_.assignIn` except that it accepts `customizer`
	 * which is invoked to produce the assigned values. If `customizer` returns
	 * `undefined`, assignment is handled by the method instead. The `customizer`
	 * is invoked with five arguments: (objValue, srcValue, key, object, source).
	 *
	 * **Note:** This method mutates `object`.
	 *
	 * @static
	 * @memberOf _
	 * @since 4.0.0
	 * @alias extendWith
	 * @category Object
	 * @param {Object} object The destination object.
	 * @param {...Object} sources The source objects.
	 * @param {Function} [customizer] The function to customize assigned values.
	 * @returns {Object} Returns `object`.
	 * @see _.assignWith
	 * @example
	 *
	 * function customizer(objValue, srcValue) {
	 *   return _.isUndefined(objValue) ? srcValue : objValue;
	 * }
	 *
	 * var defaults = _.partialRight(_.assignInWith, customizer);
	 *
	 * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });
	 * // => { 'a': 1, 'b': 2 }
	 */var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});/**
	 * Assigns own and inherited enumerable string keyed properties of source
	 * objects to the destination object for all destination properties that
	 * resolve to `undefined`. Source objects are applied from left to right.
	 * Once a property is set, additional values of the same property are ignored.
	 *
	 * **Note:** This method mutates `object`.
	 *
	 * @static
	 * @since 0.1.0
	 * @memberOf _
	 * @category Object
	 * @param {Object} object The destination object.
	 * @param {...Object} [sources] The source objects.
	 * @returns {Object} Returns `object`.
	 * @see _.defaultsDeep
	 * @example
	 *
	 * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });
	 * // => { 'a': 1, 'b': 2 }
	 */var defaults=baseRest(function(args){args.push(undefined,assignInDefaults);return apply(assignInWith,undefined,args)});/**
	 * Creates an array of the own and inherited enumerable property names of `object`.
	 *
	 * **Note:** Non-object values are coerced to objects.
	 *
	 * @static
	 * @memberOf _
	 * @since 3.0.0
	 * @category Object
	 * @param {Object} object The object to query.
	 * @returns {Array} Returns the array of property names.
	 * @example
	 *
	 * function Foo() {
	 *   this.a = 1;
	 *   this.b = 2;
	 * }
	 *
	 * Foo.prototype.c = 3;
	 *
	 * _.keysIn(new Foo);
	 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
	 */function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}var lodash_defaults=defaults;var dist=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var SHOULD_RECONNECT_FALSE_MESSAGE="Provided shouldReconnect() returned false. Closing permanently.";var SHOULD_RECONNECT_PROMISE_FALSE_MESSAGE="Provided shouldReconnect() resolved to false. Closing permanently.";var SturdyWebSocket=/** @class */function(){function SturdyWebSocket(url,protocolsOrOptions,options){this.url=url;this.onclose=null;this.onerror=null;this.onmessage=null;this.onopen=null;this.ondown=null;this.onreopen=null;this.CONNECTING=SturdyWebSocket.CONNECTING;this.OPEN=SturdyWebSocket.OPEN;this.CLOSING=SturdyWebSocket.CLOSING;this.CLOSED=SturdyWebSocket.CLOSED;this.hasBeenOpened=false;this.isClosed=false;this.messageBuffer=[];this.nextRetryTime=0;this.reconnectCount=0;this.lastKnownExtensions="";this.lastKnownProtocol="";this.listeners={};if(protocolsOrOptions==null||typeof protocolsOrOptions==="string"||Array.isArray(protocolsOrOptions)){this.protocols=protocolsOrOptions}else{options=protocolsOrOptions}this.options=lodash_defaults({},options,SturdyWebSocket.DEFAULT_OPTIONS);if(!this.options.wsConstructor){if(typeof WebSocket!=="undefined"){this.options.wsConstructor=WebSocket}else{throw new Error("WebSocket not present in global scope and no "+"wsConstructor option was provided.")}}this.openNewWebSocket()}Object.defineProperty(SturdyWebSocket.prototype,"binaryType",{get:function get(){return this.binaryTypeInternal||"blob"},set:function set(binaryType){this.binaryTypeInternal=binaryType;if(this.ws){this.ws.binaryType=binaryType}},enumerable:true,configurable:true});Object.defineProperty(SturdyWebSocket.prototype,"bufferedAmount",{get:function get(){var sum=this.ws?this.ws.bufferedAmount:0;var hasUnknownAmount=false;this.messageBuffer.forEach(function(data){var byteLength=getDataByteLength(data);if(byteLength!=null){sum+=byteLength}else{hasUnknownAmount=true}});if(hasUnknownAmount){this.debugLog("Some buffered data had unknown length. bufferedAmount()"+" return value may be below the correct amount.")}return sum},enumerable:true,configurable:true});Object.defineProperty(SturdyWebSocket.prototype,"extensions",{get:function get(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:true,configurable:true});Object.defineProperty(SturdyWebSocket.prototype,"protocol",{get:function get(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:true,configurable:true});Object.defineProperty(SturdyWebSocket.prototype,"readyState",{get:function get(){return this.isClosed?SturdyWebSocket.CLOSED:SturdyWebSocket.OPEN},enumerable:true,configurable:true});SturdyWebSocket.prototype.close=function(code,reason){if(this.ws){this.ws.close(code,reason)}this.shutdown();this.debugLog("WebSocket permanently closed by client.")};SturdyWebSocket.prototype.send=function(data){if(this.ws&&this.ws.readyState===this.OPEN){this.ws.send(data)}else{this.messageBuffer.push(data)}};SturdyWebSocket.prototype.addEventListener=function(type,listener){if(!this.listeners[type]){this.listeners[type]=[]}this.listeners[type].push(listener)};SturdyWebSocket.prototype.dispatchEvent=function(event){return this.dispatchEventOfType(event.type,event)};SturdyWebSocket.prototype.removeEventListener=function(type,listener){if(this.listeners[type]){this.listeners[type]=this.listeners[type].filter(function(l){return l!==listener})}};SturdyWebSocket.prototype.openNewWebSocket=function(){var _this=this;if(this.isClosed){return}var _a=this.options,connectTimeout=_a.connectTimeout,wsConstructor=_a.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var ws=new wsConstructor(this.url,this.protocols);ws.onclose=function(event){return _this.handleClose(event)};ws.onerror=function(event){return _this.handleError(event)};ws.onmessage=function(event){return _this.handleMessage(event)};ws.onopen=function(event){return _this.handleOpen(event)};this.connectTimeoutId=setTimeout(function(){// If this is running, we still haven't opened the websocket.
// Kill it so we can try again.
_this.clearConnectTimeout();ws.close()},connectTimeout);this.ws=ws};SturdyWebSocket.prototype.handleOpen=function(event){var _this=this;if(!this.ws||this.isClosed){return}var allClearResetTime=this.options.allClearResetTime;this.debugLog("WebSocket opened.");if(this.binaryTypeInternal!=null){this.ws.binaryType=this.binaryTypeInternal}else{this.binaryTypeInternal=this.ws.binaryType}this.clearConnectTimeout();if(this.hasBeenOpened){this.dispatchEventOfType("reopen",event)}else{this.dispatchEventOfType("open",event);this.hasBeenOpened=true}this.messageBuffer.forEach(function(message){return _this.send(message)});this.messageBuffer=[];this.allClearTimeoutId=setTimeout(function(){_this.clearAllClearTimeout();_this.nextRetryTime=0;_this.reconnectCount=0;var openTime=allClearResetTime/1000|0;_this.debugLog("WebSocket remained open for "+openTime+" seconds. Resetting"+" retry time and count.")},allClearResetTime)};SturdyWebSocket.prototype.handleMessage=function(event){if(this.isClosed){return}this.dispatchEventOfType("message",event)};SturdyWebSocket.prototype.handleClose=function(event){var _this=this;if(this.isClosed){return}var _a=this.options,maxReconnectAttempts=_a.maxReconnectAttempts,shouldReconnect=_a.shouldReconnect;this.clearConnectTimeout();this.clearAllClearTimeout();if(this.ws){this.lastKnownExtensions=this.ws.extensions;this.lastKnownProtocol=this.ws.protocol;this.ws=undefined}this.dispatchEventOfType("down",event);if(this.reconnectCount>=maxReconnectAttempts){this.stopReconnecting(event,this.getTooManyFailedReconnectsMessage());return}var willReconnect=shouldReconnect(event);if(typeof willReconnect==="boolean"){this.handleWillReconnect(willReconnect,event,SHOULD_RECONNECT_FALSE_MESSAGE)}else{willReconnect.then(function(willReconnectResolved){if(_this.isClosed){return}_this.handleWillReconnect(willReconnectResolved,event,SHOULD_RECONNECT_PROMISE_FALSE_MESSAGE)})}};SturdyWebSocket.prototype.handleError=function(event){this.dispatchEventOfType("error",event);this.debugLog("WebSocket encountered an error.")};SturdyWebSocket.prototype.handleWillReconnect=function(willReconnect,event,denialReason){if(willReconnect){this.reconnect()}else{this.stopReconnecting(event,denialReason)}};SturdyWebSocket.prototype.reconnect=function(){var _this=this;var _a=this.options,minReconnectDelay=_a.minReconnectDelay,maxReconnectDelay=_a.maxReconnectDelay,reconnectBackoffFactor=_a.reconnectBackoffFactor;this.reconnectCount++;var retryTime=this.nextRetryTime;this.nextRetryTime=Math.max(minReconnectDelay,Math.min(this.nextRetryTime*reconnectBackoffFactor,maxReconnectDelay));setTimeout(function(){return _this.openNewWebSocket()},retryTime);var retryTimeSeconds=retryTime/1000|0;this.debugLog("WebSocket was closed. Re-opening in "+retryTimeSeconds+" seconds.")};SturdyWebSocket.prototype.stopReconnecting=function(event,debugReason){this.debugLog(debugReason);this.shutdown();this.dispatchEventOfType("close",event)};SturdyWebSocket.prototype.shutdown=function(){this.isClosed=true;this.clearAllTimeouts();this.messageBuffer=[]};SturdyWebSocket.prototype.clearAllTimeouts=function(){this.clearConnectTimeout();this.clearAllClearTimeout()};SturdyWebSocket.prototype.clearConnectTimeout=function(){if(this.connectTimeoutId!=null){clearTimeout(this.connectTimeoutId);this.connectTimeoutId=undefined}};SturdyWebSocket.prototype.clearAllClearTimeout=function(){if(this.allClearTimeoutId!=null){clearTimeout(this.allClearTimeoutId);this.allClearTimeoutId=undefined}};SturdyWebSocket.prototype.dispatchEventOfType=function(type,event){var _this=this;switch(type){case"close":if(this.onclose){this.onclose(event)}break;case"error":if(this.onerror){this.onerror(event)}break;case"message":if(this.onmessage){this.onmessage(event)}break;case"open":if(this.onopen){this.onopen(event)}break;case"down":if(this.ondown){this.ondown(event)}break;case"reopen":if(this.onreopen){this.onreopen(event)}break;}if(type in this.listeners){this.listeners[type].slice().forEach(function(listener){return _this.callListener(listener,event)})}return!event||!event.defaultPrevented};SturdyWebSocket.prototype.callListener=function(listener,event){if(typeof listener==="function"){listener.call(this,event)}else{listener.handleEvent.call(this,event)}};SturdyWebSocket.prototype.debugLog=function(message){if(this.options.debug){// tslint:disable-next-line:no-console
console.log(message)}};SturdyWebSocket.prototype.getTooManyFailedReconnectsMessage=function(){var maxReconnectAttempts=this.options.maxReconnectAttempts;return"Failed to reconnect after "+maxReconnectAttempts+" "+pluralize("attempt",maxReconnectAttempts)+". Closing permanently."};SturdyWebSocket.DEFAULT_OPTIONS={allClearResetTime:5000,connectTimeout:5000,debug:false,minReconnectDelay:1000,maxReconnectDelay:30000,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function shouldReconnect(){return true},wsConstructor:undefined};SturdyWebSocket.CONNECTING=0;SturdyWebSocket.OPEN=1;SturdyWebSocket.CLOSING=2;SturdyWebSocket.CLOSED=3;return SturdyWebSocket}();exports["default"]=SturdyWebSocket;function getDataByteLength(data){if(typeof data==="string"){// UTF-16 strings use two bytes per character.
return 2*data.length}else if(data instanceof ArrayBuffer){return data.byteLength}else if(data instanceof Blob){return data.size}else{return undefined}}function pluralize(s,n){return n===1?s:s+"s"}});var SturdyWebSocket=unwrapExports(dist);/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var _assign$=function __assign$1(){_assign$=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign$.apply(this,arguments)};var version="0.2.3";var session={socket:null,pendingSocketConnection:false,socketConnection:false,networkId:1,dappId:"",connectionId:"",clients:[],status:{nodeSynced:true,connected:false}};function createEmitter$1(){return{listeners:{},on:function on(eventCode,listener){// check if valid eventCode
switch(eventCode){case"txSent":case"txPool":case"txConfirmed":case"txSpeedUp":case"txCancel":case"txFailed":case"all":break;default:throw new Error(eventCode+" is not a valid event code, for a list of valid event codes see: https://github.com/blocknative/sdk");}// check that listener is a function
if(typeof listener!=="function"){throw new Error("Listener must be a function")}// add listener for the eventCode
this.listeners[eventCode]=listener},emit:function emit(state){if(this.listeners[state.eventCode]){return this.listeners[state.eventCode](state)}if(this.listeners.all){return this.listeners.all(state)}}}}function createEventLog(msg){var dappId=session.dappId,networkId=session.networkId;return JSON.stringify(_assign$({timeStamp:new Date,dappId:dappId,version:version,blockchain:{system:"ethereum",network:networkName(networkId)}},msg))}function networkName(id){switch(id){case 1:return"main";case 3:return"ropsten";case 4:return"rinkeby";case 5:return"goerli";case 42:return"kovan";default:return"local";}}function serverEcho(eventCode){switch(eventCode){case"txRequest":case"nsfFail":case"txRepeat":case"txAwaitingApproval":case"txConfirmReminder":case"txSendFail":case"txError":case"txUnderPriced":case"txSent":return true;default:return false;}}function last(arr){return arr.reverse()[0]}function sendMessage(msg){session.socket.send(createEventLog(msg))}function handleMessage(msg){var _a=JSON.parse(msg.data),status=_a.status,reason=_a.reason,event=_a.event,nodeSyncStatus=_a.nodeSyncStatus,connectionId=_a.connectionId;if(connectionId){if(typeof window!=="undefined"){window.localStorage.setItem("connectionId",connectionId)}else{session.connectionId=connectionId}}// handle node sync status change
if(nodeSyncStatus!==undefined&&nodeSyncStatus.blockchain==="ethereum"&&nodeSyncStatus.network===networkName(session.networkId)){session.status.nodeSynced=nodeSyncStatus.synced}// handle any errors from the server
if(status==="error"){if(reason.includes("not a valid API key")){var errorObj=new Error(reason);throw errorObj}if(reason.includes("network not supported")){var errorObj=new Error(reason);throw errorObj}if(reason.includes("maximum allowed amount")){var errorObj=new Error(reason);throw errorObj}}if(event&&event.transaction){var transaction_1=event.transaction,eventCode=event.eventCode,contractCall=event.contractCall;// flatten in to one object
var newState_1=_assign$(_assign$({},transaction_1),{eventCode:eventCode,contractCall:contractCall});// ignore server echo messages
if(serverEcho(eventCode)){return}// handle change of hash in speedup and cancel events
if(eventCode==="txSpeedUp"||eventCode==="txCancel"){session.clients.forEach(function(client){client.transactions=client.transactions.map(function(tx){if(tx.hash===transaction_1.originalHash){// reassign hash parameter in transaction queue to new hash
tx.hash=transaction_1.hash}return tx})})}var watchedAddress_1=transaction_1.watchedAddress&&transaction_1.watchedAddress.toLowerCase();if(watchedAddress_1){session.clients.forEach(function(client){var transactionHandlers=client.transactionHandlers,accounts=client.accounts;var accountObj=accounts.find(function(ac){return ac.address===watchedAddress_1});// no accountObj then this client isn't concerned with this notification
if(!accountObj)return;var emitterResult=accountObj&&last(accountObj.emitters.map(function(emitter){return emitter.emit(newState_1)}));transactionHandlers.forEach(function(handler){return handler({transaction:newState_1,emitterResult:emitterResult})})})}else{session.clients.forEach(function(client){var transactionHandlers=client.transactionHandlers,transactions=client.transactions;var transactionObj=transactions.find(function(tx){return tx.hash===transaction_1.hash});// no transactionObj then this client isn't concerned with this notification
if(!transactionObj)return;var emitterResult=transactionObj&&transactionObj.emitter.emit(newState_1);transactionHandlers.forEach(function(handler){return handler({transaction:newState_1,emitterResult:emitterResult})})})}}}function validateType$1(options){var name=options.name,value=options.value,type=options.type,optional=options.optional,customValidation=options.customValidation;if(!optional&&typeof value==="undefined"){throw new Error("\""+name+"\" is required")}if(typeof value!=="undefined"&&(type==="array"?Array.isArray(type):_typeof(value)!==type)){throw new Error("\""+name+"\" must be of type: "+type+", received type: "+_typeof(value)+" from value: "+value)}if(typeof value!=="undefined"&&customValidation&&!customValidation(value)){throw new Error("\""+value+"\" is not a valid \""+name+"\"")}}function validateOptions(options){validateType$1({name:"sdk options",value:options,type:"object"});var dappId=options.dappId,networkId=options.networkId,transactionHandler=options.transactionHandler,apiUrl=options.apiUrl,ws=options.ws;validateType$1({name:"dappId",value:dappId,type:"string"});validateType$1({name:"networkId",value:networkId,type:"number"});validateType$1({name:"transactionHandler",value:transactionHandler,type:"function",optional:true});validateType$1({name:"apiUrl",value:apiUrl,type:"string",optional:true});validateType$1({name:"ws",value:ws,type:"function",optional:true})}function validateTransaction(clientIndex,hash,id){validateType$1({name:"clientIndex",value:clientIndex,type:"number"});validateType$1({name:"hash",value:hash,type:"string",customValidation:validTxHash});validateType$1({name:"id",value:id,type:"string",optional:true})}function validateAccount(clientIndex,address){validateType$1({name:"clientIndex",value:clientIndex,type:"number"});validateType$1({name:"address",value:address,type:"string",customValidation:isAddress$1})}function validateEvent(eventObj){validateType$1({name:"eventObj",value:eventObj,type:"object"});var eventCode=eventObj.eventCode,categoryCode=eventObj.categoryCode,transaction=eventObj.transaction,wallet=eventObj.wallet,contract=eventObj.contract;validateType$1({name:"eventCode",value:eventCode,type:"string"});validateType$1({name:"categoryCode",value:categoryCode,type:"string"});validateType$1({name:"transaction",value:transaction,type:"object",optional:true});if(transaction){var id=transaction.id,to=transaction.to,from=transaction.from,value=transaction.value,gas=transaction.gas,gasPrice=transaction.gasPrice,nonce=transaction.nonce,status_1=transaction.status,startTime=transaction.startTime;validateType$1({name:"id",value:id,type:"string",optional:true});validateType$1({name:"to",value:to,type:"string",optional:true,customValidation:isAddress$1});validateType$1({name:"from",value:from,type:"string",optional:true,customValidation:isAddress$1});validateType$1({name:"value",value:value,type:"string",optional:true});validateType$1({name:"gas",value:gas,type:"string",optional:true});validateType$1({name:"gasPrice",value:gasPrice,type:"string",optional:true});validateType$1({name:"nonce",value:nonce,type:"number",optional:true});validateType$1({name:"status",value:status_1,type:"string",optional:true});validateType$1({name:"startTime",value:startTime,type:"number",optional:true})}validateType$1({name:"wallet",value:wallet,type:"object",optional:true});if(wallet){var balance=wallet.balance;validateType$1({name:"balance",value:balance,type:"string",optional:true})}validateType$1({name:"contract",value:contract,type:"object",optional:true});if(contract){var methodName=contract.methodName,parameters=contract.parameters;validateType$1({name:"methodName",value:methodName,type:"string",optional:true});validateType$1({name:"parameters",value:parameters,type:"array",optional:true})}}function isAddress$1(address){return /^(0x)?[0-9a-fA-F]{40}$/.test(address)}function validTxHash(hash){return /^0x([A-Fa-f0-9]{64})$/.test(hash)}function transaction(clientIndex,hash,id){validateTransaction(clientIndex,hash,id);// create startTime for transaction
var startTime=Date.now();// create emitter for transaction
var emitter=createEmitter$1();// create eventCode for transaction
var eventCode="txSent";var client=session.clients[clientIndex];// put in queue
client.transactions.push({hash:hash,emitter:emitter});var transaction={hash:hash,id:id||hash,startTime:startTime,status:"sent"};var newState=_assign$(_assign$({},transaction),{eventCode:eventCode});// logEvent to server
sendMessage({eventCode:eventCode,categoryCode:"activeTransaction",transaction:transaction});var transactionObj={details:transaction,emitter:emitter};// emit after delay to allow for listener to be registered
setTimeout(function(){var emitterResult=emitter.emit(newState);client.transactionHandlers.forEach(function(handler){return handler({transaction:newState,emitterResult:emitterResult})})},5);return transactionObj}function account(clientIndex,address){validateAccount(clientIndex,address);// lowercase the address
address=address.toLowerCase();// create emitter for transaction
var emitter=createEmitter$1();// create eventCode for transaction
var eventCode="accountAddress";var existingAddressWatcher=session.clients[clientIndex].accounts.find(function(ac){return ac.address===address});if(existingAddressWatcher){// add to existing emitters array
existingAddressWatcher.emitters.push(emitter)}else{// put in accounts queue
session.clients[clientIndex].accounts.push({address:address,emitters:[emitter]})}// logEvent to server
sendMessage({eventCode:eventCode,categoryCode:"watch",account:{address:address}});return{emitter:emitter,details:{address:address}}}function event(eventObj){validateEvent(eventObj);sendMessage(eventObj)}var clientIndex=0;function sdk(options){validateOptions(options);var dappId=options.dappId,networkId=options.networkId,_a=options.transactionHandlers,transactionHandlers=_a===void 0?[]:_a,apiUrl=options.apiUrl,ws=options.ws;var alreadyConnected=!!session.socket;session.dappId=dappId;session.networkId=networkId;session.clients.push({transactionHandlers:transactionHandlers,transactions:[],accounts:[]});if(!alreadyConnected){if(ws){session.socket=new SturdyWebSocket(apiUrl||"wss://api.blocknative.com/v0",{wsConstructor:ws})}else{session.socket=new SturdyWebSocket(apiUrl||"wss://api.blocknative.com/v0")}session.socket.onopen=function(){session.status.connected=true;var connectionId=typeof window!=="undefined"&&window.localStorage.getItem("connectionId")||session.connectionId;sendMessage({categoryCode:"initialize",eventCode:"checkDappId",connectionId:connectionId})};session.socket.ondown=function(){session.status.connected=false};session.socket.onreopen=function(){session.status.connected=true;var connectionId=typeof window!=="undefined"&&window.localStorage.getItem("connectionId")||session.connectionId;sendMessage({categoryCode:"initialize",eventCode:"checkDappId",connectionId:connectionId});// re-register all accounts to be watched by server upon
// re-connection as they don't get transferred over automatically
// to the new connection like tx hashes do
session.clients.forEach(function(client){client.accounts.forEach(function(account){sendMessage({eventCode:"accountAddress",categoryCode:"watch",account:{address:account.address}})})})};session.socket.onmessage=handleMessage}return{transaction:transaction,account:account,event:event,status:session.status,clientIndex:clientIndex++}}var blocknative;function getBlocknative(options){if(!blocknative&&options){blocknative=sdk(options)}return blocknative}var transactionQueue;transactions.subscribe(function(store){return transactionQueue=store});function handlePreFlightEvent(preflightEvent){var eventCode=preflightEvent.eventCode,contractCall=preflightEvent.contractCall,balance=preflightEvent.balance,txDetails=preflightEvent.txDetails,emitter=preflightEvent.emitter,status=preflightEvent.status;var blocknative=getBlocknative();blocknative.event({categoryCode:contractCall?"activeContract":"activeTransaction",eventCode:eventCode,transaction:txDetails,wallet:{balance:balance},contract:contractCall});var transaction=_objectSpread({},txDetails,{eventCode:eventCode,status:status,contractCall:contractCall});var emitterResult=emitter.emit(transaction);if(emitterResult){validateNotificationObject(emitterResult)}handleTransactionEvent({transaction:transaction,emitterResult:emitterResult})}function handleTransactionEvent(event){var transaction=event.transaction,emitterResult=event.emitterResult;transactions.updateQueue(transaction);// create notification if dev hasn't opted out
if(emitterResult!==false){var transactionObj=transactionQueue.find(function(tx){return tx.id===transaction.id});if(transactionObj){createNotification(transactionObj,emitterResult)}}}function duplicateTransactionCandidate(transaction,contract){var duplicate=transactionQueue.find(function(tx){if(contract&&typeof tx.contractCall==="undefined")return false;var sameMethod=contract?contract.methodName===(tx.contractCall&&tx.contractCall.methodName):true;var sameParams=contract?argsEqual(contract.params,tx.contractCall&&tx.contractCall.params):true;var sameVal=tx.value==transaction.value;var sameTo=contract?sameMethod:tx.to&&tx.to.toLowerCase()===transaction.to&&transaction.to.toLowerCase();return sameMethod&&sameParams&&sameVal&&sameTo});if(duplicate&&(duplicate.status==="confirmed"||duplicate.status==="failed")){duplicate=false}return duplicate}function preflightTransaction(options,emitter){return new Promise(function(resolve,reject){// wrap in set timeout to put to the end of the event queue
setTimeout(function _callee(){var sendTransaction,estimateGas,gasPrice,balance,contractCall,txDetails,blocknative,_ref7,_ref8,gas,price,id,value,calculated,txObject,transactionCost,eventCode,_eventCode,_get_store_value,txApproveReminderTimeout,txStallPendingTimeout,txStallConfirmedTimeout,_eventCode2,sendTransactionResult,hash,_extractMessageFromEr,_eventCode4,errorMsg,serverEmitter;return regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:sendTransaction=options.sendTransaction,estimateGas=options.estimateGas,gasPrice=options.gasPrice,balance=options.balance,contractCall=options.contractCall,txDetails=options.txDetails;blocknative=getBlocknative();//=== if `balance` or `estimateGas` or `gasPrice` is not provided, then sufficient funds check is disabled === //
//=== if `txDetails` is not provided, then duplicate transaction check is disabled === //
//== if dev doesn't want notify to intiate the transaction and `sendTransaction` is not provided, then transaction rejected notification is disabled ==//
//=== to disable hints for `txAwaitingApproval`, `txConfirmReminder` or any other notification, then return false from listener functions ==//
_context.next=4;return regeneratorRuntime.awrap(gasEstimates(estimateGas,gasPrice));case 4:_ref7=_context.sent;_ref8=_slicedToArray(_ref7,2);gas=_ref8[0];price=_ref8[1];id=v4_1();value=new bignumber(txDetails&&txDetails.value||0);calculated={value:value.toString(10),gas:gas&&gas.toString(10),gasPrice:price&&price.toString(10)};txObject=txDetails?_objectSpread({},txDetails,{},calculated,{id:id}):_objectSpread({},calculated,{id:id});// check sufficient balance if required parameters are available
if(!(balance&&gas&&price)){_context.next=18;break}transactionCost=gas.times(price).plus(value);// if transaction cost is greater than the current balance
if(!transactionCost.gt(new bignumber(balance))){_context.next=18;break}eventCode="nsfFail";handlePreFlightEvent({eventCode:eventCode,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter});return _context.abrupt("return",reject("User has insufficient funds"));case 18:// check if it is a duplicate transaction
if(txDetails&&duplicateTransactionCandidate({to:txDetails.to,value:txDetails.value},contractCall)){_eventCode="txRepeat";handlePreFlightEvent({eventCode:_eventCode,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter})}_get_store_value=get_store_value(app),txApproveReminderTimeout=_get_store_value.txApproveReminderTimeout,txStallPendingTimeout=_get_store_value.txStallPendingTimeout,txStallConfirmedTimeout=_get_store_value.txStallConfirmedTimeout;// check previous transactions awaiting approval
if(transactionQueue.find(function(tx){return tx.status==="awaitingApproval"})){_eventCode2="txAwaitingApproval";handlePreFlightEvent({eventCode:_eventCode2,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter})}// confirm reminder after timeout
setTimeout(function(){var awaitingApproval=transactionQueue.find(function(tx){return tx.id===id&&tx.status==="awaitingApproval"});if(awaitingApproval){var _eventCode3="txConfirmReminder";handlePreFlightEvent({eventCode:_eventCode3,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter})}},txApproveReminderTimeout);handlePreFlightEvent({eventCode:"txRequest",status:"awaitingApproval",contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter});resolve(id);// if not provided with sendTransaction function, resolve with id so dev can initiate transaction
// dev will need to call notify.hash(txHash, id) with this id to link up the preflight with the postflight notifications
if(sendTransaction){_context.next=26;break}return _context.abrupt("return");case 26:// initiate transaction
sendTransactionResult=sendTransaction();// get result and handle errors
_context.prev=27;_context.next=30;return regeneratorRuntime.awrap(sendTransactionResult);case 30:hash=_context.sent;_context.next=38;break;case 33:_context.prev=33;_context.t0=_context["catch"](27);_extractMessageFromEr=extractMessageFromError(_context.t0),_eventCode4=_extractMessageFromEr.eventCode,errorMsg=_extractMessageFromEr.errorMsg;handlePreFlightEvent({eventCode:_eventCode4,status:"failed",contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter});return _context.abrupt("return",reject(errorMsg));case 38:if(!(hash&&typeof hash==="string")){_context.next=45;break}serverEmitter=blocknative.transaction(blocknative.clientIndex,hash,id).emitter;serverEmitter.on("all",function(transaction){var result=emitter.emit(transaction);return result});// Check for pending stall status
setTimeout(function(){var transaction=transactionQueue.find(function(tx){return tx.id===id});if(transaction&&transaction.status==="sent"&&blocknative.status.connected&&blocknative.status.nodeSynced){var _eventCode5="txStallPending";handlePreFlightEvent({eventCode:_eventCode5,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter})}},txStallPendingTimeout);// Check for confirmed stall status
setTimeout(function(){var transaction=transactionQueue.find(function(tx){return tx.id===id});if(transaction&&transaction.status==="pending"&&blocknative.status.connected&&blocknative.status.nodeSynced){var _eventCode6="txStallConfirmed";handlePreFlightEvent({eventCode:_eventCode6,contractCall:contractCall,balance:balance,txDetails:txObject,emitter:emitter})}},txStallConfirmedTimeout);_context.next=46;break;case 45:throw new Error("sendTransaction function must resolve to a transaction hash that is of type String.");case 46:case"end":return _context.stop();}}},null,null,[[27,33]])},10)})}function gasEstimates(gasFunc,gasPriceFunc){if(!gasFunc||!gasPriceFunc){return Promise.resolve([])}var gasProm=gasFunc();if(!gasProm.then){throw new Error("The `estimateGas` function must return a Promise")}var gasPriceProm=gasPriceFunc();if(!gasPriceProm.then){throw new Error("The `gasPrice` function must return a Promise")}return Promise.all([gasProm,gasPriceProm]).then(function(_ref9){var _ref10=_slicedToArray(_ref9,2),gasResult=_ref10[0],gasPriceResult=_ref10[1];if(typeof gasResult!=="string"){throw new Error("The Promise returned from calling 'estimateGas' must resolve with a value of type 'string'. Received a value of: ".concat(gasResult," with a type: ").concat(_typeof(gasResult)))}if(typeof gasPriceResult!=="string"){throw new Error("The Promise returned from calling 'gasPrice' must resolve with a value of type 'string'. Received a value of: ".concat(gasPriceResult," with a type: ").concat(_typeof(gasPriceResult)))}return[new bignumber(gasResult),new bignumber(gasPriceResult)]})["catch"](function(error){throw new Error("There was an error getting gas estimates: ".concat(error))})}var version$1="0.0.1";function init$1(options){validateInit(options);var dappId=options.dappId,networkId=options.networkId,transactionHandler=options.transactionHandler;var transactionHandlers=[handleTransactionEvent];if(transactionHandler){transactionHandlers.push(transactionHandler)}var blocknative=getBlocknative({dappId:dappId,networkId:networkId,transactionHandlers:transactionHandlers});// save config to app store
app.update(function(store){return _objectSpread({},store,{},options,{version:version$1,clientLocale:getClientLocale({fallback:"en",navigator:true})})});// initialize App
new Notify({target:document.body});app.subscribe(function(store){var notifyMessages=store.notifyMessages,clientLocale=store.clientLocale;// set the dictionary for i18n
dictionary.set(notifyMessages);var availableLocale=notifyMessages[clientLocale]||notifyMessages[clientLocale.slice(0,2)];locale.set(availableLocale?clientLocale:"en")});return{hash:hash,transaction:transaction,account:account,notification:notification,config:config};function account(address){try{var result=blocknative.account(blocknative.clientIndex,address);return result}catch(error){throw new Error(error)}}function hash(hash,id){try{var result=blocknative.transaction(blocknative.clientIndex,hash,id);return result}catch(error){throw new Error(error)}}function transaction(options){validateTransactionOptions(options);var emitter=createEmitter();var result=preflightTransaction(options,emitter);return{emitter:emitter,result:result}}function notification(notificationObject){validateNotificationObject(notificationObject);var key=0;var id=v4_1();var startTime=Date.now();var _notificationObject$e=notificationObject.eventCode,eventCode=_notificationObject$e===void 0?"customNotification".concat(key++):_notificationObject$e;var dismiss=function dismiss(){return notifications.remove(id,eventCode)};function update(notificationUpdate){validateNotificationObject(notificationUpdate);var _notificationUpdate$e=notificationUpdate.eventCode,eventCode=_notificationUpdate$e===void 0?"customNotification".concat(key++):_notificationUpdate$e;createNotification({id:id,startTime:startTime,eventCode:eventCode},notificationUpdate);return{dismiss:dismiss,update:update}}createNotification({id:id,startTime:startTime,eventCode:eventCode},notificationObject);return{dismiss:dismiss,update:update}}function config(options){validateConfig(options);var notifyMessages=options.notifyMessages,otherOptions=_objectWithoutProperties(options,["notifyMessages"]);app.update(function(store){return _objectSpread({},store,{},otherOptions,{notifyMessages:notifyMessages?_objectSpread({},store.notifyMessages,{},notifyMessages):store.notifyMessages})})}}return init$1});
